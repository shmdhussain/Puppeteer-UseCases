
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);!function(a){var b="MomentPicker",c=moment().startOf("day"),d={date:c,level:0,style:{selected:"selected",current:"current"}};a.fn[b]=function(e){var f=a(this).data(b);return f?f:this.each(function(){var f,g=a.extend(!0,{},d,e),h=g.date,i=h.clone(),j=a(this),k=g.level;j.html(['<div class="header">','<a class="prev"></a>','<a class="current"></a>','<a class="next"></a>',"</div>",'<div class="body"></div>'].join(""));var l=j.children("div.header"),m=j.children("div.body"),n=l.children("a.next"),o=l.children("a.prev"),p=l.children("a.current"),q=function(){return!1},r=q,s=q,t=q,u=q,v=q,w=q,x=q,y=q,z=function(a){a instanceof Function?x=a:!function(){var b=moment(a);moment.isMoment(b)&&(b.startOf("day"),x=function(){return b.clone()})}(),v=function(a){return a<x().year()},t=function(a){return a.clone().startOf("month")<x().startOf("month")},r=function(a){return a<x()};var b=x();b>i?F(b):L()},A=function(a){a instanceof Function?y=a:!function(){var b=moment(a);moment.isMoment(b)&&(b.startOf("day"),y=function(){return b.clone()})}(),w=function(a){return a>y().year()},u=function(a){return a.clone().startOf("month")>y().startOf("month")},s=function(a){return a>y()};var b=y();i>b?F(b):L()},B=function(b){var c=a.Event(b);c.api=f,j.trigger(c)},C=function(a){return!v(a)&&!w(a)},D=function(a){return!r(a)&&!s(a)},E=function(a){return!t(a)&&!u(a)},F=function(){if(arguments.length>0){var a=moment(arguments[0]);return a.isValid()&&(a.startOf("day"),D(a)&&(i=a,B("pick"),h=i.clone(),L())),f}return i.clone()},G=function(){var a=h.year(),b=a+12,d="";for(p.text(a+" - "+(b-1));b>a;){var e=[];a===c.year()&&e.push(g.style.current),a===i.year()&&e.push(g.style.selected);var f=C(a)?"a":"span";d+="<"+f+' data-year="'+a+'" class="'+e.join(" ")+'">'+a+"</"+f+">",a++}m.html(d),B("renderYears")},H=function(){var a=h.clone().startOf("y"),b=a.clone().add("M",12),d="";for(p.text(a.year());b>a;){var e=[];a.format("M-YYYY")===c.format("M-YYYY")&&e.push(g.style.current),a.format("M-YYYY")===i.format("M-YYYY")&&e.push(g.style.selected);var f=E(a)?"a":"span";d+="<"+f+' data-month="'+a.format("M-YYYY")+'" class="'+e.join(" ")+'">'+a.format("MMM")+"</"+f+">",a.add("M",1)}m.html(d),B("renderMonths")},I=function(){var a=h.clone().startOf("w"),b=a.clone().add("w",1),d='<div class="week">';for(p.text(h.format("MMMM YYYY"));b>a;)d+="<span>"+a.format("ddd")+"</span>",a.add("d",1);d+="</div>",a=h.clone().startOf("M").startOf("w"),b=a.clone().add("d",42),d+='<div class="month">';for(var e=!1;b>a;){var f=[];a.format("D-M-YYYY")===c.format("D-M-YYYY")&&f.push(g.style.current),a.format("D-M-YYYY")===i.format("D-M-YYYY")&&f.push(g.style.selected);var j=D(a)?"a":"span";a.month()!==h.month()?f.push(e?"next":"prev"):e=!0,d+="<"+j+' data-day="'+a.format("D-M-YYYY")+'" class="'+f.join(" ")+'">'+a.date()+"</"+j+">",a.add("d",1)}d+="</div>",m.html(d),B("renderDays")},J=[{years:12},{years:1},{months:1}],K=[G,H,I],L=function(){arguments.length>0&&(k=Math.max(arguments[0],g.level)),j.removeClass("top"),k===g.level&&j.addClass("top"),K[k](),B("render")},M=function(){h.add(J[k]),L(),B("showNext")},N=function(){h.subtract(J[k]),L(),B("showPrev")};n.click(M),o.click(N),p.click(function(){L(Math.max(0,--k))}),m.on("click","a[data-year]",function(){h.year(a(this).data("year")),L(1)}),m.on("click","a[data-month]",function(){var b=moment(a(this).data("month"),"M-YYYY");h.month(b.month()).year(b.year()),L(2)}),m.on("click","a[data-day]",function(){F(moment(a(this).data("day"),"D-M-YYYY"))});var O=function(){return arguments.length>0?(z(arguments[0]),f):x()},P=function(){return arguments.length>0?(A(arguments[0]),f):y()};f={val:F,next:M,prev:N,min:O,max:P,renderYears:function(){L(0)},renderMonths:function(){L(1)},renderDays:function(){L(2)}},g.hasOwnProperty("min")&&z(g.min),g.hasOwnProperty("max")&&A(g.max),j.data(b,f),B("ready"),L()})}}(jQuery);var module,countdown=function(r){function v(a,b){var c=a.getTime();a.setUTCMonth(a.getUTCMonth()+b);return Math.round((a.getTime()-c)/864E5)}function t(a){var b=a.getTime(),c=new Date(b);c.setUTCMonth(a.getUTCMonth()+1);return Math.round((c.getTime()-b)/864E5)}function h(a,b){return a+" "+(1===a?p[b]:q[b])}function n(){}function l(a,b,c,g,f,d){0<=a[c]&&(b+=a[c],delete a[c]);b/=f;if(1>=b+1)return 0;if(0<=a[g]){a[g]=+(a[g]+b).toFixed(d);switch(g){case"seconds":if(60!==a.seconds||isNaN(a.minutes))break;a.minutes++;a.seconds=0;case"minutes":if(60!==a.minutes||isNaN(a.hours))break;a.hours++;a.minutes=0;case"hours":if(24!==a.hours||isNaN(a.days))break;a.days++;a.hours=0;case"days":if(7!==a.days||isNaN(a.weeks))break;a.weeks++;a.days=0;case"weeks":if(a.weeks!==t(a.refMonth)/7||isNaN(a.months))break;a.months++;a.weeks=0;case"months":if(12!==a.months||isNaN(a.years))break;a.years++;a.months=0;case"years":if(10!==a.years||isNaN(a.decades))break;a.decades++;a.years=0;case"decades":if(10!==a.decades||isNaN(a.centuries))break;a.centuries++;a.decades=0;case"centuries":if(10!==a.centuries||isNaN(a.millennia))break;a.millennia++;a.centuries=0}return 0}return b}function w(a,b,c,g,f,d){a.start=b;a.end=c;a.units=g;a.value=c.getTime()-b.getTime();if(0>a.value){var h=c;c=b;b=h}a.refMonth=new Date(b.getFullYear(),b.getMonth(),15);try{a.millennia=0;a.centuries=0;a.decades=0;a.years=c.getUTCFullYear()-b.getUTCFullYear();a.months=c.getUTCMonth()-b.getUTCMonth();a.weeks=0;a.days=c.getUTCDate()-b.getUTCDate();a.hours=c.getUTCHours()-b.getUTCHours();a.minutes=c.getUTCMinutes()-b.getUTCMinutes();a.seconds=c.getUTCSeconds()-b.getUTCSeconds();a.milliseconds=c.getUTCMilliseconds()-b.getUTCMilliseconds();var k;0>a.milliseconds?(k=s(-a.milliseconds/1E3),a.seconds-=k,a.milliseconds+=1E3*k):1E3<=a.milliseconds&&(a.seconds+=m(a.milliseconds/1E3),a.milliseconds%=1E3);0>a.seconds?(k=s(-a.seconds/60),a.minutes-=k,a.seconds+=60*k):60<=a.seconds&&(a.minutes+=m(a.seconds/60),a.seconds%=60);0>a.minutes?(k=s(-a.minutes/60),a.hours-=k,a.minutes+=60*k):60<=a.minutes&&(a.hours+=m(a.minutes/60),a.minutes%=60);0>a.hours?(k=s(-a.hours/24),a.days-=k,a.hours+=24*k):24<=a.hours&&(a.days+=m(a.hours/24),a.hours%=24);for(;0>a.days;)a.months--,a.days+=v(a.refMonth,1);7<=a.days&&(a.weeks+=m(a.days/7),a.days%=7);0>a.months?(k=s(-a.months/12),a.years-=k,a.months+=12*k):12<=a.months&&(a.years+=m(a.months/12),a.months%=12);10<=a.years&&(a.decades+=m(a.years/10),a.years%=10,10<=a.decades&&(a.centuries+=m(a.decades/10),a.decades%=10,10<=a.centuries&&(a.millennia+=m(a.centuries/10),a.centuries%=10)));b=0;!(g&1024)||b>=f?(a.centuries+=10*a.millennia,delete a.millennia):a.millennia&&b++;!(g&512)||b>=f?(a.decades+=10*a.centuries,delete a.centuries):a.centuries&&b++;!(g&256)||b>=f?(a.years+=10*a.decades,delete a.decades):a.decades&&b++;!(g&128)||b>=f?(a.months+=12*a.years,delete a.years):a.years&&b++;!(g&64)||b>=f?(a.months&&(a.days+=v(a.refMonth,a.months)),delete a.months,7<=a.days&&(a.weeks+=m(a.days/7),a.days%=7)):a.months&&b++;!(g&32)||b>=f?(a.days+=7*a.weeks,delete a.weeks):a.weeks&&b++;!(g&16)||b>=f?(a.hours+=24*a.days,delete a.days):a.days&&b++;!(g&8)||b>=f?(a.minutes+=60*a.hours,delete a.hours):a.hours&&b++;!(g&4)||b>=f?(a.seconds+=60*a.minutes,delete a.minutes):a.minutes&&b++;!(g&2)||b>=f?(a.milliseconds+=1E3*a.seconds,delete a.seconds):a.seconds&&b++;if(!(g&1)||b>=f){var e=l(a,0,"milliseconds","seconds",1E3,d);if(e&&(e=l(a,e,"seconds","minutes",60,d))&&(e=l(a,e,"minutes","hours",60,d))&&(e=l(a,e,"hours","days",24,d))&&(e=l(a,e,"days","weeks",7,d))&&(e=l(a,e,"weeks","months",t(a.refMonth)/7,d))){g=e;var n,p=a.refMonth,q=p.getTime(),r=new Date(q);r.setUTCFullYear(p.getUTCFullYear()+1);n=Math.round((r.getTime()-q)/864E5);if(e=l(a,g,"months","years",n/t(a.refMonth),d))if(e=l(a,e,"years","decades",10,d))if(e=l(a,e,"decades","centuries",10,d))if(e=l(a,e,"centuries","millennia",10,d))throw Error("Fractional unit overflow");}}}finally{delete a.refMonth}return a}function d(a,b,c,d,f){var h;c=+c||222;d=0<d?d:NaN;f=0<f?20>f?Math.round(f):20:0;"function"===typeof a?(h=a,a=null):a instanceof Date||(a=null!==a&&isFinite(a)?new Date(a):null);"function"===typeof b?(h=b,b=null):b instanceof Date||(b=null!==b&&isFinite(b)?new Date(b):null);if(!a&&!b)return new n;if(!h)return w(new n,a||new Date,b||new Date,c,d,f);var l=c&1?1E3/30:c&2?1E3:c&4?6E4:c&8?36E5:c&16?864E5:6048E5,k,e=function(){h(w(new n,a||new Date,b||new Date,c,d,f),k)};e();return k=setInterval(e,l)}var s=Math.ceil,m=Math.floor,p,q,u;n.prototype.toString=function(){var a=u(this),b=a.length;if(!b)return"";1<b&&(a[b-1]="and "+a[b-1]);return a.join(", ")};n.prototype.toHTML=function(a){a=a||"span";var b=u(this),c=b.length;if(!c)return"";for(var d=0;d<c;d++)b[d]="\x3c"+a+"\x3e"+b[d]+"\x3c/"+a+"\x3e";--c&&(b[c]="and "+b[c]);return b.join(", ")};u=function(a){var b=[],c=a.millennia;c&&b.push(h(c,10));(c=a.centuries)&&b.push(h(c,9));(c=a.decades)&&b.push(h(c,8));(c=a.years)&&b.push(h(c,7));(c=a.months)&&b.push(h(c,6));(c=a.weeks)&&b.push(h(c,5));(c=a.days)&&b.push(h(c,4));(c=a.hours)&&b.push(h(c,3));(c=a.minutes)&&b.push(h(c,2));(c=a.seconds)&&b.push(h(c,1));(c=a.milliseconds)&&b.push(h(c,0));return b};d.MILLISECONDS=1;d.SECONDS=2;d.MINUTES=4;d.HOURS=8;d.DAYS=16;d.WEEKS=32;d.MONTHS=64;d.YEARS=128;d.DECADES=256;d.CENTURIES=512;d.MILLENNIA=1024;d.DEFAULTS=222;d.ALL=2047;d.setLabels=function(a,b){a=a||[];a.split&&(a=a.split("|"));b=b||[];b.split&&(b=b.split("|"));for(var c=0;10>=c;c++)p[c]=a[c]||p[c],q[c]=b[c]||q[c]};(d.resetLabels=function(){p="millisecond second minute hour day week month year decade century millennium".split(" ");q="milliseconds seconds minutes hours days weeks months years decades centuries millennia".split(" ")})();r&&r.exports&&(r.exports=d);return d}(module);!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.ScrollMagic=t()}(this,function(){"use strict";var e=function(){};e.version="2.0.5",window.addEventListener("mousewheel",function(){});var t="data-scrollmagic-pin-spacer";e.Controller=function(r){var o,s,a="ScrollMagic.Controller",l="FORWARD",c="REVERSE",u="PAUSED",f=n.defaults,d=this,h=i.extend({},f,r),g=[],p=!1,v=0,m=u,w=!0,y=0,S=!0,b=function(){for(var e in h)f.hasOwnProperty(e)||delete h[e];if(h.container=i.get.elements(h.container)[0],!h.container)throw a+" init failed.";w=h.container===window||h.container===document.body||!document.body.contains(h.container),w&&(h.container=window),y=z(),h.container.addEventListener("resize",T),h.container.addEventListener("scroll",T),h.refreshInterval=parseInt(h.refreshInterval)||f.refreshInterval,E()},E=function(){h.refreshInterval>0&&(s=window.setTimeout(A,h.refreshInterval))},x=function(){return h.vertical?i.get.scrollTop(h.container):i.get.scrollLeft(h.container)},z=function(){return h.vertical?i.get.height(h.container):i.get.width(h.container)},C=this._setScrollPos=function(e){h.vertical?w?window.scrollTo(i.get.scrollLeft(),e):h.container.scrollTop=e:w?window.scrollTo(e,i.get.scrollTop()):h.container.scrollLeft=e},F=function(){if(S&&p){var e=i.type.Array(p)?p:g.slice(0);p=!1;var t=v;v=d.scrollPos();var n=v-t;0!==n&&(m=n>0?l:c),m===c&&e.reverse(),e.forEach(function(e){e.update(!0)})}},L=function(){o=i.rAF(F)},T=function(e){"resize"==e.type&&(y=z(),m=u),p!==!0&&(p=!0,L())},A=function(){if(!w&&y!=z()){var e;try{e=new Event("resize",{bubbles:!1,cancelable:!1})}catch(t){e=document.createEvent("Event"),e.initEvent("resize",!1,!1)}h.container.dispatchEvent(e)}g.forEach(function(e){e.refresh()}),E()};this._options=h;var O=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(t){if(i.type.Array(t))t.forEach(function(e){d.addScene(e)});else if(t instanceof e.Scene)if(t.controller()!==d)t.addTo(d);else if(g.indexOf(t)<0){g.push(t),g=O(g),t.on("shift.controller_sort",function(){g=O(g)});for(var n in h.globalSceneOptions)t[n]&&t[n].call(t,h.globalSceneOptions[n])}return d},this.removeScene=function(e){if(i.type.Array(e))e.forEach(function(e){d.removeScene(e)});else{var t=g.indexOf(e);t>-1&&(e.off("shift.controller_sort"),g.splice(t,1),e.remove())}return d},this.updateScene=function(t,n){return i.type.Array(t)?t.forEach(function(e){d.updateScene(e,n)}):n?t.update(!0):p!==!0&&t instanceof e.Scene&&(p=p||[],-1==p.indexOf(t)&&p.push(t),p=O(p),L()),d},this.update=function(e){return T({type:"resize"}),e&&F(),d},this.scrollTo=function(n,r){if(i.type.Number(n))C.call(h.container,n,r);else if(n instanceof e.Scene)n.controller()===d&&d.scrollTo(n.scrollOffset(),r);else if(i.type.Function(n))C=n;else{var o=i.get.elements(n)[0];if(o){for(;o.parentNode.hasAttribute(t);)o=o.parentNode;var s=h.vertical?"top":"left",a=i.get.offset(h.container),l=i.get.offset(o);w||(a[s]-=d.scrollPos()),d.scrollTo(l[s]-a[s],r)}}return d},this.scrollPos=function(e){return arguments.length?(i.type.Function(e)&&(x=e),d):x.call(d)},this.info=function(e){var t={size:y,vertical:h.vertical,scrollPos:v,scrollDirection:m,container:h.container,isDocument:w};return arguments.length?void 0!==t[e]?t[e]:void 0:t},this.loglevel=function(){return d},this.enabled=function(e){return arguments.length?(S!=e&&(S=!!e,d.updateScene(g,!0)),d):S},this.destroy=function(e){window.clearTimeout(s);for(var t=g.length;t--;)g[t].destroy(e);return h.container.removeEventListener("resize",T),h.container.removeEventListener("scroll",T),i.cAF(o),null},b(),d};var n={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};e.Controller.addOption=function(e,t){n.defaults[e]=t},e.Controller.extend=function(t){var n=this;e.Controller=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Controller,n),e.Controller.prototype=n.prototype,e.Controller.prototype.constructor=e.Controller},e.Scene=function(n){var o,s,a="BEFORE",l="DURING",c="AFTER",u=r.defaults,f=this,d=i.extend({},u,n),h=a,g=0,p={start:0,end:0},v=0,m=!0,w=function(){for(var e in d)u.hasOwnProperty(e)||delete d[e];for(var t in u)L(t);C()},y={};this.on=function(e,t){return i.type.Function(t)&&(e=e.trim().split(" "),e.forEach(function(e){var n=e.split("."),r=n[0],i=n[1];"*"!=r&&(y[r]||(y[r]=[]),y[r].push({namespace:i||"",callback:t}))})),f},this.off=function(e,t){return e?(e=e.trim().split(" "),e.forEach(function(e){var n=e.split("."),r=n[0],i=n[1]||"",o="*"===r?Object.keys(y):[r];o.forEach(function(e){for(var n=y[e]||[],r=n.length;r--;){var o=n[r];!o||i!==o.namespace&&"*"!==i||t&&t!=o.callback||n.splice(r,1)}n.length||delete y[e]})}),f):f},this.trigger=function(t,n){if(t){var r=t.trim().split("."),i=r[0],o=r[1],s=y[i];s&&s.forEach(function(t){o&&o!==t.namespace||t.callback.call(f,new e.Event(i,t.namespace,f,n))})}return f},f.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?E():"reverse"===e.what&&f.update())}).on("shift.internal",function(){S(),f.update()}),this.addTo=function(t){return t instanceof e.Controller&&s!=t&&(s&&s.removeScene(f),s=t,C(),b(!0),E(!0),S(),s.info("container").addEventListener("resize",x),t.addScene(f),f.trigger("add",{controller:s}),f.update()),f},this.enabled=function(e){return arguments.length?(m!=e&&(m=!!e,f.update(!0)),f):m},this.remove=function(){if(s){s.info("container").removeEventListener("resize",x);var e=s;s=void 0,e.removeScene(f),f.trigger("remove")}return f},this.destroy=function(e){return f.trigger("destroy",{reset:e}),f.remove(),f.off("*.*"),null},this.update=function(e){if(s)if(e)if(s.enabled()&&m){var t,n=s.info("scrollPos");t=d.duration>0?(n-p.start)/(p.end-p.start):n>=p.start?1:0,f.trigger("update",{startPos:p.start,endPos:p.end,scrollPos:n}),f.progress(t)}else T&&h===l&&O(!0);else s.updateScene(f,!1);return f},this.refresh=function(){return b(),E(),f},this.progress=function(e){if(arguments.length){var t=!1,n=h,r=s?s.info("scrollDirection"):"PAUSED",i=d.reverse||e>=g;if(0===d.duration?(t=g!=e,g=1>e&&i?0:1,h=0===g?a:l):0>e&&h!==a&&i?(g=0,h=a,t=!0):e>=0&&1>e&&i?(g=e,h=l,t=!0):e>=1&&h!==c?(g=1,h=c,t=!0):h!==l||i||O(),t){var o={progress:g,state:h,scrollDirection:r},u=h!=n,p=function(e){f.trigger(e,o)};u&&n!==l&&(p("enter"),p(n===a?"start":"end")),p("progress"),u&&h!==l&&(p(h===a?"start":"end"),p("leave"))}return f}return g};var S=function(){p={start:v+d.offset},s&&d.triggerElement&&(p.start-=s.info("size")*d.triggerHook),p.end=p.start+d.duration},b=function(e){if(o){var t="duration";F(t,o.call(f))&&!e&&(f.trigger("change",{what:t,newval:d[t]}),f.trigger("shift",{reason:t}))}},E=function(e){var n=0,r=d.triggerElement;if(s&&r){for(var o=s.info(),a=i.get.offset(o.container),l=o.vertical?"top":"left";r.parentNode.hasAttribute(t);)r=r.parentNode;var c=i.get.offset(r);o.isDocument||(a[l]-=s.scrollPos()),n=c[l]-a[l]}var u=n!=v;v=n,u&&!e&&f.trigger("shift",{reason:"triggerElementPosition"})},x=function(){d.triggerHook>0&&f.trigger("shift",{reason:"containerResize"})},z=i.extend(r.validate,{duration:function(e){if(i.type.String(e)&&e.match(/^(\.|\d)*\d+%$/)){var t=parseFloat(e)/100;e=function(){return s?s.info("size")*t:0}}if(i.type.Function(e)){o=e;try{e=parseFloat(o())}catch(n){e=-1}}if(e=parseFloat(e),!i.type.Number(e)||0>e)throw o?(o=void 0,0):0;return e}}),C=function(e){e=arguments.length?[e]:Object.keys(z),e.forEach(function(e){var t;if(z[e])try{t=z[e](d[e])}catch(n){t=u[e]}finally{d[e]=t}})},F=function(e,t){var n=!1,r=d[e];return d[e]!=t&&(d[e]=t,C(e),n=r!=d[e]),n},L=function(e){f[e]||(f[e]=function(t){return arguments.length?("duration"===e&&(o=void 0),F(e,t)&&(f.trigger("change",{what:e,newval:d[e]}),r.shifts.indexOf(e)>-1&&f.trigger("shift",{reason:e})),f):d[e]})};this.controller=function(){return s},this.state=function(){return h},this.scrollOffset=function(){return p.start},this.triggerPosition=function(){var e=d.offset;return s&&(e+=d.triggerElement?v:s.info("size")*f.triggerHook()),e};var T,A;f.on("shift.internal",function(e){var t="duration"===e.reason;(h===c&&t||h===l&&0===d.duration)&&O(),t&&_()}).on("progress.internal",function(){O()}).on("add.internal",function(){_()}).on("destroy.internal",function(e){f.removePin(e.reset)});var O=function(e){if(T&&s){var t=s.info(),n=A.spacer.firstChild;if(e||h!==l){var r={position:A.inFlow?"relative":"absolute",top:0,left:0},o=i.css(n,"position")!=r.position;A.pushFollowers?d.duration>0&&(h===c&&0===parseFloat(i.css(A.spacer,"padding-top"))?o=!0:h===a&&0===parseFloat(i.css(A.spacer,"padding-bottom"))&&(o=!0)):r[t.vertical?"top":"left"]=d.duration*g,i.css(n,r),o&&_()}else{"fixed"!=i.css(n,"position")&&(i.css(n,{position:"fixed"}),_());var u=i.get.offset(A.spacer,!0),f=d.reverse||0===d.duration?t.scrollPos-p.start:Math.round(g*d.duration*10)/10;u[t.vertical?"top":"left"]+=f,i.css(A.spacer.firstChild,{top:u.top,left:u.left})}}},_=function(){if(T&&s&&A.inFlow){var e=h===l,t=s.info("vertical"),n=A.spacer.firstChild,r=i.isMarginCollapseType(i.css(A.spacer,"display")),o={};A.relSize.width||A.relSize.autoFullWidth?e?i.css(T,{width:i.get.width(A.spacer)}):i.css(T,{width:"100%"}):(o["min-width"]=i.get.width(t?T:n,!0,!0),o.width=e?o["min-width"]:"auto"),A.relSize.height?e?i.css(T,{height:i.get.height(A.spacer)-(A.pushFollowers?d.duration:0)}):i.css(T,{height:"100%"}):(o["min-height"]=i.get.height(t?n:T,!0,!r),o.height=e?o["min-height"]:"auto"),A.pushFollowers&&(o["padding"+(t?"Top":"Left")]=d.duration*g,o["padding"+(t?"Bottom":"Right")]=d.duration*(1-g)),i.css(A.spacer,o)}},N=function(){s&&T&&h===l&&!s.info("isDocument")&&O()},P=function(){s&&T&&h===l&&((A.relSize.width||A.relSize.autoFullWidth)&&i.get.width(window)!=i.get.width(A.spacer.parentNode)||A.relSize.height&&i.get.height(window)!=i.get.height(A.spacer.parentNode))&&_()},D=function(e){s&&T&&h===l&&!s.info("isDocument")&&(e.preventDefault(),s._setScrollPos(s.info("scrollPos")-((e.wheelDelta||e[s.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-e.detail)))};this.setPin=function(e,n){var r={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"};if(n=i.extend({},r,n),e=i.get.elements(e)[0],!e)return f;if("fixed"===i.css(e,"position"))return f;if(T){if(T===e)return f;f.removePin()}T=e;var o=T.parentNode.style.display,s=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];T.parentNode.style.display="none";var a="absolute"!=i.css(T,"position"),l=i.css(T,s.concat(["display"])),c=i.css(T,["width","height"]);T.parentNode.style.display=o,!a&&n.pushFollowers&&(n.pushFollowers=!1);var u=T.parentNode.insertBefore(document.createElement("div"),T),d=i.extend(l,{position:a?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(a||i.extend(d,i.css(T,["width","height"])),i.css(u,d),u.setAttribute(t,""),i.addClass(u,n.spacerClass),A={spacer:u,relSize:{width:"%"===c.width.slice(-1),height:"%"===c.height.slice(-1),autoFullWidth:"auto"===c.width&&a&&i.isMarginCollapseType(l.display)},pushFollowers:n.pushFollowers,inFlow:a},!T.___origStyle){T.___origStyle={};var h=T.style,g=s.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]);g.forEach(function(e){T.___origStyle[e]=h[e]||""})}return A.relSize.width&&i.css(u,{width:c.width}),A.relSize.height&&i.css(u,{height:c.height}),u.appendChild(T),i.css(T,{position:a?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(A.relSize.width||A.relSize.autoFullWidth)&&i.css(T,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",N),window.addEventListener("resize",N),window.addEventListener("resize",P),T.addEventListener("mousewheel",D),T.addEventListener("DOMMouseScroll",D),O(),f},this.removePin=function(e){if(T){if(h===l&&O(!0),e||!s){var n=A.spacer.firstChild;if(n.hasAttribute(t)){var r=A.spacer.style,o=["margin","marginLeft","marginRight","marginTop","marginBottom"];margins={},o.forEach(function(e){margins[e]=r[e]||""}),i.css(n,margins)}A.spacer.parentNode.insertBefore(n,A.spacer),A.spacer.parentNode.removeChild(A.spacer),T.parentNode.hasAttribute(t)||(i.css(T,T.___origStyle),delete T.___origStyle)}window.removeEventListener("scroll",N),window.removeEventListener("resize",N),window.removeEventListener("resize",P),T.removeEventListener("mousewheel",D),T.removeEventListener("DOMMouseScroll",D),T=void 0}return f};var R,k=[];return f.on("destroy.internal",function(e){f.removeClassToggle(e.reset)}),this.setClassToggle=function(e,t){var n=i.get.elements(e);return 0!==n.length&&i.type.String(t)?(k.length>0&&f.removeClassToggle(),R=t,k=n,f.on("enter.internal_class leave.internal_class",function(e){var t="enter"===e.type?i.addClass:i.removeClass;k.forEach(function(e){t(e,R)})}),f):f},this.removeClassToggle=function(e){return e&&k.forEach(function(e){i.removeClass(e,R)}),f.off("start.internal_class end.internal_class"),R=void 0,k=[],f},w(),f};var r={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(e){if(e=parseFloat(e),!i.type.Number(e))throw 0;return e},triggerElement:function(e){if(e=e||void 0){var t=i.get.elements(e)[0];if(!t)throw 0;e=t}return e},triggerHook:function(e){var t={onCenter:.5,onEnter:1,onLeave:0};if(i.type.Number(e))e=Math.max(0,Math.min(parseFloat(e),1));else{if(!(e in t))throw 0;e=t[e]}return e},reverse:function(e){return!!e}},shifts:["duration","offset","triggerHook"]};e.Scene.addOption=function(e,t,n,i){e in r.defaults||(r.defaults[e]=t,r.validate[e]=n,i&&r.shifts.push(e))},e.Scene.extend=function(t){var n=this;e.Scene=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Scene,n),e.Scene.prototype=n.prototype,e.Scene.prototype.constructor=e.Scene},e.Event=function(e,t,n,r){r=r||{};for(var i in r)this[i]=r[i];return this.type=e,this.target=this.currentTarget=n,this.namespace=t||"",this.timeStamp=this.timestamp=Date.now(),this};var i=e._util=function(e){var t,n={},r=function(e){return parseFloat(e)||0},i=function(t){return t.currentStyle?t.currentStyle:e.getComputedStyle(t)},o=function(t,n,o,s){if(n=n===document?e:n,n===e)s=!1;else if(!f.DomElement(n))return 0;t=t.charAt(0).toUpperCase()+t.substr(1).toLowerCase();var a=(o?n["offset"+t]||n["outer"+t]:n["client"+t]||n["inner"+t])||0;if(o&&s){var l=i(n);a+="Height"===t?r(l.marginTop)+r(l.marginBottom):r(l.marginLeft)+r(l.marginRight)}return a},s=function(e){return e.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})};n.extend=function(e){for(e=e||{},t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},n.isMarginCollapseType=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1};var a=0,l=["ms","moz","webkit","o"],c=e.requestAnimationFrame,u=e.cancelAnimationFrame;for(t=0;!c&&t<l.length;++t)c=e[l[t]+"RequestAnimationFrame"],u=e[l[t]+"CancelAnimationFrame"]||e[l[t]+"CancelRequestAnimationFrame"];c||(c=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-a)),i=e.setTimeout(function(){t(n+r)},r);return a=n+r,i}),u||(u=function(t){e.clearTimeout(t)}),n.rAF=c.bind(e),n.cAF=u.bind(e);var f=n.type=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};f.String=function(e){return"string"===f(e)},f.Function=function(e){return"function"===f(e)},f.Array=function(e){return Array.isArray(e)},f.Number=function(e){return!f.Array(e)&&e-parseFloat(e)+1>=0},f.DomElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};var d=n.get={};return d.elements=function(t){var n=[];if(f.String(t))try{t=document.querySelectorAll(t)}catch(r){return n}if("nodelist"===f(t)||f.Array(t))for(var i=0,o=n.length=t.length;o>i;i++){var s=t[i];n[i]=f.DomElement(s)?s:d.elements(s)}else(f.DomElement(t)||t===document||t===e)&&(n=[t]);return n},d.scrollTop=function(t){return t&&"number"==typeof t.scrollTop?t.scrollTop:e.pageYOffset||0},d.scrollLeft=function(t){return t&&"number"==typeof t.scrollLeft?t.scrollLeft:e.pageXOffset||0},d.width=function(e,t,n){return o("width",e,t,n)},d.height=function(e,t,n){return o("height",e,t,n)},d.offset=function(e,t){var n={top:0,left:0};if(e&&e.getBoundingClientRect){var r=e.getBoundingClientRect();n.top=r.top,n.left=r.left,t||(n.top+=d.scrollTop(),n.left+=d.scrollLeft())}return n},n.addClass=function(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)},n.removeClass=function(e,t){t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},n.css=function(e,t){if(f.String(t))return i(e)[s(t)];if(f.Array(t)){var n={},r=i(e);return t.forEach(function(e){n[e]=r[s(e)]}),n}for(var o in t){var a=t[o];a==parseFloat(a)&&(a+="px"),e.style[s(o)]=a}},n}(window||{});return e});(function(){var d;window.AmCharts?d=window.AmCharts:(d={},window.AmCharts=d,d.themes={},d.maps={},d.inheriting={},d.charts=[],d.onReadyArray=[],d.useUTC=!1,d.updateRate=30,d.uid=0,d.lang={},d.translations={},d.mapTranslations={},d.windows={},d.initHandlers=[]);d.Class=function(a){var b=function(){arguments[0]!==d.inheriting&&(this.events={},this.construct.apply(this,arguments))};a.inherits?(b.prototype=new a.inherits(d.inheriting),b.base=a.inherits.prototype,delete a.inherits):(b.prototype.createEvents=function(){for(var a=0,b=arguments.length;a<b;a++)this.events[arguments[a]]=[]},b.prototype.listenTo=function(a,b,c){this.removeListener(a,b,c);a.events[b].push({handler:c,scope:this})},b.prototype.addListener=function(a,b,c){this.removeListener(this,a,b);this.events[a].push({handler:b,scope:c})},b.prototype.removeListener=function(a,b,c){if(a&&a.events)for(a=a.events[b],b=a.length-1;0<=b;b--)a[b].handler===c&&a.splice(b,1)},b.prototype.fire=function(a,b){for(var c=this.events[a],d=0,k=c.length;d<k;d++){var l=c[d];l.handler.call(l.scope,b)}});for(var c in a)b.prototype[c]=a[c];return b};d.addChart=function(a){d.updateInt||(d.updateInt=setInterval(function(){d.update()},Math.round(1E3/d.updateRate)));d.charts.push(a)};d.removeChart=function(a){for(var b=d.charts,c=b.length-1;0<=c;c--)b[c]==a&&b.splice(c,1);0===b.length&&d.updateInt&&(clearInterval(d.updateInt),d.updateInt=NaN)};d.isModern=!0;d.getIEVersion=function(){var a=0,b,c;"Microsoft Internet Explorer"==navigator.appName&&(b=navigator.userAgent,c=/MSIE ([0-9]{1,}[.0-9]{0,})/,null!==c.exec(b)&&(a=parseFloat(RegExp.$1)));return a};d.applyLang=function(a,b){var c=d.translations;b.dayNames=d.extend({},d.dayNames);b.shortDayNames=d.extend({},d.shortDayNames);b.monthNames=d.extend({},d.monthNames);b.shortMonthNames=d.extend({},d.shortMonthNames);c&&(c=c[a])&&(d.lang=c,c.monthNames&&(b.dayNames=d.extend({},c.dayNames),b.shortDayNames=d.extend({},c.shortDayNames),b.monthNames=d.extend({},c.monthNames),b.shortMonthNames=d.extend({},c.shortMonthNames)))};d.IEversion=d.getIEVersion();9>d.IEversion&&0<d.IEversion&&(d.isModern=!1,d.isIE=!0);d.dx=0;d.dy=0;if(document.addEventListener||window.opera)d.isNN=!0,d.isIE=!1,d.dx=.5,d.dy=.5;document.attachEvent&&(d.isNN=!1,d.isIE=!0,d.isModern||(d.dx=0,d.dy=0));window.chrome&&(d.chrome=!0);d.handleMouseUp=function(a){for(var b=d.charts,c=0;c<b.length;c++){var e=b[c];e&&e.handleReleaseOutside&&e.handleReleaseOutside(a)}};d.handleMouseMove=function(a){for(var b=d.charts,c=0;c<b.length;c++){var e=b[c];e&&e.handleMouseMove&&e.handleMouseMove(a)}};d.handleWheel=function(a){for(var b=d.charts,c=0;c<b.length;c++){var e=b[c];if(e&&e.mouseIsOver){e.mouseWheelScrollEnabled||e.mouseWheelZoomEnabled?e.handleWheel&&e.handleWheel(a):a.stopPropagation&&a.stopPropagation();break}}};d.resetMouseOver=function(){for(var a=d.charts,b=0;b<a.length;b++){var c=a[b];c&&(c.mouseIsOver=!1)}};d.ready=function(a){d.onReadyArray.push(a)};d.handleLoad=function(){d.isReady=!0;for(var a=d.onReadyArray,b=0;b<a.length;b++){var c=a[b];isNaN(d.processDelay)?c():setTimeout(c,d.processDelay*b)}};d.addInitHandler=function(a,b){d.initHandlers.push({method:a,types:b})};d.callInitHandler=function(a){var b=d.initHandlers;if(d.initHandlers)for(var c=0;c<b.length;c++){var e=b[c];e.types?d.isInArray(e.types,a.type)&&e.method(a):e.method(a)}};d.getUniqueId=function(){d.uid++;return"AmChartsEl-"+d.uid};d.isNN&&(document.addEventListener("mousemove",d.handleMouseMove,!0),document.addEventListener("mouseup",d.handleMouseUp,!0),window.addEventListener("load",d.handleLoad,!0),window.addEventListener("DOMMouseScroll",d.handleWheel,!0),document.addEventListener("mousewheel",d.handleWheel,!0));d.isIE&&(document.attachEvent("onmousemove",d.handleMouseMove),document.attachEvent("onmouseup",d.handleMouseUp),window.attachEvent("onload",d.handleLoad));d.clear=function(){var a=d.charts;if(a)for(var b=a.length-1;0<=b;b--)a[b].clear();d.updateInt&&clearInterval(d.updateInt);d.charts=[];d.isNN&&(document.removeEventListener("mousemove",d.handleMouseMove,!0),document.removeEventListener("mouseup",d.handleMouseUp,!0),window.removeEventListener("load",d.handleLoad,!0),window.removeEventListener("DOMMouseScroll",d.handleWheel,!0),document.removeEventListener("mousewheel",d.handleWheel,!0));d.isIE&&(document.detachEvent("onmousemove",d.handleMouseMove),document.detachEvent("onmouseup",d.handleMouseUp),window.detachEvent("onload",d.handleLoad))};d.makeChart=function(a,b,c){var e=b.type,h=b.theme;d.isString(h)&&(h=d.themes[h],b.theme=h);var f;switch(e){case"serial":f=new d.AmSerialChart(h);break;case"xy":f=new d.AmXYChart(h);break;case"pie":f=new d.AmPieChart(h);break;case"radar":f=new d.AmRadarChart(h);break;case"gauge":f=new d.AmAngularGauge(h);break;case"funnel":f=new d.AmFunnelChart(h);break;case"map":f=new d.AmMap(h);break;case"stock":f=new d.AmStockChart(h);break;case"gantt":f=new d.AmGanttChart(h)}d.extend(f,b);if(b.listeners)for(var g in b.listeners)e=b.listeners[g],f.addListener(e.event,e.method);d.isReady?isNaN(c)?f.write(a):setTimeout(function(){d.realWrite(f,a)},c):d.ready(function(){isNaN(c)?f.write(a):setTimeout(function(){d.realWrite(f,a)},c)});return f};d.realWrite=function(a,b){a.write(b)};d.updateCount=0;d.validateAt=Math.round(d.updateRate/5);d.update=function(){var a=d.charts;d.updateCount++;var b=!1;d.updateCount==d.validateAt&&(b=!0,d.updateCount=0);if(a)for(var c=0;c<a.length;c++)a[c].update&&a[c].update(),b&&a[c].autoResize&&a[c].validateSize&&a[c].validateSize()};d.bezierX=3;d.bezierY=6})();(function(){var d=window.AmCharts;d.toBoolean=function(a,b){if(void 0===a)return b;switch(String(a).toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(a)}};d.removeFromArray=function(a,b){var c;if(void 0!==b&&void 0!==a)for(c=a.length-1;0<=c;c--)a[c]==b&&a.splice(c,1)};d.getPath=function(){var a=document.getElementsByTagName("script");if(a)for(var b=0;b<a.length;b++){var c=a[b].src;if(-1!==c.search(/\/(amcharts|ammap)\.js/))return c.replace(/\/(amcharts|ammap)\.js.*/,"/")}};d.normalizeUrl=function(a){return""!==a&&-1===a.search(/\/$/)?a+"/":a};d.isAbsolute=function(a){return 0===a.search(/^http[s]?:|^\//)};d.isInArray=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1};d.getDecimals=function(a){var b=0;isNaN(a)||(a=String(a),-1!=a.indexOf("e-")?b=Number(a.split("-")[1]):-1!=a.indexOf(".")&&(b=a.split(".")[1].length));return b};d.wordwrap=function(a,b,c,e){var h,f,g,k;a+="";if(1>b)return a;h=-1;for(a=(k=a.split(/\r\n|\n|\r/)).length;++h<a;k[h]+=g){g=k[h];for(k[h]="";g.length>b;k[h]+=d.trim(g.slice(0,f))+((g=g.slice(f)).length?c:""))f=2==e||(f=g.slice(0,b+1).match(/\S*(\s)?$/))[1]?b:f.input.length-f[0].length||1==e&&b||f.input.length+(f=g.slice(b).match(/^\S*/))[0].length;g=d.trim(g)}return k.join(e)};d.trim=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};d.wrappedText=function(a,b,c,e,h,f,g,k){var l=d.text(a,b,c,e,h,f,g);if(l){var m=l.getBBox();if(m.width>k){var n="\n";d.isModern||(n="<br>");k=Math.floor(k/(m.width/b.length));2<k&&(k-=2);b=d.wordwrap(b,k,n,!0);l.remove();l=d.text(a,b,c,e,h,f,g)}}return l};d.getStyle=function(a,b){var c="";document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.currentStyle&&(b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),c=a.currentStyle[b]);return c};d.removePx=function(a){if(void 0!==a)return Number(a.substring(0,a.length-2))};d.getURL=function(a,b){if(a)if("_self"!=b&&b)if("_top"==b&&window.top)window.top.location.href=a;else if("_parent"==b&&window.parent)window.parent.location.href=a;else if("_blank"==b)window.open(a);else{var c=document.getElementsByName(b)[0];c?c.src=a:(c=d.windows[b])?c.opener&&!c.opener.closed?c.location.href=a:d.windows[b]=window.open(a):d.windows[b]=window.open(a)}else window.location.href=a};d.ifArray=function(a){return a&&"object"==typeof a&&0<a.length?!0:!1};d.callMethod=function(a,b){var c;for(c=0;c<b.length;c++){var e=b[c];if(e){if(e[a])e[a]();var h=e.length;if(0<h){var d;for(d=0;d<h;d++){var g=e[d];if(g&&g[a])g[a]()}}}}};d.toNumber=function(a){return"number"==typeof a?a:Number(String(a).replace(/[^0-9\-.]+/g,""))};d.toColor=function(a){if(""!==a&&void 0!==a)if(-1!=a.indexOf(",")){a=a.split(",");var b;for(b=0;b<a.length;b++){var c=a[b].substring(a[b].length-6,a[b].length);a[b]="#"+c}}else a=a.substring(a.length-6,a.length),a="#"+a;return a};d.toCoordinate=function(a,b,c){var e;void 0!==a&&(a=String(a),c&&c<b&&(b=c),e=Number(a),-1!=a.indexOf("!")&&(e=b-Number(a.substr(1))),-1!=a.indexOf("%")&&(e=b*Number(a.substr(0,a.length-1))/100));return e};d.fitToBounds=function(a,b,c){a<b&&(a=b);a>c&&(a=c);return a};d.isDefined=function(a){return void 0===a?!1:!0};d.stripNumbers=function(a){return a.replace(/[0-9]+/g,"")};d.roundTo=function(a,b){if(0>b)return a;var c=Math.pow(10,b);return Math.round(a*c)/c};d.toFixed=function(a,b){var c=String(Math.round(a*Math.pow(10,b)));if(0<b){var e=c.length;if(e<b){var h;for(h=0;h<b-e;h++)c="0"+c}e=c.substring(0,c.length-b);""===e&&(e=0);return e+"."+c.substring(c.length-b,c.length)}return String(c)};d.formatDuration=function(a,b,c,e,h,f){var g=d.intervals,k=f.decimalSeparator;if(a>=g[b].contains){var l=a-Math.floor(a/g[b].contains)*g[b].contains;"ss"==b?(l=d.formatNumber(l,f),1==l.split(k)[0].length&&(l="0"+l)):l=d.roundTo(l,f.precision);("mm"==b||"hh"==b)&&10>l&&(l="0"+l);c=l+""+e[b]+""+c;a=Math.floor(a/g[b].contains);b=g[b].nextInterval;return d.formatDuration(a,b,c,e,h,f)}"ss"==b&&(a=d.formatNumber(a,f),1==a.split(k)[0].length&&(a="0"+
a));("mm"==b||"hh"==b)&&10>a&&(a="0"+a);c=a+""+e[b]+""+c;if(g[h].count>g[b].count)for(a=g[b].count;a<g[h].count;a++)b=g[b].nextInterval,"ss"==b||"mm"==b||"hh"==b?c="00"+e[b]+""+c:"DD"==b&&(c="0"+e[b]+""+c);":"==c.charAt(c.length-1)&&(c=c.substring(0,c.length-1));return c};d.formatNumber=function(a,b,c,e,h){a=d.roundTo(a,b.precision);isNaN(c)&&(c=b.precision);var f=b.decimalSeparator;b=b.thousandsSeparator;var g;g=0>a?"-":"";a=Math.abs(a);var k=String(a),l=!1;-1!=k.indexOf("e")&&(l=!0);0<=c&&!l&&(k=d.toFixed(a,c));var m="";if(l)m=k;else{var k=k.split("."),l=String(k[0]),n;for(n=l.length;0<=n;n-=3)m=n!=l.length?0!==n?l.substring(n-3,n)+b+m:l.substring(n-3,n)+m:l.substring(n-3,n);void 0!==k[1]&&(m=m+f+k[1]);void 0!==c&&0<c&&"0"!=m&&(m=d.addZeroes(m,f,c))}m=g+m;""===g&&!0===e&&0!==a&&(m="+"+m);!0===h&&(m+="%");return m};d.addZeroes=function(a,b,c){a=a.split(b);void 0===a[1]&&0<c&&(a[1]="0");return a[1].length<c?(a[1]+="0",d.addZeroes(a[0]+b+a[1],b,c)):void 0!==a[1]?a[0]+b+a[1]:a[0]};d.scientificToNormal=function(a){var b;a=String(a).split("e");var c;if("-"==a[1].substr(0,1)){b="0.";for(c=0;c<Math.abs(Number(a[1]))-1;c++)b+="0";b+=a[0].split(".").join("")}else{var e=0;b=a[0].split(".");b[1]&&(e=b[1].length);b=a[0].split(".").join("");for(c=0;c<Math.abs(Number(a[1]))-e;c++)b+="0"}return b};d.toScientific=function(a,b){if(0===a)return"0";var c=Math.floor(Math.log(Math.abs(a))*Math.LOG10E),e=String(e).split(".").join(b);return String(e)+"e"+c};d.randomColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)};d.hitTest=function(a,b,c){var e=!1,h=a.x,f=a.x+a.width,g=a.y,k=a.y+a.height,l=d.isInRectangle;e||(e=l(h,g,b));e||(e=l(h,k,b));e||(e=l(f,g,b));e||(e=l(f,k,b));e||!0===c||(e=d.hitTest(b,a,!0));return e};d.isInRectangle=function(a,b,c){return a>=c.x-5&&a<=c.x+c.width+5&&b>=c.y-5&&b<=c.y+c.height+5?!0:!1};d.isPercents=function(a){if(-1!=String(a).indexOf("%"))return!0};d.findPosX=function(a){var b=a,c=a.offsetLeft;if(a.offsetParent){for(;a=a.offsetParent;)c+=a.offsetLeft;for(;(b=b.parentNode)&&b!=document.body;)c-=b.scrollLeft||0}return c};d.findPosY=function(a){var b=a,c=a.offsetTop;if(a.offsetParent){for(;a=a.offsetParent;)c+=a.offsetTop;for(;(b=b.parentNode)&&b!=document.body;)c-=b.scrollTop||0}return c};d.findIfFixed=function(a){if(a.offsetParent)for(;a=a.offsetParent;)if("fixed"==d.getStyle(a,"position"))return!0;return!1};d.findIfAuto=function(a){return a.style&&"auto"==d.getStyle(a,"overflow")?!0:a.parentNode?d.findIfAuto(a.parentNode):!1};d.findScrollLeft=function(a,b){a.scrollLeft&&(b+=a.scrollLeft);return a.parentNode?d.findScrollLeft(a.parentNode,b):b};d.findScrollTop=function(a,b){a.scrollTop&&(b+=a.scrollTop);return a.parentNode?d.findScrollTop(a.parentNode,b):b};d.formatValue=function(a,b,c,e,h,f,g,k){if(b){void 0===h&&(h="");var l;for(l=0;l<c.length;l++){var m=c[l],n=b[m];void 0!==n&&(n=f?d.addPrefix(n,k,g,e):d.formatNumber(n,e),a=a.replace(new RegExp("\\[\\["+h+""+m+"\\]\\]","g"),n))}}return a};d.formatDataContextValue=function(a,b){if(a){var c=a.match(/\[\[.*?\]\]/g),e;for(e=0;e<c.length;e++){var h=c[e],h=h.substr(2,h.length-4);void 0!==b[h]&&(a=a.replace(new RegExp("\\[\\["+h+"\\]\\]","g"),b[h]))}}return a};d.massReplace=function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var e=b[c];void 0===e&&(e="");a=a.replace(c,e)}return a};d.cleanFromEmpty=function(a){return a.replace(/\[\[[^\]]*\]\]/g,"")};d.addPrefix=function(a,b,c,e,h){var f=d.formatNumber(a,e),g="",k,l,m;if(0===a)return"0";0>a&&(g="-");a=Math.abs(a);if(1<a)for(k=b.length-1;-1<k;k--){if(a>=b[k].number&&(l=a/b[k].number,m=Number(e.precision),1>m&&(m=1),c=d.roundTo(l,m),m=d.formatNumber(c,{precision:-1,decimalSeparator:e.decimalSeparator,thousandsSeparator:e.thousandsSeparator}),!h||l==c)){f=g+""+m+""+b[k].prefix;break}}else for(k=0;k<c.length;k++)if(a<=c[k].number){l=a/c[k].number;m=Math.abs(Math.round(Math.log(l)*Math.LOG10E));l=d.roundTo(l,m);f=g+""+l+""+c[k].prefix;break}return f};d.remove=function(a){a&&a.remove()};d.getEffect=function(a){">"==a&&(a="easeOutSine");"<"==a&&(a="easeInSine");"elastic"==a&&(a="easeOutElastic");return a};d.getObjById=function(a,b){var c,e;for(e=0;e<a.length;e++){var h=a[e];h.id==b&&(c=h)}return c};d.applyTheme=function(a,b,c){b||(b=d.theme);b&&b[c]&&d.extend(a,b[c])};d.isString=function(a){return"string"==typeof a?!0:!1};d.extend=function(a,b,c){var e;a||(a={});for(e in b)c?a.hasOwnProperty(e)||(a[e]=b[e]):a[e]=b[e];return a};d.copyProperties=function(a,b){for(var c in a)a.hasOwnProperty(c)&&"events"!=c&&void 0!==a[c]&&"function"!=typeof a[c]&&"cname"!=c&&(b[c]=a[c])};d.processObject=function(a,b,c,e){if(!1===a instanceof b&&(a=e?d.extend(new b(c),a):d.extend(a,new b(c),!0),a.listeners))for(var h in a.listeners)b=a.listeners[h],a.addListener(b.event,b.method);return a};d.fixNewLines=function(a){var b=RegExp("\\n","g");a&&(a=a.replace(b,"<br />"));return a};d.fixBrakes=function(a){if(d.isModern){var b=RegExp("<br>","g");a&&(a=a.replace(b,"\n"))}else a=d.fixNewLines(a);return a};d.deleteObject=function(a,b){if(a){if(void 0===b||null===b)b=20;if(0!==b)if("[object Array]"===Object.prototype.toString.call(a))for(var c=0;c<a.length;c++)d.deleteObject(a[c],b-1),a[c]=null;else if(a&&!a.tagName)try{for(c in a)a[c]&&("object"==typeof a[c]&&d.deleteObject(a[c],b-1),"function"!=typeof a[c]&&(a[c]=null))}catch(e){}}};d.bounce=function(a,b,c,e,h){return(b/=h)<1/2.75?7.5625*e*b*b+c:b<2/2.75?e*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?e*(7.5625*(b-=2.25/2.75)*b+.9375)+c:e*(7.5625*(b-=2.625/2.75)*b+.984375)+c};d.easeInSine=function(a,b,c,e,h){return-e*Math.cos(b/h*(Math.PI/2))+e+c};d.easeOutSine=function(a,b,c,e,h){return e*Math.sin(b/h*(Math.PI/2))+c};d.easeOutElastic=function(a,b,c,e,h){a=1.70158;var d=0,g=e;if(0===b)return c;if(1==(b/=h))return c+e;d||(d=.3*h);g<Math.abs(e)?(g=e,a=d/4):a=d/(2*Math.PI)*Math.asin(e/g);return g*Math.pow(2,-10*b)*Math.sin(2*(b*h-a)*Math.PI/d)+e+c};d.fixStepE=function(a){a=a.toExponential(0).split("e");var b=Number(a[1]);9==Number(a[0])&&b++;return d.generateNumber(1,b)};d.generateNumber=function(a,b){var c="",e;e=0>b?Math.abs(b)-1:Math.abs(b);var h;for(h=0;h<e;h++)c+="0";return 0>b?Number("0."+c+String(a)):Number(String(a)+c)};d.setCN=function(a,b,c,e){if(a.addClassNames&&b&&(b=b.node)&&c){var h=b.getAttribute("class");a=a.classNamePrefix+"-";e&&(a="");h?b.setAttribute("class",h+" "+a+c):b.setAttribute("class",a+c)}};d.parseDefs=function(a,b){for(var c in a){var e=typeof a[c];if(0<a[c].length&&"object"==e)for(var h=0;h<a[c].length;h++)e=document.createElementNS(d.SVG_NS,c),b.appendChild(e),d.parseDefs(a[c][h],e);else"object"==e?(e=document.createElementNS(d.SVG_NS,c),b.appendChild(e),d.parseDefs(a[c],e)):b.setAttribute(c,a[c])}}})();(function(){var d=window.AmCharts;d.AxisBase=d.Class({construct:function(a){this.createEvents("clickItem","rollOverItem","rollOutItem");this.viY=this.viX=this.titleDY=this.y=this.x=this.dy=this.dx=0;this.axisThickness=1;this.axisColor="#000000";this.axisAlpha=1;this.gridCount=this.tickLength=5;this.gridAlpha=.15;this.gridThickness=1;this.gridColor="#000000";this.dashLength=0;this.labelFrequency=1;this.showLastLabel=this.showFirstLabel=!0;this.fillColor="#FFFFFF";this.fillAlpha=0;this.labelsEnabled=!0;this.labelRotation=0;this.autoGridCount=!0;this.offset=0;this.guides=[];this.visible=!0;this.counter=0;this.guides=[];this.ignoreAxisWidth=this.inside=!1;this.minHorizontalGap=75;this.minVerticalGap=35;this.titleBold=!0;this.minorGridEnabled=!1;this.minorGridAlpha=.07;this.autoWrap=!1;this.titleAlign="middle";this.labelOffset=0;this.bcn="axis-";this.centerLabels=!1;this.periods=[{period:"ss",count:1},{period:"ss",count:5},{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}];this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}];this.nextPeriod={fff:"ss",ss:"mm",mm:"hh",hh:"DD",DD:"MM",MM:"YYYY"};d.applyTheme(this,a,"AxisBase")},zoom:function(a,b){this.start=a;this.end=b;this.dataChanged=!0;this.draw()},fixAxisPosition:function(){var a=this.position;"H"==this.orientation?("left"==a&&(a="bottom"),"right"==a&&(a="top")):("bottom"==a&&(a="left"),"top"==a&&(a="right"));this.position=a},draw:function(){var a=this.chart;this.allLabels=[];this.counter=0;this.destroy();this.fixAxisPosition();this.labels=[];var b=a.container,c=b.set();a.gridSet.push(c);this.set=c;b=b.set();a.axesLabelsSet.push(b);this.labelsSet=b;this.axisLine=new this.axisRenderer(this);this.autoGridCount?("V"==this.orientation?(a=this.height/this.minVerticalGap,3>a&&(a=3)):a=this.width/this.minHorizontalGap,this.gridCountR=Math.max(a,1)):this.gridCountR=this.gridCount;this.axisWidth=this.axisLine.axisWidth;this.addTitle()},setOrientation:function(a){this.orientation=a?"H":"V"},addTitle:function(){var a=this.title;this.titleLabel=null;if(a){var b=this.chart,c=this.titleColor;void 0===c&&(c=b.color);var e=this.titleFontSize;isNaN(e)&&(e=b.fontSize+1);a=d.text(b.container,a,c,b.fontFamily,e,this.titleAlign,this.titleBold);d.setCN(b,a,this.bcn+"title");this.titleLabel=a}},positionTitle:function(){var a=this.titleLabel;if(a){var b,c,e=this.labelsSet,h={};0<e.length()?h=e.getBBox():(h.x=0,h.y=0,h.width=this.viW,h.height=this.viH,d.VML&&(h.y+=this.y,h.x+=this.x));e.push(a);var e=h.x,f=h.y;d.VML&&(this.rotate?e-=this.x:f-=this.y);var g=h.width,h=h.height,k=this.viW,l=this.viH,m=0,n=a.getBBox().height/2,p=this.inside,q=this.titleAlign;switch(this.position){case"top":b="left"==q?-1:"right"==q?k:k/2;c=f-10-n;break;case"bottom":b="left"==q?-1:"right"==q?k:k/2;c=f+h+10+n;break;case"left":b=e-10-n;p&&(b-=5);m=-90;c=("left"==q?l+1:"right"==q?-1:l/2)+this.titleDY;break;case"right":b=e+g+10+n,p&&(b+=7),c=("left"==q?l+2:"right"==q?-2:l/2)+this.titleDY,m=-90}this.marginsChanged?(a.translate(b,c),this.tx=b,this.ty=c):a.translate(this.tx,this.ty);this.marginsChanged=!1;isNaN(this.titleRotation)||(m=this.titleRotation);0!==m&&a.rotate(m)}},pushAxisItem:function(a,b){var c=this,e=a.graphics();0<e.length()&&(b?c.labelsSet.push(e):c.set.push(e));if(e=a.getLabel())this.labelsSet.push(e),e.click(function(b){c.handleMouse(b,a,"clickItem")}).mouseover(function(b){c.handleMouse(b,a,"rollOverItem")}).mouseout(function(b){c.handleMouse(b,a,"rollOutItem")})},handleMouse:function(a,b,c){this.fire(c,{type:c,value:b.value,serialDataItem:b.serialDataItem,axis:this,target:b.label,chart:this.chart,event:a})},addGuide:function(a){for(var b=this.guides,c=!1,e=b.length,h=0;h<b.length;h++)b[h]==a&&(c=!0,e=h);a=d.processObject(a,d.Guide,this.theme);a.id||(a.id="guideAuto"+e+"_"+(new Date).getTime());c||b.push(a)},removeGuide:function(a){var b=this.guides,c;for(c=0;c<b.length;c++)b[c]==a&&b.splice(c,1)},handleGuideOver:function(a){clearTimeout(this.chart.hoverInt);var b=a.graphics.getBBox(),c=b.x+b.width/2,b=b.y+b.height/2,e=a.fillColor;void 0===e&&(e=a.lineColor);this.chart.showBalloon(a.balloonText,e,!0,c,b)},handleGuideOut:function(){this.chart.hideBalloon()},addEventListeners:function(a,b){var c=this;a.mouseover(function(){c.handleGuideOver(b)});a.touchstart(function(){c.handleGuideOver(b)});a.mouseout(function(){c.handleGuideOut(b)})},getBBox:function(){var a=this.labelsSet.getBBox();d.VML||(a={x:a.x+this.x,y:a.y+this.y,width:a.width,height:a.height});return a},destroy:function(){d.remove(this.set);d.remove(this.labelsSet);var a=this.axisLine;a&&d.remove(a.set);d.remove(this.grid0)},chooseMinorFrequency:function(a){for(var b=10;0<b;b--)if(a/b==Math.round(a/b))return a/b},parseDatesDraw:function(){var a,b=this.chart,c=this.showFirstLabel,e=this.showLastLabel,h,f="",g=d.extractPeriod(this.minPeriod),k=d.getPeriodDuration(g.period,g.count),l,m,n,p,q,r=this.firstDayOfWeek,u=this.boldPeriodBeginning;a=this.minorGridEnabled;var t,z=this.gridAlpha,y,v=this.choosePeriod(0),w=v.period,v=v.count,A=d.getPeriodDuration(w,v);A<k&&(w=g.period,v=g.count,A=k);g=w;"WW"==g&&(g="DD");this.stepWidth=this.getStepWidth(this.timeDifference);var B=Math.ceil(this.timeDifference/A)+5,C=l=d.resetDateToMin(new Date(this.startTime-A),w,v,r).getTime();if(g==w&&1==v&&this.centerLabelOnFullPeriod||this.autoWrap||this.centerLabels)n=A*this.stepWidth,this.autoWrap&&!this.centerLabels&&(n=-n);this.cellWidth=k*this.stepWidth;p=Math.round(l/A);k=-1;p/2==Math.round(p/2)&&(k=-2,l-=A);p=this.firstTime;var D=0,J=0;a&&1<v&&(t=this.chooseMinorFrequency(v),y=d.getPeriodDuration(w,t));if(0<this.gridCountR)for(B-5-k>this.autoRotateCount&&!isNaN(this.autoRotateAngle)&&(this.labelRotationR=this.autoRotateAngle),a=k;a<=B;a++){q=p+A*(a+Math.floor((C-p)/A))-D;"DD"==w&&(q+=36E5);q=d.resetDateToMin(new Date(q),w,v,r).getTime();"MM"==w&&(h=(q-l)/A,1.5<=(q-l)/A&&(q=q-(h-1)*A+d.getPeriodDuration("DD",3),q=d.resetDateToMin(new Date(q),w,1).getTime(),D+=A));h=(q-this.startTime)*this.stepWidth;if("radar"==b.type){if(0>h||h>this.axisWidth)continue;h=this.y+(this.axisWidth-h)}else this.rotate?(h+=this.x-this.viX,"date"==this.type&&"middle"==this.gridPosition&&(J=-A*this.stepWidth/2)):h="date"==this.type?this.axisWidth-h+(this.y-this.viY):h+(this.y-this.viY);f=!1;this.nextPeriod[g]&&(f=this.checkPeriodChange(this.nextPeriod[g],1,q,l,g));l=!1;f&&this.markPeriodChange?(f=this.dateFormatsObject[this.nextPeriod[g]],this.twoLineMode&&(f=this.dateFormatsObject[g]+"\n"+f,f=d.fixBrakes(f)),l=!0):f=this.dateFormatsObject[g];u||(l=!1);this.currentDateFormat=f;f=d.formatDate(new Date(q),f,b);if(a==k&&!c||a==B&&!e)f=" ";this.labelFunction&&(f=this.labelFunction(f,new Date(q),this,w,v,m).toString());this.boldLabels&&(l=!0);m=new this.axisItemRenderer(this,h,f,!1,n,J,!1,l);this.pushAxisItem(m);m=l=q;if(!isNaN(t))for(h=1;h<v;h+=t)this.gridAlpha=this.minorGridAlpha,f=q+y*h,f=d.resetDateToMin(new Date(f),w,t,r).getTime(),f=new this.axisItemRenderer(this,(f-this.startTime)*this.stepWidth,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0),this.pushAxisItem(f);this.gridAlpha=z}},choosePeriod:function(a){var b=d.getPeriodDuration(this.periods[a].period,this.periods[a].count),c=Math.ceil(this.timeDifference/b),e=this.periods;return this.timeDifference<b&&0<a?e[a-1]:c<=this.gridCountR?e[a]:a+1<e.length?this.choosePeriod(a+1):e[a]},getStepWidth:function(a){var b;this.startOnAxis?(b=this.axisWidth/(a-1),1==a&&(b=this.axisWidth)):b=this.axisWidth/a;return b},timeZoom:function(a,b){this.startTime=a;this.endTime=b},minDuration:function(){var a=d.extractPeriod(this.minPeriod);return d.getPeriodDuration(a.period,a.count)},checkPeriodChange:function(a,b,c,e,h){c=new Date(c);var f=new Date(e),g=this.firstDayOfWeek;e=b;"DD"==a&&(b=1);c=d.resetDateToMin(c,a,b,g).getTime();b=d.resetDateToMin(f,a,b,g).getTime();return"DD"==a&&"hh"!=h&&c-b<d.getPeriodDuration(a,e)?!1:c!=b?!0:!1},generateDFObject:function(){this.dateFormatsObject={};var a;for(a=0;a<this.dateFormats.length;a++){var b=this.dateFormats[a];this.dateFormatsObject[b.period]=b.format}}})})();(function(){var d=window.AmCharts;d.ValueAxis=d.Class({inherits:d.AxisBase,construct:function(a){this.cname="ValueAxis";this.createEvents("axisChanged","logarithmicAxisFailed","axisSelfZoomed","axisZoomed");d.ValueAxis.base.construct.call(this,a);this.dataChanged=!0;this.stackType="none";this.position="left";this.unitPosition="right";this.includeAllValues=this.recalculateToPercents=this.includeHidden=this.includeGuidesInMinMax=this.integersOnly=!1;this.durationUnits={DD:"d. ",hh:":",mm:":",ss:""};this.scrollbar=!1;this.baseValue=0;this.radarCategoriesEnabled=!0;this.gridType="polygons";this.useScientificNotation=!1;this.axisTitleOffset=10;this.pointPosition="axis";this.minMaxMultiplier=1;this.logGridLimit=2;this.totalTextOffset=this.treatZeroAs=0;this.minPeriod="ss";d.applyTheme(this,a,this.cname)},updateData:function(){0>=this.gridCountR&&(this.gridCountR=1);this.totals=[];this.data=this.chart.chartData;var a=this.chart;"xy"!=a.type&&(this.stackGraphs("smoothedLine"),this.stackGraphs("line"),this.stackGraphs("column"),this.stackGraphs("step"));this.recalculateToPercents&&this.recalculate();this.synchronizationMultiplier&&this.synchronizeWith?(d.isString(this.synchronizeWith)&&(this.synchronizeWith=a.getValueAxisById(this.synchronizeWith)),this.synchronizeWith&&(this.synchronizeWithAxis(this.synchronizeWith),this.foundGraphs=!0)):(this.foundGraphs=!1,this.getMinMax())},draw:function(){d.ValueAxis.base.draw.call(this);var a=this.chart,b=this.set;this.labelRotationR=this.labelRotation;d.setCN(a,this.set,"value-axis value-axis-"+this.id);d.setCN(a,this.labelsSet,"value-axis value-axis-"+this.id);d.setCN(a,this.axisLine.axisSet,"value-axis value-axis-"+this.id);var c=this.type;"duration"==c&&(this.duration="ss");!0===this.dataChanged&&(this.updateData(),this.dataChanged=!1);"date"==c&&(this.logarithmic=!1,this.min=this.minRR,this.max=this.maxRR,this.getDateMinMax());if(this.logarithmic){var e=this.treatZeroAs,h=this.getMin(0,this.data.length-1);this.minReal<h&&(this.minReal=h);isNaN(this.minReal)&&(this.minReal=h);0<e&&0===h&&(this.minReal=h=e);if(0>=h||0>=this.minimum){this.fire("logarithmicAxisFailed",{type:"logarithmicAxisFailed",chart:a});return}}this.grid0=null;var f,g,k=a.dx,l=a.dy,e=!1,h=this.logarithmic;if(isNaN(this.min)||isNaN(this.max)||!this.foundGraphs||Infinity==this.min||-Infinity==this.max)e=!0;else{var m=this.labelFrequency,n=this.showFirstLabel,p=this.showLastLabel,q=1;f=0;this.minCalc=this.min;this.maxCalc=this.max;this.strictMinMax&&(isNaN(this.minimum)||(this.min=this.minimum),isNaN(this.maximum)||(this.max=this.maximum));isNaN(this.minZoom)||(this.min=this.minZoom);isNaN(this.maxZoom)||(this.max=this.maxZoom);var r=Math.round((this.maxCalc-this.minCalc)/this.step)+1,u;!0===h?(u=Math.log(this.max)*Math.LOG10E-Math.log(this.minReal)*Math.LOG10E,this.stepWidth=this.axisWidth/u,u>this.logGridLimit&&(r=Math.ceil(Math.log(this.max)*Math.LOG10E)+1,f=Math.round(Math.log(this.minReal)*Math.LOG10E),r>this.gridCountR&&(q=Math.ceil(r/this.gridCountR)))):this.stepWidth=this.axisWidth/(this.max-this.min);var t=0;1>this.step&&-1<this.step&&(t=d.getDecimals(this.step));this.integersOnly&&(t=0);t>this.maxDecCount&&(t=this.maxDecCount);var z=this.precision;isNaN(z)||(t=z);this.max=d.roundTo(this.max,this.maxDecCount);this.min=d.roundTo(this.min,this.maxDecCount);g={};g.precision=t;g.decimalSeparator=a.nf.decimalSeparator;g.thousandsSeparator=a.nf.thousandsSeparator;this.numberFormatter=g;var y,v=this.guides,w=v.length;if(0<w){var A=this.fillAlpha;for(g=this.fillAlpha=0;g<w;g++){var B=v[g],C=NaN,D=B.above;isNaN(B.toValue)||(C=this.getCoordinate(B.toValue),y=new this.axisItemRenderer(this,C,"",!0,NaN,NaN,B),this.pushAxisItem(y,D));var J=NaN;isNaN(B.value)||(J=this.getCoordinate(B.value),y=new this.axisItemRenderer(this,J,B.label,!0,NaN,(C-J)/2,B),this.pushAxisItem(y,D));isNaN(C-J)||(y=new this.guideFillRenderer(this,J,C,B),this.pushAxisItem(y,D),y=y.graphics(),B.graphics=y,B.balloonText&&this.addEventListeners(y,B))}this.fillAlpha=A}this.exponential=!1;for(g=f;g<r;g+=q)v=d.roundTo(this.step*g+this.min,t),-1!=String(v).indexOf("e")&&(this.exponential=!0);this.duration&&(this.maxInterval=d.getMaxInterval(this.max,this.duration));var t=this.step,E,v=this.minorGridAlpha;this.minorGridEnabled&&(E=this.getMinorGridStep(t,this.stepWidth*t));if("date"==c)this.generateDFObject(),this.timeDifference=this.max-this.min,this.maxTime=this.lastTime=this.max,this.startTime=this.firstTime=this.min,this.parseDatesDraw();else for(r>=this.autoRotateCount&&!isNaN(this.autoRotateAngle)&&(this.labelRotationR=this.autoRotateAngle),g=f;g<r;g+=q)if(c=t*g+this.minCalc,h&&this.max-this.min>10*this.min&&(c-=this.min),c=d.roundTo(c,this.maxDecCount+1),!this.integersOnly||Math.round(c)==c)if(isNaN(z)||Number(d.toFixed(c,z))==c){!0===h&&(0===c&&(c=this.minReal),u>this.logGridLimit&&(c=Math.pow(10,g)));y=this.formatValue(c,!1,g);Math.round(g/m)!=g/m&&(y=void 0);if(0===g&&!n||g==r-1&&!p)y=" ";f=this.getCoordinate(c);var O;this.rotate&&this.autoWrap&&(O=this.stepWidth*t-10);y=new this.axisItemRenderer(this,f,y,void 0,O,void 0,void 0,this.boldLabels);this.pushAxisItem(y);if(c==this.baseValue&&"radar"!=a.type){var I,W,A=this.viW,B=this.viH;y=this.viX;w=this.viY;"H"==this.orientation?0<=f&&f<=A+1&&(I=[f,f,f+k],W=[B,0,l]):0<=f&&f<=B+1&&(I=[0,A,A+k],W=[f,f,f+l]);I&&(f=d.fitToBounds(2*this.gridAlpha,0,1),f=d.line(a.container,I,W,this.gridColor,f,1,this.dashLength),f.translate(y,w),this.grid0=f,a.axesSet.push(f),f.toBack(),d.setCN(a,f,this.bcn+"zero-grid-"+this.id),d.setCN(a,f,this.bcn+"zero-grid"))}if(!isNaN(E)&&0<v&&g<r-1){f=this.gridAlpha;this.gridAlpha=this.minorGridAlpha;for(y=1;y<t/E;y++)w=this.getCoordinate(c+E*y),w=new this.axisItemRenderer(this,w,"",!1,0,0,!1,!1,0,!0),this.pushAxisItem(w);this.gridAlpha=f}}u=this.baseValue;this.min>this.baseValue&&this.max>this.baseValue&&(u=this.min);this.min<this.baseValue&&this.max<this.baseValue&&(u=this.max);h&&u<this.minReal&&(u=this.minReal);this.baseCoord=this.getCoordinate(u);u={type:"axisChanged",target:this,chart:a};u.min=h?this.minReal:this.min;u.max=this.max;this.fire("axisChanged",u);this.axisCreated=!0}h=this.axisLine.set;u=this.labelsSet;this.positionTitle();"radar"!=a.type?(a=this.viX,E=this.viY,b.translate(a,E),u.translate(a,E)):h.toFront();!this.visible||e?(b.hide(),h.hide(),u.hide()):(b.show(),h.show(),u.show());this.axisY=this.y-this.viY;this.axisX=this.x-this.viX},getDateMinMax:function(){this.minimumDate&&(this.minimumDate instanceof Date||(this.minimumDate=d.getDate(this.minimumDate,this.chart.dataDateFormat,"fff")),this.min=this.minimumDate.getTime());this.maximumDate&&(this.maximumDate instanceof Date||(this.maximumDate=d.getDate(this.maximumDate,this.chart.dataDateFormat,"fff")),this.max=this.maximumDate.getTime())},formatValue:function(a,b,c){var e=this.exponential,h=this.logarithmic,f=this.numberFormatter,g=this.chart;!0===this.logarithmic&&(e=-1!=String(a).indexOf("e")?!0:!1);this.useScientificNotation&&(e=!0);this.usePrefixes&&(e=!1);e?(c=-1==String(a).indexOf("e")?a.toExponential(15):String(a),e=c.split("e"),c=Number(e[0]),e=Number(e[1]),c=d.roundTo(c,14),10==c&&(c=1,e+=1),c=c+"e"+e,0===a&&(c="0"),1==a&&(c="1")):(h&&(e=String(a).split("."),e[1]?(f.precision=e[1].length,0>c&&(f.precision=Math.abs(c)),b&&1<a&&(f.precision=0)):f.precision=-1),c=this.usePrefixes?d.addPrefix(a,g.prefixesOfBigNumbers,g.prefixesOfSmallNumbers,f,!b):d.formatNumber(a,f,f.precision));this.duration&&(b&&(f.precision=0),c=d.formatDuration(a,this.duration,"",this.durationUnits,this.maxInterval,f));"date"==this.type&&(c=d.formatDate(new Date(a),this.currentDateFormat,g));this.recalculateToPercents?c+="%":(b=this.unit)&&(c="left"==this.unitPosition?b+c:c+b);this.labelFunction&&(c=this.labelFunction(a,c,this).toString());return c},getMinorGridStep:function(a,b){var c=[5,4,2];60>b&&c.shift();for(var e=Math.floor(Math.log(Math.abs(a))*Math.LOG10E),h=0;h<c.length;h++){var d=a/c[h],g=Math.floor(Math.log(Math.abs(d))*Math.LOG10E);if(!(1<Math.abs(e-g)))if(1>a){if(g=Math.pow(10,-g)*d,g==Math.round(g))return d}else if(d==Math.round(d))return d}},stackGraphs:function(a){var b=this.stackType;"stacked"==b&&(b="regular");"line"==b&&(b="none");"100% stacked"==b&&(b="100%");this.stackType=b;var c=[],e=[],h=[],f=[],g,k=this.chart.graphs,l,m,n,p,q=this.baseValue,r=!1;if("line"==a||"step"==a||"smoothedLine"==a)r=!0;if(r&&("regular"==b||"100%"==b))for(p=0;p<k.length;p++)n=k[p],n.hidden||(m=n.type,n.chart==this.chart&&n.valueAxis==this&&a==m&&n.stackable&&(l&&(n.stackGraph=l),l=n));for(l=this.start;l<=this.end;l++){var u=0;for(p=0;p<k.length;p++)if(n=k[p],n.hidden)n.newStack&&(h[l]=NaN,e[l]=NaN);else if(m=n.type,n.chart==this.chart&&n.valueAxis==this&&a==m&&n.stackable)if(m=this.data[l].axes[this.id].graphs[n.id],g=m.values.value,isNaN(g))n.newStack&&(h[l]=NaN,e[l]=NaN);else{var t=d.getDecimals(g);u<t&&(u=t);isNaN(f[l])?f[l]=Math.abs(g):f[l]+=Math.abs(g);f[l]=d.roundTo(f[l],u);t=n.fillToGraph;r&&t&&(t=this.data[l].axes[this.id].graphs[t.id])&&(m.values.open=t.values.value);"regular"==b&&(r&&(isNaN(c[l])?(c[l]=g,m.values.close=g,m.values.open=this.baseValue):(isNaN(g)?m.values.close=c[l]:m.values.close=g+c[l],m.values.open=c[l],c[l]=m.values.close)),"column"==a&&(n.newStack&&(h[l]=NaN,e[l]=NaN),m.values.close=g,0>g?(m.values.close=g,isNaN(e[l])?m.values.open=q:(m.values.close+=e[l],m.values.open=e[l]),e[l]=m.values.close):(m.values.close=g,isNaN(h[l])?m.values.open=q:(m.values.close+=h[l],m.values.open=h[l]),h[l]=m.values.close)))}}for(l=this.start;l<=this.end;l++)for(p=0;p<k.length;p++)(n=k[p],n.hidden)?n.newStack&&(h[l]=NaN,e[l]=NaN):(m=n.type,n.chart==this.chart&&n.valueAxis==this&&a==m&&n.stackable&&(m=this.data[l].axes[this.id].graphs[n.id],g=m.values.value,isNaN(g)||(c=g/f[l]*100,m.values.percents=c,m.values.total=f[l],n.newStack&&(h[l]=NaN,e[l]=NaN),"100%"==b&&(isNaN(e[l])&&(e[l]=0),isNaN(h[l])&&(h[l]=0),0>c?(m.values.close=d.fitToBounds(c+e[l],-100,100),m.values.open=e[l],e[l]=m.values.close):(m.values.close=d.fitToBounds(c+h[l],-100,100),m.values.open=h[l],h[l]=m.values.close)))))},recalculate:function(){var a=this.chart,b=a.graphs,c;for(c=0;c<b.length;c++){var e=b[c];if(e.valueAxis==this){var h="value";if("candlestick"==e.type||"ohlc"==e.type)h="open";var f,g,k=this.end+2,k=d.fitToBounds(this.end+1,0,this.data.length-1),l=this.start;0<l&&l--;var m;g=this.start;e.compareFromStart&&(g=0);if(!isNaN(a.startTime)&&(m=a.categoryAxis)){var n=m.minDuration(),n=new Date(a.startTime+n/2),p=d.resetDateToMin(new Date(a.startTime),m.minPeriod).getTime();d.resetDateToMin(new Date(n),m.minPeriod).getTime()>p&&g++}if(m=a.recalculateFromDate)m=d.getDate(m,a.dataDateFormat,"fff"),g=a.getClosestIndex(a.chartData,"time",m.getTime(),!0,0,a.chartData.length),k=a.chartData.length-1;for(m=g;m<=k&&(g=this.data[m].axes[this.id].graphs[e.id],f=g.values[h],isNaN(f));m++);this.recBaseValue=f;for(h=l;h<=k;h++){g=this.data[h].axes[this.id].graphs[e.id];g.percents={};var l=g.values,q;for(q in l)g.percents[q]="percents"!=q?l[q]/f*100-100:l[q]}}}},getMinMax:function(){var a=!1,b=this.chart,c=b.graphs,e;for(e=0;e<c.length;e++){var h=c[e].type;("line"==h||"step"==h||"smoothedLine"==h)&&this.expandMinMax&&(a=!0)}a&&(0<this.start&&this.start--,this.end<this.data.length-1&&this.end++);"serial"==b.type&&(!0!==b.categoryAxis.parseDates||a||this.end<this.data.length-1&&this.end++);this.includeAllValues&&(this.start=0,this.end=this.data.length-1);a=this.minMaxMultiplier;this.min=this.getMin(this.start,this.end);this.max=this.getMax();this.minRR=this.min;this.maxRR=this.max;a=(this.max-this.min)*(a-1);this.min-=a;this.max+=a;a=this.guides.length;if(this.includeGuidesInMinMax&&0<a)for(b=0;b<a;b++)c=this.guides[b],c.toValue<this.min&&(this.min=c.toValue),c.value<this.min&&(this.min=c.value),c.toValue>this.max&&(this.max=c.toValue),c.value>this.max&&(this.max=c.value);isNaN(this.minimum)||(this.min=this.minimum);isNaN(this.maximum)||(this.max=this.maximum);"date"==this.type&&this.getDateMinMax();this.min>this.max&&(a=this.max,this.max=this.min,this.min=a);isNaN(this.minTemp)||(this.min=this.minTemp);isNaN(this.maxTemp)||(this.max=this.maxTemp);this.minReal=this.min;this.maxReal=this.max;0===this.min&&0===this.max&&(this.max=9);this.min>this.max&&(this.min=this.max-1);a=this.min;b=this.max;c=this.max-this.min;e=0===c?Math.pow(10,Math.floor(Math.log(Math.abs(this.max))*Math.LOG10E))/10:Math.pow(10,Math.floor(Math.log(Math.abs(c))*Math.LOG10E))/10;isNaN(this.maximum)&&isNaN(this.maxTemp)&&(this.max=Math.ceil(this.max/e)*e+e);isNaN(this.minimum)&&isNaN(this.minTemp)&&(this.min=Math.floor(this.min/e)*e-e);0>this.min&&0<=a&&(this.min=0);0<this.max&&0>=b&&(this.max=0);"100%"==this.stackType&&(this.min=0>this.min?-100:0,this.max=0>this.max?0:100);c=this.max-this.min;e=Math.pow(10,Math.floor(Math.log(Math.abs(c))*Math.LOG10E))/10;this.step=Math.ceil(c/this.gridCountR/e)*e;c=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E));c=d.fixStepE(c);e=Math.ceil(this.step/c);5<e&&(e=10);5>=e&&2<e&&(e=5);this.step=Math.ceil(this.step/(c*e))*c*e;1>c?(this.maxDecCount=Math.abs(Math.log(Math.abs(c))*Math.LOG10E),this.maxDecCount=Math.round(this.maxDecCount),this.step=d.roundTo(this.step,this.maxDecCount+1)):this.maxDecCount=0;this.min=this.step*Math.floor(this.min/this.step);this.max=this.step*Math.ceil(this.max/this.step);0>this.min&&0<=a&&(this.min=0);0<this.max&&0>=b&&(this.max=0);1<this.minReal&&1<this.max-this.minReal&&(this.minReal=Math.floor(this.minReal));c=Math.pow(10,Math.floor(Math.log(Math.abs(this.minReal))*Math.LOG10E));0===this.min&&(this.minReal=c);0===this.min&&1<this.minReal&&(this.minReal=1);0<this.min&&0<this.minReal-this.step&&(this.minReal=this.min+this.step<this.minReal?this.min+this.step:this.min);this.logarithmic&&(2<Math.log(b)*Math.LOG10E-Math.log(a)*Math.LOG10E?(this.minReal=this.min=Math.pow(10,Math.floor(Math.log(Math.abs(a))*Math.LOG10E)),this.max=Math.pow(10,Math.ceil(Math.log(Math.abs(b))*Math.LOG10E))):(b=Math.pow(10,Math.floor(Math.log(Math.abs(this.min))*Math.LOG10E))/10,a=Math.pow(10,Math.floor(Math.log(Math.abs(a))*Math.LOG10E))/10,b<a&&(this.minReal=this.min=10*a)))},getMin:function(a,b){var c,e;for(e=a;e<=b;e++){var d=this.data[e].axes[this.id].graphs,f;for(f in d)if(d.hasOwnProperty(f)){var g=this.chart.getGraphById(f);if(g.includeInMinMax&&(!g.hidden||this.includeHidden)){isNaN(c)&&(c=Infinity);this.foundGraphs=!0;g=d[f].values;this.recalculateToPercents&&(g=d[f].percents);var k;if(this.minMaxField)k=g[this.minMaxField],k<c&&(c=k);else for(var l in g)g.hasOwnProperty(l)&&"percents"!=l&&"total"!=l&&(k=g[l],k<c&&(c=k))}}}return c},getMax:function(){var a,b;for(b=this.start;b<=this.end;b++){var c=this.data[b].axes[this.id].graphs,e;for(e in c)if(c.hasOwnProperty(e)){var d=this.chart.getGraphById(e);if(d.includeInMinMax&&(!d.hidden||this.includeHidden)){isNaN(a)&&(a=-Infinity);this.foundGraphs=!0;d=c[e].values;this.recalculateToPercents&&(d=c[e].percents);var f;if(this.minMaxField)f=d[this.minMaxField],f>a&&(a=f);else for(var g in d)d.hasOwnProperty(g)&&"percents"!=g&&"total"!=g&&(f=d[g],f>a&&(a=f))}}}return a},dispatchZoomEvent:function(a,b){var c={type:"axisZoomed",startValue:a,endValue:b,target:this,chart:this.chart};this.fire(c.type,c)},zoomOut:function(){var a=this.chart;"xy"!=a.type&&(this.maxZoom=this.minZoom=void 0,a.updateAfterValueZoom())},zoomToValues:function(a,b){var c=this.chart;"xy"==c.type?(b<a&&(c=b,b=a,a=c),a<this.min&&(a=this.min),b>this.max&&(b=this.max),c={type:"axisSelfZoomed"},c.chart=this.chart,c.valueAxis=this,c.multiplier=this.axisWidth/Math.abs(this.getCoordinate(b)-this.getCoordinate(a)),c.startValue=a,c.endValue=b,c.position="V"==this.orientation?this.reversed?this.getCoordinate(a):this.getCoordinate(b):this.reversed?this.getCoordinate(b):this.getCoordinate(a),this.fire(c.type,c)):(this.minZoom=a,this.maxZoom=b,c.updateAfterValueZoom())},coordinateToValue:function(a){if(isNaN(a))return NaN;var b=this.axisWidth,c=this.stepWidth,e=this.reversed,d=this.rotate,f=this.min,g=this.minReal;return!0===this.logarithmic?Math.pow(10,(d?!0===e?(b-a)/c:a/c:!0===e?a/c:(b-a)/c)+Math.log(g)*Math.LOG10E):!0===e?d?f-(a-b)/c:a/c+f:d?a/c+f:f-(a-b)/c},getCoordinate:function(a){if(isNaN(a))return NaN;var b=this.rotate,c=this.reversed,e=this.axisWidth,d=this.stepWidth,f=this.min,g=this.minReal;!0===this.logarithmic?(0===a&&(a=this.treatZeroAs),a=Math.log(a)*Math.LOG10E-Math.log(g)*Math.LOG10E,b=b?!0===c?e-d*a:d*a:!0===c?d*a:e-d*a):b=!0===c?b?e-d*(a-f):d*(a-f):b?d*(a-f):e-d*(a-f);b=this.rotate?b+(this.x-this.viX):b+(this.y-this.viY);1E7<Math.abs(b)&&(b=1E7*(b/Math.abs(b)));return Math.round(b)},synchronizeWithAxis:function(a){this.synchronizeWith=a;this.listenTo(this.synchronizeWith,"axisChanged",this.handleSynchronization)},handleSynchronization:function(){if(this.synchronizeWith){d.isString(this.synchronizeWith)&&(this.synchronizeWith=this.chart.getValueAxisById(this.synchronizeWith));var a=this.synchronizeWith,b=a.min,c=a.max,a=a.step,e=this.synchronizationMultiplier;e&&(this.min=b*e,this.max=c*e,this.step=a*e,b=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),b=Math.abs(Math.log(Math.abs(b))*Math.LOG10E),this.maxDecCount=b=Math.round(b),this.draw())}}})})();(function(){var d=window.AmCharts;d.RecAxis=d.Class({construct:function(a){var b=a.chart,c=a.axisThickness,e=a.axisColor,h=a.axisAlpha,f=a.offset,g=a.dx,k=a.dy,l=a.viX,m=a.viY,n=a.viH,p=a.viW,q=b.container;"H"==a.orientation?(e=d.line(q,[0,p],[0,0],e,h,c),this.axisWidth=a.width,"bottom"==a.position?(k=c/2+f+n+m-1,c=l):(k=-c/2-f+m+k,c=g+l)):(this.axisWidth=a.height,"right"==a.position?(e=d.line(q,[0,0,-g],[0,n,n-k],e,h,c),k=m+k,c=c/2+f+g+p+l-1):(e=d.line(q,[0,0],[0,n],e,h,c),k=m,c=-c/2-f+l));e.translate(c,k);c=b.container.set();c.push(e);b.axesSet.push(c);d.setCN(b,e,a.bcn+"line");this.axisSet=c;this.set=e}})})();(function(){var d=window.AmCharts;d.RecItem=d.Class({construct:function(a,b,c,e,h,f,g,k,l,m,n,p){b=Math.round(b);var q=a.chart;this.value=c;void 0==c&&(c="");l||(l=0);void 0==e&&(e=!0);var r=q.fontFamily,u=a.fontSize;void 0==u&&(u=q.fontSize);var t=a.color;void 0==t&&(t=q.color);void 0!==n&&(t=n);var z=a.chart.container,y=z.set();this.set=y;var v=a.axisThickness,w=a.axisColor,A=a.axisAlpha,B=a.tickLength,C=a.gridAlpha,D=a.gridThickness,J=a.gridColor,E=a.dashLength,O=a.fillColor,I=a.fillAlpha,W=a.labelsEnabled;n=a.labelRotationR;var ea=a.counter,P=a.inside,oa=a.labelOffset,qa=a.dx,ka=a.dy,Qa=a.orientation,ca=a.position,aa=a.previousCoord,V=a.viH,sa=a.viW,ba=a.offset,da,ta;g?(void 0!==g.id&&(p=q.classNamePrefix+"-guide-"+g.id),W=!0,isNaN(g.tickLength)||(B=g.tickLength),void 0!=g.lineColor&&(J=g.lineColor),void 0!=g.color&&(t=g.color),isNaN(g.lineAlpha)||(C=g.lineAlpha),isNaN(g.dashLength)||(E=g.dashLength),isNaN(g.lineThickness)||(D=g.lineThickness),!0===g.inside&&(P=!0,0<ba&&(ba=0)),isNaN(g.labelRotation)||(n=g.labelRotation),isNaN(g.fontSize)||(u=g.fontSize),g.position&&(ca=g.position),void 0!==g.boldLabel&&(k=g.boldLabel),isNaN(g.labelOffset)||(oa=g.labelOffset)):""===c&&(B=0);m&&!isNaN(a.minorTickLength)&&(B=a.minorTickLength);var fa="start";0<h&&(fa="middle");a.centerLabels&&(fa="middle");var R=n*Math.PI/180,X,wa,H=0,x=0,la=0,ga=X=0,Ja=0;"V"==Qa&&(n=0);var Z;W&&""!==c&&(Z=a.autoWrap&&0===n?d.wrappedText(z,c,t,r,u,fa,k,Math.abs(h),0):d.text(z,c,t,r,u,fa,k),fa=Z.getBBox(),ga=fa.width,Ja=fa.height);if("H"==Qa){if(0<=b&&b<=sa+1&&(0<B&&0<A&&b+l<=sa+1&&(da=d.line(z,[b+l,b+l],[0,B],w,A,D),y.push(da)),0<C&&(ta=d.line(z,[b,b+qa,b+qa],[V,V+ka,ka],J,C,D,E),y.push(ta))),x=0,H=b,g&&90==n&&P&&(H-=u),!1===e?(fa="start",x="bottom"==ca?P?x+B:x-B:P?x-B:x+B,H+=3,0<h&&(H+=h/2-3,fa="middle"),0<n&&(fa="middle")):fa="middle",1==ea&&0<I&&!g&&!m&&aa<sa&&(e=d.fitToBounds(b,0,sa),aa=d.fitToBounds(aa,0,sa),X=e-aa,0<X&&(wa=d.rect(z,X,a.height,O,I),wa.translate(e-X+qa,ka),y.push(wa))),"bottom"==ca?(x+=V+u/2+ba,P?(0<n?(x=V-ga/2*Math.sin(R)-B-3,H+=ga/2*Math.cos(R)-4+2):0>n?(x=V+ga*Math.sin(R)-B-3+2,H+=-ga*Math.cos(R)-Ja*Math.sin(R)-4):x-=B+u+3+3,x-=oa):(0<n?(x=V+ga/2*Math.sin(R)+B+3,H-=ga/2*Math.cos(R)):0>n?(x=V+B+3-ga/2*Math.sin(R)+2,H+=ga/2*Math.cos(R)):x+=B+v+3+3,x+=oa)):(x+=ka+u/2-ba,H+=qa,P?(0<n?(x=ga/2*Math.sin(R)+B+3,H-=ga/2*Math.cos(R)):x+=B+3,x+=oa):(0<n?(x=-(ga/2)*Math.sin(R)-B-6,H+=ga/2*Math.cos(R)):x-=B+u+3+v+3,x-=oa)),"bottom"==ca?X=(P?V-B-1:V+v-1)+ba:(la=qa,X=(P?ka:ka-B-v+1)-ba),f&&(H+=f),f=H,0<n&&(f+=ga/2*Math.cos(R)),Z&&(u=0,P&&(u=ga/2*Math.cos(R)),f+u>sa+2||0>f))Z.remove(),Z=null}else{0<=b&&b<=V+1&&(0<B&&0<A&&b+l<=V+1&&(da=d.line(z,[0,B],[b+l,b+l],w,A,D),y.push(da)),0<C&&(ta=d.line(z,[0,qa,sa+qa],[b,b+ka,b+ka],J,C,D,E),y.push(ta)));fa="end";if(!0===P&&"left"==ca||!1===P&&"right"==ca)fa="start";x=b-Ja/2+2;1==ea&&0<I&&!g&&!m&&(e=d.fitToBounds(b,0,V),aa=d.fitToBounds(aa,0,V),R=e-aa,wa=d.polygon(z,[0,a.width,a.width,0],[0,0,R,R],O,I),wa.translate(qa,e-R+ka),y.push(wa));x+=u/2;"right"==ca?(H+=qa+sa+ba,x+=ka,P?(f||(x-=u/2+3),H=H-(B+4)-oa):(H+=B+4+v,x-=2,H+=oa)):P?(H+=B+4-ba,f||(x-=u/2+3),g&&(H+=qa,x+=ka),H+=oa):(H+=-B-v-4-2-ba,x-=2,H-=oa);da&&("right"==ca?(la+=qa+ba+sa,X+=ka,la=P?la-v:la+v):(la-=ba,P||(la-=B+v)));f&&(x+=f);P=-3;"right"==ca&&(P+=ka);Z&&(x>V+1||x<P)&&(Z.remove(),Z=null)}da&&(da.translate(la,X),d.setCN(q,da,a.bcn+"tick"),d.setCN(q,da,p,!0),g&&d.setCN(q,da,"guide"));!1===a.visible&&(da&&da.remove(),Z&&(Z.remove(),Z=null));Z&&(Z.attr({"text-anchor":fa}),Z.translate(H,x),0!==n&&Z.rotate(-n,a.chart.backgroundColor),a.allLabels.push(Z),this.label=Z,d.setCN(q,Z,a.bcn+"label"),d.setCN(q,Z,p,!0),g&&d.setCN(q,Z,"guide"));ta&&(d.setCN(q,ta,a.bcn+"grid"),d.setCN(q,ta,p,!0),g&&d.setCN(q,ta,"guide"));wa&&(d.setCN(q,wa,a.bcn+"fill"),d.setCN(q,wa,p,!0));m?ta&&d.setCN(q,ta,a.bcn+"grid-minor"):(a.counter=0===ea?1:0,a.previousCoord=b);0===this.set.node.childNodes.length&&this.set.remove()},graphics:function(){return this.set},getLabel:function(){return this.label}})})();(function(){var d=window.AmCharts;d.RecFill=d.Class({construct:function(a,b,c,e){var h=a.dx,f=a.dy,g=a.orientation,k=0;if(c<b){var l=b;b=c;c=l}var m=e.fillAlpha;isNaN(m)&&(m=0);var l=a.chart.container,n=e.fillColor;"V"==g?(b=d.fitToBounds(b,0,a.viH),c=d.fitToBounds(c,0,a.viH)):(b=d.fitToBounds(b,0,a.viW),c=d.fitToBounds(c,0,a.viW));c-=b;isNaN(c)&&(c=4,k=2,m=0);0>c&&"object"==typeof n&&(n=n.join(",").split(",").reverse());"V"==g?(g=d.rect(l,a.viW,c,n,m),g.translate(h,b-k+f)):(g=d.rect(l,c,a.viH,n,m),g.translate(b-k+h,f));d.setCN(a.chart,g,"guide-fill");e.id&&d.setCN(a.chart,g,"guide-fill-"+e.id);this.set=l.set([g])},graphics:function(){return this.set},getLabel:function(){}})})();(function(){var d=window.AmCharts;d.AmChart=d.Class({construct:function(a){this.theme=a;this.classNamePrefix="amcharts";this.addClassNames=!1;this.version="3.15.2";d.addChart(this);this.createEvents("dataUpdated","init","rendered","drawn","failed","resized");this.height=this.width="100%";this.dataChanged=!0;this.chartCreated=!1;this.previousWidth=this.previousHeight=0;this.backgroundColor="#FFFFFF";this.borderAlpha=this.backgroundAlpha=0;this.color=this.borderColor="#000000";this.fontFamily="Verdana";this.fontSize=11;this.usePrefixes=!1;this.addCodeCredits=this.autoResize=!0;this.precision=-1;this.percentPrecision=2;this.decimalSeparator=".";this.thousandsSeparator=",";this.labels=[];this.allLabels=[];this.titles=[];this.marginRight=this.marginLeft=this.autoMarginOffset=0;this.timeOuts=[];this.creditsPosition="top-left";var b=document.createElement("div"),c=b.style;c.overflow="hidden";c.position="relative";c.textAlign="left";this.chartDiv=b;b=document.createElement("div");c=b.style;c.overflow="hidden";c.position="relative";c.textAlign="left";this.legendDiv=b;this.titleHeight=0;this.hideBalloonTime=150;this.handDrawScatter=2;this.handDrawThickness=1;this.prefixesOfBigNumbers=[{number:1E3,prefix:"k"},{number:1E6,prefix:"M"},{number:1E9,prefix:"G"},{number:1E12,prefix:"T"},{number:1E15,prefix:"P"},{number:1E18,prefix:"E"},{number:1E21,prefix:"Z"},{number:1E24,prefix:"Y"}];this.prefixesOfSmallNumbers=[{number:1E-24,prefix:"y"},{number:1E-21,prefix:"z"},{number:1E-18,prefix:"a"},{number:1E-15,prefix:"f"},{number:1E-12,prefix:"p"},{number:1E-9,prefix:"n"},{number:1E-6,prefix:"\u03bc"},{number:.001,prefix:"m"}];this.panEventsEnabled=!0;this.product="amcharts";this.animations=[];this.balloon=new d.AmBalloon(this.theme);this.balloon.chart=this;d.applyTheme(this,a,"AmChart")},drawChart:function(){0<this.realWidth&&0<this.realHeight&&(this.drawBackground(),this.redrawLabels(),this.drawTitles(),this.brr(),this.renderFix())},drawBackground:function(){d.remove(this.background);var a=this.container,b=this.backgroundColor,c=this.backgroundAlpha,e=this.set;d.isModern||0!==c||(c=.001);var h=this.updateWidth();this.realWidth=h;var f=this.updateHeight();this.realHeight=f;b=d.polygon(a,[0,h-1,h-1,0],[0,0,f-1,f-1],b,c,1,this.borderColor,this.borderAlpha);d.setCN(this,b,"bg");this.background=b;e.push(b);if(b=this.backgroundImage)a=a.image(b,0,0,h,f),d.setCN(this,b,"bg-image"),this.bgImg=a,e.push(a)},drawTitles:function(a){var b=this.titles;this.titleHeight=0;if(d.ifArray(b)){var c=20,e;for(e=0;e<b.length;e++){var h=b[e],h=d.processObject(h,d.Title,this.theme);if(!1!==h.enabled){var f=h.color;void 0===f&&(f=this.color);var g=h.size;isNaN(g)&&(g=this.fontSize+2);isNaN(h.alpha);var k=this.marginLeft,f=d.wrappedText(this.container,h.text,f,this.fontFamily,g,"middle",!0,this.divRealWidth-20);f.translate(k+(this.realWidth-this.marginRight-k)/2,c);f.node.style.pointerEvents="none";h.sprite=f;d.setCN(this,f,"title");h.id&&d.setCN(this,f,"title-"+h.id);k=!0;void 0!==h.bold&&(k=h.bold);k&&f.attr({"font-weight":"bold"});f.attr({opacity:h.alpha});c+=f.getBBox().height+5;a?f.remove():this.freeLabelsSet.push(f)}}this.titleHeight=c-10}},write:function(a){if(a="object"!=typeof a?document.getElementById(a):a){for(;a.firstChild;)a.removeChild(a.firstChild);this.div=a;a.style.overflow="hidden";a.style.textAlign="left";var b=this.chartDiv,c=this.legendDiv,e=this.legend,h=c.style,f=b.style;this.measure();this.previousHeight=this.divRealHeight;this.previousWidth=this.divRealWidth;var g,k=document.createElement("div");g=k.style;g.position="relative";this.containerDiv=k;k.className=this.classNamePrefix+"-main-div";b.className=this.classNamePrefix+"-chart-div";a.appendChild(k);var l=this.exportConfig;l&&d.AmExport&&!this.AmExport&&(this.AmExport=new d.AmExport(this,l));this.amExport&&d.AmExport&&(this.AmExport=d.extend(this.amExport,new d.AmExport(this),!0));this.AmExport&&this.AmExport.init&&this.AmExport.init();if(e)if(e=this.addLegend(e,e.divId),e.enabled)switch(e.position){case"bottom":k.appendChild(b);k.appendChild(c);break;case"top":k.appendChild(c);k.appendChild(b);break;case"absolute":g.width=a.style.width;g.height=a.style.height;h.position="absolute";f.position="absolute";void 0!==e.left&&(h.left=e.left+"px");void 0!==e.right&&(h.right=e.right+"px");void 0!==e.top&&(h.top=e.top+"px");void 0!==e.bottom&&(h.bottom=e.bottom+"px");e.marginLeft=0;e.marginRight=0;k.appendChild(b);k.appendChild(c);break;case"right":g.width=a.style.width;g.height=a.style.height;h.position="relative";f.position="absolute";k.appendChild(b);k.appendChild(c);break;case"left":g.width=a.style.width;g.height=a.style.height;h.position="absolute";f.position="relative";k.appendChild(b);k.appendChild(c);break;case"outside":k.appendChild(b)}else k.appendChild(b);else k.appendChild(b);this.listenersAdded||(this.addListeners(),this.listenersAdded=!0);this.initChart()}},createLabelsSet:function(){d.remove(this.labelsSet);this.labelsSet=this.container.set();this.freeLabelsSet.push(this.labelsSet)},initChart:function(){window.AmCharts_path&&(this.path=window.AmCharts_path);void 0===this.path&&(this.path=d.getPath());void 0===this.path&&(this.path="amcharts/");this.path=d.normalizeUrl(this.path);void 0===this.pathToImages&&(this.pathToImages=this.path+"images/");this.initHC||(d.callInitHandler(this),this.initHC=!0);d.applyLang(this.language,this);var a=this.numberFormatter;a&&(isNaN(a.precision)||(this.precision=a.precision),void 0!==a.thousandsSeparator&&(this.thousandsSeparator=a.thousandsSeparator),void 0!==a.decimalSeparator&&(this.decimalSeparator=a.decimalSeparator));(a=this.percentFormatter)&&!isNaN(a.precision)&&(this.percentPrecision=a.precision);this.nf={precision:this.precision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator};this.pf={precision:this.percentPrecision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator};this.destroy();(a=this.container)?(a.container.innerHTML="",a.width=this.realWidth,a.height=this.realHeight,a.addDefs(this),this.chartDiv.appendChild(a.container)):a=new d.AmDraw(this.chartDiv,this.realWidth,this.realHeight,this);this.container=a;this.checkDisplay();a.chart=this;d.VML||d.SVG?(a.handDrawn=this.handDrawn,a.handDrawScatter=this.handDrawScatter,a.handDrawThickness=this.handDrawThickness,this.set&&this.set.remove(),this.set=a.set(),this.gridSet&&this.gridSet.remove(),this.gridSet=a.set(),this.cursorLineSet&&this.cursorLineSet.remove(),this.cursorLineSet=a.set(),this.graphsBehindSet&&this.graphsBehindSet.remove(),this.graphsBehindSet=a.set(),this.bulletBehindSet&&this.bulletBehindSet.remove(),this.bulletBehindSet=a.set(),this.columnSet&&this.columnSet.remove(),this.columnSet=a.set(),this.graphsSet&&this.graphsSet.remove(),this.graphsSet=a.set(),this.trendLinesSet&&this.trendLinesSet.remove(),this.trendLinesSet=a.set(),this.axesSet&&this.axesSet.remove(),this.axesSet=a.set(),this.cursorSet&&this.cursorSet.remove(),this.cursorSet=a.set(),this.scrollbarsSet&&this.scrollbarsSet.remove(),this.scrollbarsSet=a.set(),this.bulletSet&&this.bulletSet.remove(),this.bulletSet=a.set(),this.freeLabelsSet&&this.freeLabelsSet.remove(),this.axesLabelsSet&&this.axesLabelsSet.remove(),this.axesLabelsSet=a.set(),this.freeLabelsSet=a.set(),this.balloonsSet&&this.balloonsSet.remove(),this.balloonsSet=a.set(),this.zoomButtonSet&&this.zoomButtonSet.remove(),this.zbSet&&(this.zbSet.remove(),this.zbSet=null),this.zoomButtonSet=a.set(),this.linkSet&&this.linkSet.remove(),this.linkSet=a.set()):this.fire("failed",{type:"failed",chart:this})},premeasure:function(){var a=this.div;if(a){this.boundingRect=this.chartDiv.getBoundingClientRect();var b=a.offsetWidth,c=a.offsetHeight;a.clientHeight&&(b=a.clientWidth,c=a.clientHeight);if(b!=this.mw||c!=this.mh)this.mw=b,this.mh=c,this.measure()}},measure:function(){var a=this.div;if(a){var b=this.chartDiv,c=a.offsetWidth,e=a.offsetHeight,h=this.container;a.clientHeight&&(c=a.clientWidth,e=a.clientHeight);var f=d.removePx(d.getStyle(a,"padding-left")),g=d.removePx(d.getStyle(a,"padding-right")),k=d.removePx(d.getStyle(a,"padding-top")),l=d.removePx(d.getStyle(a,"padding-bottom"));isNaN(f)||(c-=f);isNaN(g)||(c-=g);isNaN(k)||(e-=k);isNaN(l)||(e-=l);f=a.style;a=f.width;f=f.height;-1!=a.indexOf("px")&&(c=d.removePx(a));-1!=f.indexOf("px")&&(e=d.removePx(f));e=Math.round(e);c=Math.round(c);a=Math.round(d.toCoordinate(this.width,c));f=Math.round(d.toCoordinate(this.height,e));(c!=this.previousWidth||e!=this.previousHeight)&&0<a&&0<f&&(b.style.width=a+"px",b.style.height=f+"px",b.style.padding=0,h&&h.setSize(a,f),this.balloon=d.processObject(this.balloon,d.AmBalloon,this.theme),this.balloon.setBounds(2,2,a-2,f));this.balloon.chart=this;this.realWidth=a;this.realHeight=f;this.divRealWidth=c;this.divRealHeight=e}},checkDisplay:function(){if(this.container){var a=d.rect(this.container,10,10),b=a.getBBox();0===b.width&&0===b.height&&(this.divRealHeight=this.divRealWidth=this.realHeight=this.realWidth=0,this.previousWidth=this.previousHeight=NaN);a.remove()}},destroy:function(){this.chartDiv.innerHTML="";this.clearTimeOuts();this.legend&&this.legend.destroy()},clearTimeOuts:function(){var a=this.timeOuts;if(a){var b;for(b=0;b<a.length;b++)clearTimeout(a[b])}this.timeOuts=[]},clear:function(a){d.callMethod("clear",[this.chartScrollbar,this.scrollbarV,this.scrollbarH,this.chartCursor]);this.chartCursor=this.scrollbarH=this.scrollbarV=this.chartScrollbar=null;this.clearTimeOuts();this.container&&(this.container.remove(this.chartDiv),this.container.remove(this.legendDiv));a||d.removeChart(this);if(a=this.div)for(;a.firstChild;)a.removeChild(a.firstChild);this.legend&&this.legend.destroy()},setMouseCursor:function(a){"auto"==a&&d.isNN&&(a="default");this.chartDiv.style.cursor=a;this.legendDiv.style.cursor=a},redrawLabels:function(){this.labels=[];var a=this.allLabels;this.createLabelsSet();var b;for(b=0;b<a.length;b++)this.drawLabel(a[b])},drawLabel:function(a){if(this.container&&!1!==a.enabled){a=d.processObject(a,d.Label,this.theme);var b=a.y,c=a.text,e=a.align,h=a.size,f=a.color,g=a.rotation,k=a.alpha,l=a.bold,m=d.toCoordinate(a.x,this.realWidth),b=d.toCoordinate(b,this.realHeight);m||(m=0);b||(b=0);void 0===f&&(f=this.color);isNaN(h)&&(h=this.fontSize);e||(e="start");"left"==e&&(e="start");"right"==e&&(e="end");"center"==e&&(e="middle",g?b=this.realHeight-b+b/2:m=this.realWidth/2-m);void 0===k&&(k=1);void 0===g&&(g=0);b+=h/2;c=d.text(this.container,c,f,this.fontFamily,h,e,l,k);c.translate(m,b);d.setCN(this,c,"label");a.id&&d.setCN(this,c,"label-"+a.id);0!==g&&c.rotate(g);a.url?(c.setAttr("cursor","pointer"),c.click(function(){d.getURL(a.url)})):c.node.style.pointerEvents="none";this.labelsSet.push(c);this.labels.push(c)}},addLabel:function(a,b,c,e,d,f,g,k,l,m){a={x:a,y:b,text:c,align:e,size:d,color:f,alpha:k,rotation:g,bold:l,url:m,enabled:!0};this.container&&this.drawLabel(a);this.allLabels.push(a)},clearLabels:function(){var a=this.labels,b;for(b=a.length-1;0<=b;b--)a[b].remove();this.labels=[];this.allLabels=[]},updateHeight:function(){var a=this.divRealHeight,b=this.legend;if(b){var c=this.legendDiv.offsetHeight,b=b.position;if("top"==b||"bottom"==b){a-=c;if(0>a||isNaN(a))a=0;this.chartDiv.style.height=a+"px"}}return a},updateWidth:function(){var a=this.divRealWidth,b=this.divRealHeight,c=this.legend;if(c){var e=this.legendDiv,d=e.offsetWidth;isNaN(c.width)||(d=c.width);c.ieW&&(d=c.ieW);var f=e.offsetHeight,e=e.style,g=this.chartDiv.style,c=c.position;if("right"==c||"left"==c){a-=d;if(0>a||isNaN(a))a=0;g.width=a+"px";"left"==c?(g.left=d+"px",e.left="0px"):(g.left="0px",e.left=a+"px");b>f&&(e.top=(b-f)/2+"px")}}return a},getTitleHeight:function(){this.drawTitles(!0);return this.titleHeight},addTitle:function(a,b,c,e,d){isNaN(b)&&(b=this.fontSize+2);a={text:a,size:b,color:c,alpha:e,bold:d,enabled:!0};this.titles.push(a);return a},handleWheel:function(a){var b=0;a||(a=window.event);a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3);b&&this.handleWheelReal(b,a.shiftKey);a.preventDefault&&a.preventDefault()},handleWheelReal:function(){},addListeners:function(){var a=this,b=a.chartDiv;document.addEventListener?(a.panEventsEnabled&&(b.style.msTouchAction="none"),"ontouchstart"in document.documentElement&&(b.addEventListener("touchstart",function(b){a.handleTouchStart.call(a,b)},!0),b.addEventListener("touchmove",function(b){a.handleMouseMove.call(a,b)},!0),b.addEventListener("touchend",function(b){a.handleTouchEnd.call(a,b)},!0)),b.addEventListener("mousedown",function(b){a.mouseIsOver=!0;a.handleMouseMove.call(a,b);a.handleMouseDown.call(a,b)},!0),b.addEventListener("mouseover",function(b){a.handleMouseOver.call(a,b)},!0),b.addEventListener("mouseout",function(b){a.handleMouseOut.call(a,b)},!0)):(b.attachEvent("onmousedown",function(b){a.handleMouseDown.call(a,b)}),b.attachEvent("onmouseover",function(b){a.handleMouseOver.call(a,b)}),b.attachEvent("onmouseout",function(b){a.handleMouseOut.call(a,b)}))},dispDUpd:function(){if(!this.skipEvents){var a;this.dispatchDataUpdated&&(this.dispatchDataUpdated=!1,a="dataUpdated",this.fire(a,{type:a,chart:this}));this.chartCreated||(this.chartCreated=!0,a="init",this.fire(a,{type:a,chart:this}));this.chartRendered||(a="rendered",this.fire(a,{type:a,chart:this}),this.chartRendered=!0);a="drawn";this.fire(a,{type:a,chart:this})}this.skipEvents=!1},validateSize:function(){var a=this;a.premeasure();a.checkDisplay();if(a.divRealWidth!=a.previousWidth||a.divRealHeight!=a.previousHeight){var b=a.legend;if(0<a.realWidth&&0<a.realHeight){a.sizeChanged=!0;if(b){a.legendInitTO&&clearTimeout(a.legendInitTO);var c=setTimeout(function(){b.invalidateSize()},10);a.timeOuts.push(c);a.legendInitTO=c}"xy"!=a.type?a.marginsUpdated=!1:(a.marginsUpdated=!0,a.selfZoom=!0);clearTimeout(a.initTO);c=setTimeout(function(){a.initChart()},10);a.timeOuts.push(c);a.initTO=c}a.fire("resized",{type:"resized",chart:a});a.renderFix();b&&b.renderFix&&b.renderFix();a.previousHeight=a.divRealHeight;a.previousWidth=a.divRealWidth}},invalidateSize:function(){this.previousHeight=this.previousWidth=NaN;this.invalidateSizeReal()},invalidateSizeReal:function(){var a=this;a.marginsUpdated=!1;clearTimeout(a.validateTO);var b=setTimeout(function(){a.validateSize()},5);a.timeOuts.push(b);a.validateTO=b},validateData:function(a){this.chartCreated&&(this.dataChanged=!0,this.marginsUpdated=!1,this.initChart(a))},validateNow:function(a,b){this.initTO&&clearTimeout(this.initTO);a&&(this.dataChanged=!0);this.skipEvents=b;this.chartRendered=!1;this.write(this.div)},showItem:function(a){a.hidden=!1;this.initChart()},hideItem:function(a){a.hidden=!0;this.initChart()},hideBalloon:function(){var a=this;clearTimeout(a.hoverInt);clearTimeout(a.balloonTO);a.hoverInt=setTimeout(function(){a.hideBalloonReal.call(a)},a.hideBalloonTime)},cleanChart:function(){},hideBalloonReal:function(){var a=this.balloon;a&&a.hide()},showBalloon:function(a,b,c,e,d){var f=this;clearTimeout(f.balloonTO);clearTimeout(f.hoverInt);f.balloonTO=setTimeout(function(){f.showBalloonReal.call(f,a,b,c,e,d)},1)},showBalloonReal:function(a,b,c,e,d){this.handleMouseMove();var f=this.balloon;f.enabled&&(f.followCursor(!1),f.changeColor(b),!c||f.fixedPosition?(f.setPosition(e,d),f.followCursor(!1)):f.followCursor(!0),a&&f.showBalloon(a))},handleMouseOver:function(){this.outTO&&clearTimeout(this.outTO);d.resetMouseOver();this.mouseIsOver=!0},handleMouseOut:function(){var a=this;a.outTO&&clearTimeout(a.outTO);a.outTO=setTimeout(function(){a.handleMouseOutReal()},10)},handleMouseOutReal:function(){d.resetMouseOver();this.mouseIsOver=!1},handleMouseMove:function(a){a||(a=window.event);if(a){if(a.touches&&(a=a.touches.item(0),!a))return;this.boundingRect&&a.clientX&&(this.mouseX=a.clientX-this.boundingRect.left,this.mouseY=a.clientY-this.boundingRect.top)}},handleTouchStart:function(a){this.handleMouseMove(a);this.handleMouseDown(a)},handleTouchEnd:function(a){this.handleMouseMove(a);d.resetMouseOver();this.handleReleaseOutside(a)},handleReleaseOutside:function(){},handleMouseDown:function(a){d.resetMouseOver();this.mouseIsOver=!0;a&&a.preventDefault&&(this.panEventsEnabled?a.preventDefault():a.touches||a.preventDefault())},addLegend:function(a,b){a=d.processObject(a,d.AmLegend,this.theme);a.divId=b;a.ieW=0;var c;c="object"!=typeof b&&b?document.getElementById(b):b;this.legend=a;a.chart=this;c?(a.div=c,a.position="outside",a.autoMargins=!1):a.div=this.legendDiv;return a},removeLegend:function(){this.legend=void 0;this.legendDiv.innerHTML=""},handleResize:function(){(d.isPercents(this.width)||d.isPercents(this.height))&&this.invalidateSizeReal();this.renderFix()},renderFix:function(){if(!d.VML){var a=this.container;a&&a.renderFix()}},getSVG:function(){if(d.hasSVG)return this.container},animate:function(a,b,c,e,h,f,g){a["an_"+b]&&d.removeFromArray(this.animations,a["an_"+b]);c={obj:a,frame:0,attribute:b,from:c,to:e,time:h,effect:f,suffix:g};a["an_"+b]=c;this.animations.push(c);return c},setLegendData:function(a){var b=this.legend;b&&b.setData(a)},stopAnim:function(a){d.removeFromArray(this.animations,a)},updateAnimations:function(){var a;this.container&&this.container.update();if(this.animations)for(a=this.animations.length-1;0<=a;a--){var b=this.animations[a],c=1E3*b.time/d.updateRate,e=b.frame+1,h=b.obj,f=b.attribute;if(e<=c){b.frame++;var g=Number(b.from),k=Number(b.to)-g,c=d[b.effect](0,e,g,k,c);0===k?(this.animations.splice(a,1),h.node.style[f]=Number(b.to)+b.suffix):h.node.style[f]=c+b.suffix}else h.node.style[f]=Number(b.to)+b.suffix,this.animations.splice(a,1)}},update:function(){this.updateAnimations()},inIframe:function(){try{return window.self!==window.top}catch(a){return!0}},brr:function(){}});d.Slice=d.Class({construct:function(){}});d.SerialDataItem=d.Class({construct:function(){}});d.GraphDataItem=d.Class({construct:function(){}});d.Guide=d.Class({construct:function(a){this.cname="Guide";d.applyTheme(this,a,this.cname)}});d.Title=d.Class({construct:function(a){this.cname="Title";d.applyTheme(this,a,this.cname)}});d.Label=d.Class({construct:function(a){this.cname="Label";d.applyTheme(this,a,this.cname)}})})();(function(){var d=window.AmCharts;d.AmGraph=d.Class({construct:function(a){this.cname="AmGraph";this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph");this.type="line";this.stackable=!0;this.columnCount=1;this.columnIndex=0;this.centerCustomBullets=this.showBalloon=!0;this.maxBulletSize=50;this.minBulletSize=4;this.balloonText="[[value]]";this.hidden=this.scrollbar=this.animationPlayed=!1;this.pointPosition="middle";this.depthCount=1;this.includeInMinMax=!0;this.negativeBase=0;this.visibleInLegend=!0;this.showAllValueLabels=!1;this.showBulletsAt=this.showBalloonAt="close";this.lineThickness=1;this.dashLength=0;this.connect=!0;this.lineAlpha=1;this.bullet="none";this.bulletBorderThickness=2;this.bulletBorderAlpha=0;this.bulletAlpha=1;this.bulletSize=8;this.cornerRadiusTop=this.hideBulletsCount=this.bulletOffset=0;this.cursorBulletAlpha=1;this.gradientOrientation="vertical";this.dy=this.dx=0;this.periodValue="";this.clustered=!0;this.periodSpan=1;this.y=this.x=0;this.switchable=!0;this.tcc=this.minDistance=1;this.labelRotation=0;this.labelAnchor="auto";this.labelOffset=3;this.bcn="graph-";this.dateFormat="MMM DD, YYYY";d.applyTheme(this,a,this.cname)},draw:function(){var a=this.chart,b=a.type;isNaN(this.precision)||(this.numberFormatter?this.numberFormatter.precision=this.precision:this.numberFormatter={precision:this.precision,decimalSeparator:a.decimalSeparator,thousandsSeparator:a.thousandsSeparator});var c=a.container;this.container=c;this.destroy();var e=c.set(),h=c.set();this.behindColumns?(a.graphsBehindSet.push(e),a.bulletBehindSet.push(h)):(a.graphsSet.push(e),a.bulletSet.push(h));var f=this.bulletAxis;d.isString(f)&&(this.bulletAxis=a.getValueAxisById(f));this.bulletSet=h;if(!this.scrollbar){var f=a.marginLeftReal,g=a.marginTopReal;e.translate(f,g);h.translate(f,g)}c=c.set();d.remove(this.columnsSet);e.push(c);this.set=e;d.setCN(a,e,"graph-"+this.type);d.setCN(a,e,"graph-"+this.id);d.setCN(a,h,"graph-"+this.type);d.setCN(a,h,"graph-"+this.id);this.columnsSet=c;this.columnsArray=[];this.ownColumns=[];this.allBullets=[];this.animationArray=[];e=this.labelPosition;e||(h=this.valueAxis.stackType,e="top","column"==this.type&&(a.rotate&&(e="right"),"100%"==h||"regular"==h)&&(e="middle"),this.labelPosition=e);d.ifArray(this.data)&&(a=!1,"xy"==b?this.xAxis.axisCreated&&this.yAxis.axisCreated&&(a=!0):this.valueAxis.axisCreated&&(a=!0),!this.hidden&&a&&this.createGraph())},createGraph:function(){var a=this,b=a.chart;a.startAlpha=b.startAlpha;a.seqAn=b.sequencedAnimation;a.baseCoord=a.valueAxis.baseCoord;void 0===a.fillAlphas&&(a.fillAlphas=0);a.bulletColorR=a.bulletColor;void 0===a.bulletColorR&&(a.bulletColorR=a.lineColorR,a.bulletColorNegative=a.negativeLineColor);void 0===a.bulletAlpha&&(a.bulletAlpha=a.lineAlpha);b=b.type;"gantt"==b&&(b="serial");clearTimeout(a.playedTO);if(!isNaN(a.valueAxis.min)&&!isNaN(a.valueAxis.max)){switch(b){case"serial":a.categoryAxis&&(a.createSerialGraph(),"candlestick"==a.type&&1>a.valueAxis.minMaxMultiplier&&a.positiveClip(a.set));break;case"radar":a.createRadarGraph();break;case"xy":a.createXYGraph(),a.positiveClip(a.set)}a.playedTO=setTimeout(function(){a.setAnimationPlayed.call(a)},500*a.chart.startDuration)}},setAnimationPlayed:function(){this.animationPlayed=!0},createXYGraph:function(){var a=[],b=[],c=this.xAxis,e=this.yAxis;this.pmh=e.viH+1;this.pmw=c.viW+1;this.pmy=this.pmx=0;var d;for(d=this.start;d<=this.end;d++){var f=this.data[d].axes[c.id].graphs[this.id],g=f.values,k=g.x,l=g.y,g=c.getCoordinate(k),m=e.getCoordinate(l);!isNaN(k)&&!isNaN(l)&&(a.push(g),b.push(m),f.x=g,f.y=m,k=this.createBullet(f,g,m,d),l=this.labelText)&&(f=this.createLabel(f,g,m,l),this.positionLabel(g,m,f,k),this.allBullets.push(f))}this.drawLineGraph(a,b);this.launchAnimation()},createRadarGraph:function(){var a=this.valueAxis.stackType,b=[],c=[],e=[],d=[],f,g,k,l,m;for(m=this.start;m<=this.end;m++){var n=this.data[m].axes[this.valueAxis.id].graphs[this.id],p,q;"none"==a||"3d"==a?p=n.values.value:(p=n.values.close,q=n.values.open);if(isNaN(p))this.connect||(this.drawLineGraph(b,c,e,d),b=[],c=[],e=[],d=[]);else{var r=this.y-(this.valueAxis.getCoordinate(p)-this.height),r=r*this.valueAxis.rMultiplier,u=180-360/(this.end-this.start+1)*m;"middle"==this.valueAxis.pointPosition&&(u-=180/(this.end-this.start+1));p=r*Math.sin(u/180*Math.PI);r*=Math.cos(u/180*Math.PI);b.push(p);c.push(r);if(!isNaN(q)){var t=this.y-(this.valueAxis.getCoordinate(q)-this.height),t=t*this.valueAxis.rMultiplier,z=t*Math.sin(u/180*Math.PI),u=t*Math.cos(u/180*Math.PI);e.push(z);d.push(u);isNaN(k)&&(k=z);isNaN(l)&&(l=u)}u=this.createBullet(n,p,r,m);if(z=this.labelText)n=this.createLabel(n,p,r,z),this.positionLabel(p,r,n,u),this.allBullets.push(n);isNaN(f)&&(f=p);isNaN(g)&&(g=r)}}b.push(f);c.push(g);isNaN(k)||(e.push(k),d.push(l));this.drawLineGraph(b,c,e,d);this.launchAnimation()},positionLabel:function(a,b,c,e){var d="middle",f=!1,g=this.labelPosition,k=c.getBBox();if(e){var l=e.graphDataItem,m=this.chart.rotate,n=l.isNegative,p=this.chart,q=this.valueAxis;b-=k.height/4/2;switch(g){case"top":g=m?"top":n?"bottom":"top";break;case"right":g=m?n?"left":"right":"right";break;case"bottom":g=m?"bottom":n?"top":"bottom";break;case"left":g=m?n?"right":"left":"left"}var r=l.columnGraphics,u=0,t=0;r&&(u=r.x,t=r.y);var z=this.labelOffset;switch(g){case"top":b=q.reversed?b+(e.size/2+k.height/2+z):b-(e.size/2+k.height/2+z);break;case"right":d="start";a+=e.size/2+z;break;case"bottom":b=q.reversed?b-(e.size/2+k.height/2+z):b+(e.size/2+k.height/2+z);break;case"left":d="end";a-=e.size/2+z;break;case"inside":"column"==this.type&&(f=!0,m?n?(d="end",a=u-3-z):(d="start",a=u+3+z):b=n?t+7+z:t-10-z);break;case"middle":"column"==this.type&&(f=!0,m?a-=(a-u)/2+z-3:b-=(b-t)/2+z-3)}"auto"!=this.labelAnchor&&(d=this.labelAnchor);c.attr({"text-anchor":d});this.labelRotation&&c.rotate(this.labelRotation);c.translate(a,b);k=c.getBBox();!this.showAllValueLabels&&r&&f&&(k.height>l.columnHeight||k.width>l.columnWidth)&&(c.remove(),c=!1);if(c&&("serial"==p.type||"gantt"==p.type))if(m){if(0>b||b>this.height)c.remove(),c=!1}else if(0>a||a>this.width)c.remove(),c=!1;return c}},getGradRotation:function(){var a=270;"horizontal"==this.gradientOrientation&&(a=0);return this.gradientRotation=a},createSerialGraph:function(){this.dashLengthSwitched=this.fillColorsSwitched=this.lineColorSwitched=void 0;var a=this.chart,b=this.id,c=this.index,e=this.data,h=this.chart.container,f=this.valueAxis,g=this.type,k=this.columnWidthReal,l=this.showBulletsAt;isNaN(this.columnWidth)||(k=this.columnWidth);isNaN(k)&&(k=.8);var m=this.useNegativeColorIfDown,n=this.width,p=this.height,q=this.y,r=this.rotate,u=this.columnCount,t=d.toCoordinate(this.cornerRadiusTop,k/2),z=this.connect,y=[],v=[],w,A,B,C,D=this.chart.graphs.length,J,E=this.dx/this.tcc,O=this.dy/this.tcc,I=f.stackType,W=this.start,ea=this.end,P=this.scrollbar,oa="graph-column-";P&&(oa="scrollbar-graph-column-");var qa=this.categoryAxis,ka=this.baseCoord,Qa=this.negativeBase,ca=this.columnIndex,aa=this.lineThickness,V=this.lineAlpha,sa=this.lineColorR,ba=this.dashLength,da=this.set,ta,fa=this.getGradRotation(),R=this.chart.columnSpacing,X=qa.cellWidth,wa=(X*k-u)/u;R>wa&&(R=wa);var H,x,la,ga=p+1,Ja=n+1,Z=0,qb=0,rb,sb,eb,fb,tb=this.fillColorsR,Ka=this.negativeFillColors,Da=this.negativeLineColor,Wa=this.fillAlphas,Xa=this.negativeFillAlphas;"object"==typeof Wa&&(Wa=Wa[0]);"object"==typeof Xa&&(Xa=Xa[0]);var gb=f.getCoordinate(f.min);f.logarithmic&&(gb=f.getCoordinate(f.minReal));this.minCoord=gb;this.resetBullet&&(this.bullet="none");if(!(P||"line"!=g&&"smoothedLine"!=g&&"step"!=g||(1==e.length&&"step"!=g&&"none"==this.bullet&&(this.bullet="round",this.resetBullet=!0),!Ka&&void 0==Da||m))){var Ra=Qa;Ra>f.max&&(Ra=f.max);Ra<f.min&&(Ra=f.min);f.logarithmic&&(Ra=f.minReal);var Ga=f.getCoordinate(Ra),Ib=f.getCoordinate(f.max);r?(ga=p,Ja=Math.abs(Ib-Ga)+1,rb=p,sb=Math.abs(gb-Ga)+1,fb=qb=0,f.reversed?(Z=0,eb=Ga):(Z=Ga,eb=0)):(Ja=n,ga=Math.abs(Ib-Ga)+1,sb=n,rb=Math.abs(gb-Ga)+1,eb=Z=0,f.reversed?(fb=q,qb=Ga):fb=Ga+1)}var Ha=Math.round;this.pmx=Ha(Z);this.pmy=Ha(qb);this.pmh=Ha(ga);this.pmw=Ha(Ja);this.nmx=Ha(eb);this.nmy=Ha(fb);this.nmh=Ha(rb);this.nmw=Ha(sb);d.isModern||(this.nmy=this.nmx=0,this.nmh=this.height);this.clustered||(u=1);k="column"==g?(X*k-R*(u-1))/u:X*k;1>k&&(k=1);var Jb=this.fixedColumnWidth;isNaN(Jb)||(k=Jb);var K;if("line"==g||"step"==g||"smoothedLine"==g){if(0<W){for(K=W-1;-1<K;K--)if(H=e[K],x=H.axes[f.id].graphs[b],la=x.values.value,!isNaN(la)){W=K;break}if(this.lineColorField)for(K=W;-1<K;K--)if(H=e[K],x=H.axes[f.id].graphs[b],x.lineColor){this.bulletColorSwitched=this.lineColorSwitched=x.lineColor;break}if(this.fillColorsField)for(K=W;-1<K;K--)if(H=e[K],x=H.axes[f.id].graphs[b],x.fillColors){this.fillColorsSwitched=x.fillColors;break}if(this.dashLengthField)for(K=W;-1<K;K--)if(H=e[K],x=H.axes[f.id].graphs[b],!isNaN(x.dashLength)){this.dashLengthSwitched=x.dashLength;break}}if(ea<e.length-1)for(K=ea+1;K<e.length;K++)if(H=e[K],x=H.axes[f.id].graphs[b],la=x.values.value,!isNaN(la)){ea=K;break}}ea<e.length-1&&ea++;var S=[],T=[],La=!1;if("line"==g||"step"==g||"smoothedLine"==g)if(this.stackable&&"regular"==I||"100%"==I||this.fillToGraph)La=!0;var Kb=this.noStepRisers,hb=-1E3,ib=-1E3,jb=this.minDistance,Ma=!0,Ya=!1;for(K=W;K<=ea;K++){H=e[K];x=H.axes[f.id].graphs[b];x.index=K;var Za,Na=NaN;if(m&&void 0==this.openField)for(var ub=K+1;ub<e.length&&(!e[ub]||!(Za=e[K+1].axes[f.id].graphs[b])||!Za.values||(Na=Za.values.value,isNaN(Na)));ub++);var U,Q,M,ha,ma=NaN,G=NaN,F=NaN,N=NaN,L=NaN,Oa=NaN,Ea=NaN,Pa=NaN,Fa=NaN,ya=NaN,za=NaN,ia=NaN,ja=NaN,Y=NaN,vb=NaN,wb=NaN,na=NaN,pa=void 0,Ia=tb,Sa=Wa,Ba=sa,ua,xa,xb=this.proCandlesticks,kb=this.topRadius,$a=this.pattern;void 0!=x.pattern&&($a=x.pattern);isNaN(x.alpha)||(Sa=x.alpha);isNaN(x.dashLength)||(ba=x.dashLength);var Ca=x.values;f.recalculateToPercents&&(Ca=x.percents);if(Ca){Y=this.stackable&&"none"!=I&&"3d"!=I?Ca.close:Ca.value;if("candlestick"==g||"ohlc"==g)Y=Ca.close,wb=Ca.low,Ea=f.getCoordinate(wb),vb=Ca.high,Fa=f.getCoordinate(vb);na=Ca.open;F=f.getCoordinate(Y);isNaN(na)||(L=f.getCoordinate(na),m&&(Na=na,na=L=NaN));m&&(void 0==this.openField?Za&&(Za.isNegative=Na<Y?!0:!1,isNaN(Na)&&(x.isNegative=!Ma)):x.isNegative=Na>Y?!0:!1);if(!P)switch(this.showBalloonAt){case"close":x.y=F;break;case"open":x.y=L;break;case"high":x.y=Fa;break;case"low":x.y=Ea}var ma=H.x[qa.id],Ta=this.periodSpan-1,ra=Math.floor(X/2)+Math.floor(Ta*X/2),Aa=ra,lb=0;"left"==this.stepDirection&&(lb=(2*X+Ta*X)/2,ma-=lb);"center"==this.stepDirection&&(lb=X/2,ma-=lb);"start"==this.pointPosition&&(ma-=X/2+Math.floor(Ta*X/2),ra=0,Aa=Math.floor(X)+Math.floor(Ta*X));"end"==this.pointPosition&&(ma+=X/2+Math.floor(Ta*X/2),ra=Math.floor(X)+Math.floor(Ta*X),Aa=0);if(Kb){var yb=this.columnWidth;isNaN(yb)||(ra*=yb,Aa*=yb)}P||(x.x=ma);-1E5>ma&&(ma=-1E5);ma>n+1E5&&(ma=n+1E5);r?(G=F,N=L,L=F=ma,isNaN(na)&&!this.fillToGraph&&(N=ka),Oa=Ea,Pa=Fa):(N=G=ma,isNaN(na)&&!this.fillToGraph&&(L=ka));if(!xb&&Y<na||xb&&Y<ta)x.isNegative=!0,Ka&&(Ia=Ka),Xa&&(Sa=Xa),void 0!=Da&&(Ba=Da);Ya=!1;isNaN(Y)||(m?Y>Na?(Ma&&(Ya=!0),Ma=!1):(Ma||(Ya=!0),Ma=!0):x.isNegative=Y<Qa?!0:!1,ta=Y);var Lb=!1;P&&a.chartScrollbar.ignoreCustomColors&&(Lb=!0);Lb||(void 0!=x.color&&(Ia=x.color),x.fillColors&&(Ia=x.fillColors));switch(g){case"line":if(isNaN(Y))z||(this.drawLineGraph(y,v,S,T),y=[],v=[],S=[],T=[]);else{if(Math.abs(G-hb)>=jb||Math.abs(F-ib)>=jb)y.push(G),v.push(F),hb=G,ib=F;ya=G;za=F;ia=G;ja=F;!La||isNaN(L)||isNaN(N)||(S.push(N),T.push(L));if(Ya||void 0!=x.lineColor||void 0!=x.fillColors||!isNaN(x.dashLength))this.drawLineGraph(y,v,S,T),y=[G],v=[F],S=[],T=[],!La||isNaN(L)||isNaN(N)||(S.push(N),T.push(L)),m?Ma?(this.lineColorSwitched=sa,this.fillColorsSwitched=tb):(this.lineColorSwitched=Da,this.fillColorsSwitched=Ka):(this.lineColorSwitched=x.lineColor,this.fillColorsSwitched=x.fillColors),this.dashLengthSwitched=x.dashLength;x.gap&&(this.drawLineGraph(y,v,S,T),y=[],v=[],S=[],T=[])}break;case"smoothedLine":if(isNaN(Y))z||(this.drawSmoothedGraph(y,v,S,T),y=[],v=[],S=[],T=[]);else{if(Math.abs(G-
hb)>=jb||Math.abs(F-ib)>=jb)y.push(G),v.push(F),hb=G,ib=F;ya=G;za=F;ia=G;ja=F;!La||isNaN(L)||isNaN(N)||(S.push(N),T.push(L));void 0==x.lineColor&&void 0==x.fillColors&&isNaN(x.dashLength)||(this.drawSmoothedGraph(y,v,S,T),y=[G],v=[F],S=[],T=[],!La||isNaN(L)||isNaN(N)||(S.push(N),T.push(L)),this.lineColorSwitched=x.lineColor,this.fillColorsSwitched=x.fillColors,this.dashLengthSwitched=x.dashLength);x.gap&&(this.drawSmoothedGraph(y,v,S,T),y=[],v=[],S=[],T=[])}break;case"step":if(!isNaN(Y)){r?(isNaN(w)||(y.push(w),v.push(F-ra)),v.push(F-ra),y.push(G),v.push(F+Aa),y.push(G),!La||isNaN(L)||isNaN(N)||(isNaN(B)||(S.push(B),T.push(L-ra)),S.push(N),T.push(L-ra),S.push(N),T.push(L+Aa))):(isNaN(A)||(v.push(A),y.push(G-ra)),y.push(G-ra),v.push(F),y.push(G+Aa),v.push(F),!La||isNaN(L)||isNaN(N)||(isNaN(C)||(S.push(N-ra),T.push(C)),S.push(N-ra),T.push(L),S.push(N+Aa),T.push(L)));w=G;A=F;B=N;C=L;ya=G;za=F;ia=G;ja=F;if(Ya||void 0!=x.lineColor||void 0!=x.fillColors||!isNaN(x.dashLength)){var Zb=y[y.length-2],$b=v[v.length-2];y.pop();v.pop();this.drawLineGraph(y,v,S,T);y=[Zb];v=[$b];r?(v.push(F+Aa),y.push(G)):(y.push(G+Aa),v.push(F));S=[];T=[];this.lineColorSwitched=x.lineColor;this.fillColorsSwitched=x.fillColors;this.dashLengthSwitched=x.dashLength;m&&(Ma?(this.lineColorSwitched=sa,this.fillColorsSwitched=tb):(this.lineColorSwitched=Da,this.fillColorsSwitched=Ka))}if(Kb||x.gap)w=A=NaN,this.drawLineGraph(y,v,S,T),y=[],v=[],S=[],T=[]}else if(!z){if(1>=this.periodSpan||1<this.periodSpan&&G-w>ra+Aa)w=A=NaN;this.drawLineGraph(y,v,S,T);y=[];v=[];S=[];T=[]}break;case"column":ua=Ba;void 0!=x.lineColor&&(ua=x.lineColor);if(!isNaN(Y)){m||(x.isNegative=Y<Qa?!0:!1);x.isNegative&&(Ka&&(Ia=Ka),void 0!=Da&&(ua=Da));var Mb=f.min,Nb=f.max;if(!(Y<Mb&&na<Mb||Y>Nb&&na>Nb)){var va;if(r){"3d"==I?(Q=F-(u/2-this.depthCount+1)*(k+R)+R/2+O*ca,U=N+E*ca,va=ca):(Q=Math.floor(F-(u/2-ca)*(k+R)+R/2),U=N,va=0);M=k;ya=G;za=Q+k/2;isNaN(N)||N>G&&!x.isNegative&&(ya=N);ia=G;ja=Q+k/2;Q+M>p+va*O&&(M=p-Q+va*O);Q<va*O&&(M+=Q,Q=va*O);ha=G-N;var ac=U;U=d.fitToBounds(U,0,n);ha+=ac-U;ha=d.fitToBounds(ha,-U,n-U+E*ca);Q<p&&0<M&&(pa=new d.Cuboid(h,ha,M,E-a.d3x,O-a.d3y,Ia,Sa,aa,ua,V,fa,t,r,ba,$a,kb,oa),x.columnWidth=Math.abs(ha),x.columnHeight=Math.abs(M))}else{"3d"==I?(U=G-(u/2-this.depthCount+1)*(k+R)+R/2+E*ca,Q=L+O*ca,va=ca):(U=G-(u/2-ca)*(k+R)+R/2,Q=L,va=0);M=k;ya=U+k/2;za=F;isNaN(L)||L<F&&!x.isNegative&&!f.reversed&&(za=L);ia=U+k/2;ja=F;U+M>n+va*E&&(M=n-U+va*E);U<va*E&&(M+=U-va*E,U=va*E);ha=F-L;var bc=Q;Q=d.fitToBounds(Q,this.dy,p);ha+=bc-Q;ha=d.fitToBounds(ha,-Q+O*ca,p-Q);U<n+ca*E&&0<M&&(this.showOnAxis&&(Q-=O/2),pa=new d.Cuboid(h,M,ha,E-a.d3x,O-a.d3y,Ia,Sa,aa,ua,this.lineAlpha,fa,t,r,ba,$a,kb,oa),x.columnHeight=Math.abs(ha),x.columnWidth=Math.abs(M))}}if(pa&&(xa=pa.set,d.setCN(a,pa.set,"graph-"+this.type),d.setCN(a,pa.set,"graph-"+this.id),x.className&&d.setCN(a,pa.set,x.className,!0),x.columnGraphics=xa,xa.translate(U,Q),this.columnsSet.push(xa),(x.url||this.showHandOnHover)&&xa.setAttr("cursor","pointer"),!P)){"none"==I&&(J=r?(this.end+1-K)*D-c:D*K+c);"3d"==I&&(r?(J=(this.end+1-K)*D-c-1E3*this.depthCount,ya+=E*this.columnIndex,ia+=E*this.columnIndex,x.y+=E*this.columnIndex):(J=(D-c)*(K+1)+1E3*this.depthCount,za+=O*this.columnIndex,ja+=O*this.columnIndex,x.y+=O*this.columnIndex));if("regular"==I||"100%"==I)J=r?0<Ca.value?(this.end+1-K)*D+c:(this.end+1-K)*D-c:0<Ca.value?D*K+c:D*K-c;this.columnsArray.push({column:pa,depth:J});x.x=r?Q+M/2:U+M/2;this.ownColumns.push(pa);this.animateColumns(pa,K,G,N,F,L);this.addListeners(xa,x)}}break;case"candlestick":if(!isNaN(na)&&!isNaN(Y)){var Ua,ab;ua=Ba;void 0!=x.lineColor&&(ua=x.lineColor);if(r){if(Q=F-k/2,U=N,M=k,Q+M>p&&(M=p-Q),0>Q&&(M+=Q,Q=0),Q<p&&0<M){var zb,Ab;Y>na?(zb=[G,Pa],Ab=[N,Oa]):(zb=[N,Pa],Ab=[G,Oa]);!isNaN(Pa)&&!isNaN(Oa)&&F<p&&0<F&&(Ua=d.line(h,zb,[F,F],ua,V,aa),ab=d.line(h,Ab,[F,F],ua,V,aa));ha=G-N;pa=new d.Cuboid(h,ha,M,E,O,Ia,Wa,aa,ua,V,fa,t,r,ba,$a,kb,oa)}}else if(U=G-k/2,Q=L+aa/2,M=k,U+M>n&&(M=n-U),0>U&&(M+=U,U=0),ha=F-L,U<n&&0<M){xb&&Y>=na&&(Sa=0);var pa=new d.Cuboid(h,M,ha,E,O,Ia,Sa,aa,ua,V,fa,t,r,ba,$a,kb,oa),Bb,Cb;Y>na?(Bb=[F,Fa],Cb=[L,Ea]):(Bb=[L,Fa],Cb=[F,Ea]);!isNaN(Fa)&&!isNaN(Ea)&&G<n&&0<G&&(Ua=d.line(h,[G,G],Bb,ua,V,aa),ab=d.line(h,[G,G],Cb,ua,V,aa),d.setCN(a,Ua,this.bcn+"line-high"),x.className&&d.setCN(a,Ua,x.className,!0),d.setCN(a,ab,this.bcn+"line-low"),x.className&&d.setCN(a,ab,x.className,!0))}pa&&(xa=pa.set,x.columnGraphics=xa,da.push(xa),xa.translate(U,Q-aa/2),(x.url||this.showHandOnHover)&&xa.setAttr("cursor","pointer"),Ua&&(da.push(Ua),da.push(ab)),ya=G,za=F,r?(ja=F,ia=G,"open"==l&&(ia=N),"high"==l&&(ia=Pa),"low"==l&&(ia=Oa)):(ja=F,"open"==l&&(ja=L),"high"==l&&(ja=Fa),"low"==l&&(ja=Ea),ia=G),P||(x.x=r?Q+M/2:U+M/2,this.animateColumns(pa,K,G,N,F,L),this.addListeners(xa,x)))}break;case"ohlc":if(!(isNaN(na)||isNaN(vb)||isNaN(wb)||isNaN(Y))){var Ob=h.set();da.push(Ob);Y<na&&(x.isNegative=!0,void 0!=Da&&(Ba=Da));var mb,nb,ob;if(r){var Db=F-k/2,Db=d.fitToBounds(Db,0,p),Pb=d.fitToBounds(F,0,p),Eb=F+k/2,Eb=d.fitToBounds(Eb,0,p);nb=d.line(h,[N,N],[Db,Pb],Ba,V,aa,ba);0<F&&F<p&&(mb=d.line(h,[Oa,Pa],[F,F],Ba,V,aa,ba));ob=d.line(h,[G,G],[Pb,Eb],Ba,V,aa,ba);ja=F;ia=G;"open"==l&&(ia=N);"high"==l&&(ia=Pa);"low"==l&&(ia=Oa)}else{var Fb=G-k/2,Fb=d.fitToBounds(Fb,0,n),Qb=d.fitToBounds(G,0,n),Gb=G+k/2,Gb=d.fitToBounds(Gb,0,n);nb=d.line(h,[Fb,Qb],[L,L],Ba,V,aa,ba);0<G&&G<n&&(mb=d.line(h,[G,G],[Ea,Fa],Ba,V,aa,ba));ob=d.line(h,[Qb,Gb],[F,F],Ba,V,aa,ba);ja=F;"open"==l&&(ja=L);"high"==l&&(ja=Fa);"low"==l&&(ja=Ea);ia=G}da.push(nb);da.push(mb);da.push(ob);d.setCN(a,nb,this.bcn+"stroke-open");d.setCN(a,ob,this.bcn+"stroke-close");d.setCN(a,mb,this.bcn+"stroke");x.className&&d.setCN(a,Ob,x.className,!0);ya=G;za=F}}if(!P&&!isNaN(Y)){var Rb=this.hideBulletsCount;if(this.end-this.start<=Rb||0===Rb){var Sb=this.createBullet(x,ia,ja,K),Tb=this.labelText;if(Tb&&Sb){var Hb=this.createLabel(x,ia,ja,Tb);(Hb=this.positionLabel(ya,za,Hb,Sb,M,ha))&&this.allBullets.push(Hb)}if("regular"==I||"100%"==I){var Ub=f.totalText;if(Ub){var Va=this.createLabel(x,0,0,Ub,f.totalTextColor);this.allBullets.push(Va);var Vb=Va.getBBox(),Wb=Vb.width,Xb=Vb.height,bb,cb,pb=f.totalTextOffset,Yb=f.totals[K];Yb&&Yb.remove();var db=0;"column"!=g&&(db=this.bulletSize);r?(cb=F,bb=0>Y?G-Wb/2-2-db-pb:G+Wb/2+3+db+pb):(bb=G,cb=0>Y?F+Xb/2+db+pb:F-Xb/2-3-db-pb);Va.translate(bb,cb);f.totals[K]=Va;r?(0>cb||cb>p)&&Va.remove():(0>bb||bb>n)&&Va.remove()}}}}}}if("line"==g||"step"==g||"smoothedLine"==g)"smoothedLine"==g?this.drawSmoothedGraph(y,v,S,T):this.drawLineGraph(y,v,S,T),P||this.launchAnimation();this.bulletsHidden&&this.hideBullets();this.customBulletsHidden&&this.hideCustomBullets()},animateColumns:function(a,b){var c=this,e=c.chart.startDuration;0<e&&!c.animationPlayed&&(c.seqAn?(a.set.hide(),c.animationArray.push(a),e=setTimeout(function(){c.animate.call(c)},e/(c.end-c.start+1)*(b-c.start)*1E3),c.timeOuts.push(e)):c.animate(a))},createLabel:function(a,b,c,e,h){var f=this.chart,g=a.labelColor;g||(g=this.color);g||(g=f.color);h&&(g=h);h=this.fontSize;void 0===h&&(this.fontSize=h=f.fontSize);var k=this.labelFunction;e=f.formatString(e,a);e=d.cleanFromEmpty(e);k&&(e=k(a,e));a=d.text(this.container,e,g,f.fontFamily,h);a.node.style.pointerEvents="none";a.translate(b,c);this.bulletSet.push(a);return a},positiveClip:function(a){a.clipRect(this.pmx,this.pmy,this.pmw,this.pmh)},negativeClip:function(a){a.clipRect(this.nmx,this.nmy,this.nmw,this.nmh)},drawLineGraph:function(a,b,c,e){var h=this;if(1<a.length){var f=h.set,g=h.chart,k=h.container,l=k.set(),m=k.set();f.push(m);f.push(l);var n=h.lineAlpha,p=h.lineThickness,f=h.fillAlphas,q=h.lineColorR,r=h.negativeLineAlpha;isNaN(r)&&(r=n);var u=h.lineColorSwitched;u&&(q=u);var u=h.fillColorsR,t=h.fillColorsSwitched;t&&(u=t);var z=h.dashLength;(t=h.dashLengthSwitched)&&(z=t);var t=h.negativeLineColor,y=h.negativeFillColors,v=h.negativeFillAlphas,w=h.baseCoord;0!==h.negativeBase&&(w=h.valueAxis.getCoordinate(h.negativeBase),w>h.height&&(w=h.height),0>w&&(w=0));n=d.line(k,a,b,q,n,p,z,!1,!0);d.setCN(g,n,h.bcn+"stroke");l.push(n);l.click(function(a){h.handleGraphEvent(a,"clickGraph")}).mouseover(function(a){h.handleGraphEvent(a,"rollOverGraph")}).mouseout(function(a){h.handleGraphEvent(a,"rollOutGraph")});void 0===t||h.useNegativeColorIfDown||(p=d.line(k,a,b,t,r,p,z,!1,!0),d.setCN(g,p,h.bcn+"stroke"),d.setCN(g,p,h.bcn+"stroke-negative"),m.push(p));if(0<f||0<v)if(p=a.join(";").split(";"),r=b.join(";").split(";"),n=g.type,"serial"==n||"radar"==n?0<c.length?(c.reverse(),e.reverse(),p=a.concat(c),r=b.concat(e)):"radar"==n?(r.push(0),p.push(0)):h.rotate?(r.push(r[r.length-
1]),p.push(w),r.push(r[0]),p.push(w),r.push(r[0]),p.push(p[0])):(p.push(p[p.length-1]),r.push(w),p.push(p[0]),r.push(w),p.push(a[0]),r.push(r[0])):"xy"==n&&(b=h.fillToAxis)&&(d.isString(b)&&(b=g.getValueAxisById(b)),"H"==b.orientation?(w="top"==b.position?0:b.viH,p.push(p[p.length-1]),r.push(w),p.push(p[0]),r.push(w),p.push(a[0]),r.push(r[0])):(w="left"==b.position?0:b.viW,r.push(r[r.length-1]),p.push(w),r.push(r[0]),p.push(w),r.push(r[0]),p.push(p[0]))),a=h.gradientRotation,0<f&&(b=d.polygon(k,p,r,u,f,1,"#000",0,a),b.pattern(h.pattern,NaN,g.path),d.setCN(g,b,h.bcn+"fill"),l.push(b)),y||void 0!==t)isNaN(v)&&(v=f),y||(y=t),k=d.polygon(k,p,r,y,v,1,"#000",0,a),d.setCN(g,k,h.bcn+"fill"),d.setCN(g,k,h.bcn+"fill-negative"),k.pattern(h.pattern,NaN,g.path),m.push(k),m.click(function(a){h.handleGraphEvent(a,"clickGraph")}).mouseover(function(a){h.handleGraphEvent(a,"rollOverGraph")}).mouseout(function(a){h.handleGraphEvent(a,"rollOutGraph")});h.applyMask(m,l)}},applyMask:function(a,b){var c=a.length();"serial"!=this.chart.type||this.scrollbar||(this.positiveClip(b),0<c&&this.negativeClip(a))},drawSmoothedGraph:function(a,b,c,e){if(1<a.length){var h=this.set,f=this.chart,g=this.container,k=g.set(),l=g.set();h.push(l);h.push(k);var m=this.lineAlpha,n=this.lineThickness,h=this.dashLength,p=this.fillAlphas,q=this.lineColorR,r=this.fillColorsR,u=this.negativeLineColor,t=this.negativeFillColors,z=this.negativeFillAlphas,y=this.baseCoord,v=this.lineColorSwitched;v&&(q=v);(v=this.fillColorsSwitched)&&(r=v);v=this.negativeLineAlpha;isNaN(v)&&(v=m);m=new d.Bezier(g,a,b,q,m,n,r,0,h);d.setCN(f,m,this.bcn+"stroke");k.push(m.path);void 0!==u&&(n=new d.Bezier(g,a,b,u,v,n,r,0,h),d.setCN(f,n,this.bcn+"stroke"),d.setCN(f,n,this.bcn+"stroke-negative"),l.push(n.path));0<p&&(m=a.join(";").split(";"),q=b.join(";").split(";"),n="",0<c.length?(c.push("M"),e.push("M"),c.reverse(),e.reverse(),m=a.concat(c),q=b.concat(e)):(this.rotate?(n+=" L"+y+","+b[b.length-1],n+=" L"+y+","+b[0]):(n+=" L"+a[a.length-1]+","+y,n+=" L"+a[0]+","+y),n+=" L"+a[0]+","+b[0]),c=new d.Bezier(g,m,q,NaN,0,0,r,p,h,n),d.setCN(f,c,this.bcn+"fill"),c.path.pattern(this.pattern,NaN,f.path),k.push(c.path),t||void 0!==u)&&(z||(z=p),t||(t=u),a=new d.Bezier(g,a,b,NaN,0,0,t,z,h,n),a.path.pattern(this.pattern,NaN,f.path),d.setCN(f,a,this.bcn+"fill"),d.setCN(f,a,this.bcn+"fill-negative"),l.push(a.path));this.applyMask(l,k)}},launchAnimation:function(){var a=this,b=a.chart.startDuration;if(0<b&&!a.animationPlayed){var c=a.set,e=a.bulletSet;d.VML||(c.attr({opacity:a.startAlpha}),e.attr({opacity:a.startAlpha}));c.hide();e.hide();a.seqAn?(b=setTimeout(function(){a.animateGraphs.call(a)},a.index*b*1E3),a.timeOuts.push(b)):a.animateGraphs()}},animateGraphs:function(){var a=this.chart,b=this.set,c=this.bulletSet,e=this.x,d=this.y;b.show();c.show();var f=a.startDuration,a=a.startEffect;b&&(this.rotate?(b.translate(-1E3,d),c.translate(-1E3,d)):(b.translate(e,-1E3),c.translate(e,-1E3)),b.animate({opacity:1,translate:e+","+d},f,a),c.animate({opacity:1,translate:e+","+d},f,a))},animate:function(a){var b=this.chart,c=this.animationArray;!a&&0<c.length&&(a=c[0],c.shift());c=d[d.getEffect(b.startEffect)];b=b.startDuration;a&&(this.rotate?a.animateWidth(b,c):a.animateHeight(b,c),a.set.show())},legendKeyColor:function(){var a=this.legendColor,b=this.lineAlpha;void 0===a&&(a=this.lineColorR,0===b&&(b=this.fillColorsR)&&(a="object"==typeof b?b[0]:b));return a},legendKeyAlpha:function(){var a=this.legendAlpha;void 0===a&&(a=this.lineAlpha,this.fillAlphas>a&&(a=this.fillAlphas),0===a&&(a=this.bulletAlpha),0===a&&(a=1));return a},createBullet:function(a,b,c){if(!isNaN(b)&&!isNaN(c)){var e=this.chart,h=this.container,f=this.bulletOffset,g=this.bulletSize;isNaN(a.bulletSize)||(g=a.bulletSize);var k=a.values.value,l=this.maxValue,m=this.minValue,n=this.maxBulletSize,p=this.minBulletSize;isNaN(l)||(isNaN(k)||(g=(k-m)/(l-m)*(n-p)+p),m==l&&(g=n));l=g;this.bulletAxis&&(g=a.values.error,isNaN(g)||(k=g),g=this.bulletAxis.stepWidth*k);g<this.minBulletSize&&(g=this.minBulletSize);this.rotate?b=a.isNegative?b-f:b+f:c=a.isNegative?c+f:c-f;var q,p=this.bulletColorR;a.lineColor&&(this.bulletColorSwitched=a.lineColor);this.bulletColorSwitched&&(p=this.bulletColorSwitched);a.isNegative&&void 0!==this.bulletColorNegative&&(p=this.bulletColorNegative);void 0!==a.color&&(p=a.color);var r;"xy"==e.type&&this.valueField&&(r=this.pattern,a.pattern&&(r=a.pattern));f=this.bullet;a.bullet&&(f=a.bullet);var k=this.bulletBorderThickness,m=this.bulletBorderColorR,n=this.bulletBorderAlpha,u=this.bulletAlpha;m||(m=p);this.useLineColorForBulletBorder&&(m=this.lineColorR,this.lineColorSwitched&&(m=this.lineColorSwitched));var t=a.alpha;isNaN(t)||(u=t);if("none"!=this.bullet||a.bullet)q=d.bullet(h,f,g,p,u,k,m,n,l,0,r,e.path);if(this.customBullet||a.customBullet)r=this.customBullet,a.customBullet&&(r=a.customBullet),r&&(q&&q.remove(),"function"==typeof r?(q=new r,q.chart=e,a.bulletConfig&&(q.availableSpace=c,q.graph=this,q.graphDataItem=a,q.bulletY=c,a.bulletConfig.minCoord=this.minCoord-
c,q.bulletConfig=a.bulletConfig),q.write(h),q=q.set):(q=h.set(),h=h.image(r,0,0,g,g),q.push(h),this.centerCustomBullets&&h.translate(-g/2,-g/2)));if(q){(a.url||this.showHandOnHover)&&q.setAttr("cursor","pointer");if("serial"==e.type||"gantt"==e.type)if(-.5>b-0||b-0>this.width||c<-g/2||c-0>this.height)q.remove(),q=null;q&&(this.bulletSet.push(q),q.translate(b,c),this.addListeners(q,a),this.allBullets.push(q));a.bx=b;a.by=c;d.setCN(e,q,this.bcn+"bullet");a.className&&d.setCN(e,q,a.className,!0)}q?(q.size=g||0,a.bulletGraphics=q):q={size:0};q.graphDataItem=a;return q}},showBullets:function(){var a=this.allBullets,b;this.bulletsHidden=!1;for(b=0;b<a.length;b++)a[b].show()},hideBullets:function(){var a=this.allBullets,b;this.bulletsHidden=!0;for(b=0;b<a.length;b++)a[b].hide()},showCustomBullets:function(){var a=this.allBullets,b;this.customBulletsHidden=!1;for(b=0;b<a.length;b++)a[b].graphDataItem.customBullet&&a[b].show()},hideCustomBullets:function(){var a=this.allBullets,b;this.customBulletsHidden=!0;for(b=0;b<a.length;b++)a[b].graphDataItem.customBullet&&a[b].hide()},addListeners:function(a,b){var c=this;a.mouseover(function(a){c.handleRollOver(b,a)}).mouseout(function(a){c.handleRollOut(b,a)}).touchend(function(a){c.handleRollOver(b,a);c.chart.panEventsEnabled&&c.handleClick(b,a)}).touchstart(function(a){c.handleRollOver(b,a)}).click(function(a){c.handleClick(b,a)}).dblclick(function(a){c.handleDoubleClick(b,a)}).contextmenu(function(a){c.handleRightClick(b,a)})},handleRollOver:function(a,b){if(a){var c=this.chart,e={type:"rollOverGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("rollOverGraphItem",e);c.fire("rollOverGraphItem",e);clearTimeout(c.hoverInt);e=this.showBalloon;!c.chartCursor||"serial"!=c.type&&"gantt"!=c.type||(e=!1,!c.chartCursor.valueBalloonsEnabled&&this.showBalloon&&(e=!0));if(e){var e=c.formatString(this.balloonText,a,!0),h=this.balloonFunction;h&&(e=h(a,a.graph));e=d.cleanFromEmpty(e);h=c.getBalloonColor(this,a);c.balloon.showBullet=!1;c.balloon.pointerOrientation="V";var f=a.x,g=a.y;c.rotate&&(f=a.y,g=a.x);""!==e?c.showBalloon(e,h,!0,f+c.marginLeftReal,g+c.marginTopReal):this.chart.hideBalloonReal()}else this.chart.hideBalloonReal()}this.handleGraphEvent(b,"rollOverGraph")},handleRollOut:function(a,b){this.chart.hideBalloon();if(a){var c={type:"rollOutGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("rollOutGraphItem",c);this.chart.fire("rollOutGraphItem",c)}this.handleGraphEvent(b,"rollOutGraph")},handleClick:function(a,b){if(a){var c={type:"clickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("clickGraphItem",c);this.chart.fire("clickGraphItem",c);d.getURL(a.url,this.urlTarget)}this.handleGraphEvent(b,"clickGraph")},handleGraphEvent:function(a,b){var c={type:b,graph:this,target:this,chart:this.chart,event:a};this.fire(b,c);this.chart.fire(b,c)},handleRightClick:function(a,b){if(a){var c={type:"rightClickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("rightClickGraphItem",c);this.chart.fire("rightClickGraphItem",c)}},handleDoubleClick:function(a,b){if(a){var c={type:"doubleClickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("doubleClickGraphItem",c);this.chart.fire("doubleClickGraphItem",c)}},zoom:function(a,b){this.start=a;this.end=b;this.draw()},changeOpacity:function(a){var b=this.set;b&&b.setAttr("opacity",a);if(b=this.ownColumns){var c;for(c=0;c<b.length;c++){var e=b[c].set;e&&e.setAttr("opacity",a)}}(b=this.bulletSet)&&b.setAttr("opacity",a)},destroy:function(){d.remove(this.set);d.remove(this.bulletSet);var a=this.timeOuts;if(a){var b;for(b=0;b<a.length;b++)clearTimeout(a[b])}this.timeOuts=[]}})})();(function(){var d=window.AmCharts;d.ChartCursor=d.Class({construct:function(a){this.cname="ChartCursor";this.createEvents("changed","zoomed","onHideCursor","draw","selected","moved");this.enabled=!0;this.cursorAlpha=1;this.selectionAlpha=.2;this.cursorColor="#CC0000";this.categoryBalloonAlpha=1;this.color="#FFFFFF";this.type="cursor";this.zoomed=!1;this.zoomable=!0;this.pan=!1;this.categoryBalloonDateFormat="MMM DD, YYYY";this.categoryBalloonText="[[category]]";this.categoryBalloonEnabled=this.valueBalloonsEnabled=!0;this.rolledOver=!1;this.cursorPosition="middle";this.bulletsEnabled=this.skipZoomDispatch=!1;this.bulletSize=8;this.selectWithoutZooming=this.oneBalloonOnly=!1;this.graphBulletSize=1.7;this.animationDuration=.3;this.zooming=!1;this.adjustment=0;this.avoidBalloonOverlapping=!0;this.leaveCursor=!1;d.applyTheme(this,a,this.cname)},draw:function(){this.destroy();var a=this.chart,b=a.container;this.rotate=a.rotate;this.container=b;b=b.set();b.translate(this.x,this.y);this.set=b;a.cursorSet.push(b);b=new d.AmBalloon;b.className="category";b.chart=a;this.categoryBalloon=b;d.copyProperties(a.balloon,b);b.cornerRadius=0;b.shadowAlpha=0;b.borderThickness=1;b.borderAlpha=1;b.showBullet=!1;var c=this.categoryBalloonColor;void 0===c&&(c=this.cursorColor);b.fillColor=c;b.balloonColor=c;b.fillAlpha=this.categoryBalloonAlpha;b.borderColor=c;b.color=this.color;c=this.valueLineAxis;d.isString(c)&&(c=a.getValueAxisById(c));c||(c=a.valueAxes[0]);this.valueLineAxis=c;this.valueLineBalloonEnabled&&(this.vaBalloon=c=new d.AmBalloon,d.copyProperties(b,c),c.animationDuration=0,this.rotate||(c.pointerOrientation="H"));this.rotate&&(b.pointerOrientation="H");this.extraWidth=0;this.prevX=[];this.prevY=[];this.prevTX=[];this.prevTY=[];if(this.valueBalloonsEnabled)for(b=0;b<a.graphs.length;b++)c=new d.AmBalloon,c.className=a.graphs[b].id,c.chart=a,d.copyProperties(a.balloon,c),a.graphs[b].valueBalloon=c;"cursor"==this.type?this.createCursor():this.createCrosshair()},updateData:function(){var a=this.chart;this.data=a.chartData;this.firstTime=a.firstTime;this.lastTime=a.lastTime},createCursor:function(){var a=this.chart,b=this.cursorAlpha,c=a.categoryAxis,e=this.categoryBalloon,h,f,g,k;g=a.dx;k=a.dy;var l=this.width,m=this.height,n=a.rotate;e.pointerWidth=c.tickLength;n?(h=[0,l,l+g],f=[0,0,k],g=[g,0,0],k=[k,0,m]):(h=[g,0,0],f=[k,0,m],g=[0,l,l+g],k=[0,0,k]);h=d.line(this.container,h,f,this.cursorColor,b,1);d.setCN(a,h,"cursor-line");this.line=h;h.node.style.pointerEvents="none";(f=this.fullRectSet)?(f.push(h),f.translate(this.x,this.y)):this.set.push(h);this.valueLineEnabled&&(h=this.valueLineAlpha,isNaN(h)||(b=h),b=d.line(this.container,g,k,this.cursorColor,b,1),b.node.style.pointerEvents="none",d.setCN(a,b,"cursor-value-line"),this.vLine=b,this.set.push(b));this.setBalloonBounds(e,c,n);(a=this.vaBalloon)&&this.setBalloonBounds(a,this.valueLineAxis,!n);this.hideCursor()},createCrosshair:function(){var a=this.cursorAlpha,b=this.container,c=d.line(b,[0,0],[0,this.height],this.cursorColor,a,1),a=d.line(b,[0,this.width],[0,0],this.cursorColor,a,1);d.setCN(this.chart,c,"cursor-line");d.setCN(this.chart,a,"cursor-line");this.set.push(c);this.set.push(a);this.vLine=c;this.hLine=a;this.hideCursor()},update:function(){var a=this.chart;if(a)if(a.mouseIsOver){var b=a.mouseX-this.x,c=a.mouseY-this.y;-.5<b&&b<this.width+1&&0<c&&c<this.height?((this.valueLineEnabled||this.valueLineBalloonEnabled)&&this.updateVLine(b,c),this.setPosition(),this.drawing?this.rolledOver||a.setMouseCursor("crosshair"):this.pan&&(this.rolledOver||a.setMouseCursor("move")),this.rolledOver=!0):this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)}else this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)},updateVLine:function(a,b){var c=this.vLine,e=this.vaBalloon;if((c||e)&&!this.panning&&!this.drawing){c&&c.show();var d=this.valueLineAxis,f,g=this.rotate;g?(c&&c.translate(a,0),d&&(f=d.coordinateToValue(a)),c=a):(c&&c.translate(0,b),d&&(f=d.coordinateToValue(b)),c=b-1);if(e&&!isNaN(f)&&this.prevLineValue!=f){var k=d.formatValue(f,!0);this.setBalloonPosition(e,d,c,!g);e.showBalloon(k)}this.prevLineValue=f}},getMousePosition:function(){var a,b=this.width,c=this.height;a=this.chart;this.rotate?(a=a.mouseY-this.y,0>a&&(a=0),a>c&&(a=c)):(a=a.mouseX-this.x-1,0>a&&(a=0),a>b&&(a=b));return a},updateCrosshair:function(){var a=this.chart,b=a.mouseX-this.x,c=a.mouseY-this.y,e=this.vLine,h=this.hLine,b=d.fitToBounds(b,0,this.width),c=d.fitToBounds(c,0,this.height);e&&0<this.cursorAlpha&&(e.show(),h.show(),e.translate(b,0),h.translate(0,c));this.zooming&&(a.hideXScrollbar&&(b=NaN),a.hideYScrollbar&&(c=NaN),this.updateSelectionSize(b,c));this.fireMoved();a.mouseIsOver||this.zooming||this.hideCursor()},fireMoved:function(){var a=this.chart,b={type:"moved",target:this};b.chart=a;b.zooming=this.zooming;b.x=a.mouseX-this.x;b.y=a.mouseY-this.y;this.fire("moved",b)},updateSelectionSize:function(a,b){d.remove(this.selection);var c=this.selectionPosX,e=this.selectionPosY,h=0,f=0,g=this.width,k=this.height;isNaN(a)||(c>a&&(h=a,g=c-a),c<a&&(h=c,g=a-c),c==a&&(h=a,g=0),g+=this.extraWidth,h-=this.extraWidth/2);isNaN(b)||(e>b&&(f=b,k=e-b),e<b&&(f=e,k=b-e),e==b&&(f=b,k=0),k+=this.extraWidth,f-=this.extraWidth/2);0<g&&0<k&&(c=d.rect(this.container,g,k,this.cursorColor,this.selectionAlpha),d.setCN(this.chart,c,"cursor-selection"),c.translate(h+this.x,f+this.y),this.selection=c)},arrangeBalloons:function(){var a=this.valueBalloons,b=this.x,c=this.y,e=this.height+c;a.sort(this.compareY);var d;for(d=0;d<a.length;d++){var f=a[d].balloon;f.setBounds(b,c,b+this.width,e);f.prevX=this.prevX[d];f.prevY=this.prevY[d];f.prevTX=this.prevTX[d];f.prevTY=this.prevTY[d];f.draw();e=f.yPos-3}this.arrangeBalloons2()},compareY:function(a,b){return a.yy<b.yy?1:-1},arrangeBalloons2:function(){var a=this.valueBalloons;a.reverse();var b,c=this.x,e,d,f=a.length;for(d=0;d<f;d++){var g=a[d].balloon;b=g.bottom;var k=g.bottom-g.yPos,l=f-d-1;0<d&&b-k<e+3&&(g.setBounds(c,e+3,c+this.width,e+k+3),g.prevX=this.prevX[l],g.prevY=this.prevY[l],g.prevTX=this.prevTX[l],g.prevTY=this.prevTY[l],g.draw());g.set&&g.set.show();this.prevX[l]=g.prevX;this.prevY[l]=g.prevY;this.prevTX[l]=g.prevTX;this.prevTY[l]=g.prevTY;e=g.bottom}},showBullets:function(){d.remove(this.allBullets);var a=this.container,b=a.set();this.set.push(b);this.set.show();this.allBullets=b;var b=this.chart.graphs,c;for(c=0;c<b.length;c++){var e=b[c];if(!e.hidden&&e.balloonText){var h=this.data[this.index].axes[e.valueAxis.id].graphs[e.id],f=h.y;if(!isNaN(f)){var g,k;g=h.x;this.rotate?(k=f,f=g):k=g;e=d.circle(a,this.bulletSize/2,this.chart.getBalloonColor(e,h,!0),e.cursorBulletAlpha);e.translate(k,f);this.allBullets.push(e)}}}},destroy:function(){this.clear();d.remove(this.selection);this.selection=null;var a=this.categoryBalloon;a&&a.destroy();(a=this.vaBalloon)&&a.destroy();this.destroyValueBalloons();d.remove(this.set)},clear:function(){},destroyValueBalloons:function(){var a=this.valueBalloons;if(a){var b;for(b=0;b<a.length;b++)a[b].balloon.hide()}},zoom:function(a,b,c,e){var h=this.chart;this.destroyValueBalloons();this.zooming=!1;var f;this.rotate?this.selectionPosY=f=h.mouseY:this.selectionPosX=f=h.mouseX;this.start=a;this.end=b;this.startTime=c;this.endTime=e;this.zoomed=!0;e=h.categoryAxis;f=this.rotate;b=this.width;c=this.height;a=e.stepWidth;if(this.fullWidth){var g=1;e.parseDates&&!e.equalSpacing&&(g=e.minDuration());f?this.extraWidth=c=a*g:(this.extraWidth=b=a*g,this.categoryBalloon.minWidth=b);this.line&&this.line.remove();this.line=d.rect(this.container,b,c,this.cursorColor,this.cursorAlpha,0);this.line.node.style.pointerEvents="none";d.setCN(h,this.line,"cursor-fill");this.fullRectSet&&this.fullRectSet.push(this.line)}this.stepWidth=a;this.tempVal=this.valueBalloonsEnabled;this.valueBalloonsEnabled=!1;this.setPosition();this.valueBalloonsEnabled=this.tempVal;this.hideCursor()},hideObj:function(a){a&&a.hide()},hideCursor:function(a){void 0===a&&(a=!0);this.leaveCursor||(this.hideObj(this.set),this.hideObj(this.categoryBalloon),this.hideObj(this.line),this.hideObj(this.vLine),this.hideObj(this.hLine),this.hideObj(this.vaBalloon),this.hideObj(this.allBullets),this.destroyValueBalloons(),this.selectWithoutZooming||d.remove(this.selection),this.previousIndex=NaN,a&&this.fire("onHideCursor",{type:"onHideCursor",chart:this.chart,target:this}),this.drawing||this.chart.setMouseCursor("auto"),this.normalizeBulletSize())},setPosition:function(a,b,c){void 0===b&&(b=!0);if("cursor"==this.type){if(this.tempPosition=NaN,d.ifArray(this.data))isNaN(a)&&(a=this.getMousePosition()),(a!=this.previousMousePosition||!0===this.zoomed||this.oneBalloonOnly)&&!isNaN(a)&&("mouse"==this.cursorPosition&&(this.tempPosition=a),isNaN(c)&&(c=this.chart.categoryAxis.xToIndex(a)),c!=this.previousIndex||this.zoomed||"mouse"==this.cursorPosition||this.oneBalloonOnly)&&(this.updateCursor(c,b),this.zoomed=!1),this.previousMousePosition=a}else this.updateCrosshair()},normalizeBulletSize:function(){var a=this.resizedBullets;if(a)for(var b=0;b<a.length;b++){var c=a[b],e=c.bulletGraphics;e&&(e.translate(c.bx,c.by,1),c=c.graph,isNaN(this.graphBulletAlpha)||(e.setAttr("fill-opacity",c.bulletAlpha),e.setAttr("stroke-opacity",c.bulletBorderAlpha)))}},updateCursor:function(a,b){var c=this.chart,e=this.fullWidth,h=c.mouseX-this.x,f=c.mouseY-this.y;this.drawingNow&&(d.remove(this.drawingLine),this.drawingLine=d.line(this.container,[this.x+this.drawStartX,this.x+h],[this.y+this.drawStartY,this.y+f],this.cursorColor,1,1));if(this.enabled){void 0===b&&(b=!0);this.index=a+=this.adjustment;var g=c.categoryAxis,k=c.dx,l=c.dy,m=this.x+1,n=this.y+1,p=this.width,q=this.height,r=this.data[a],u;this.data[a+1]&&(u=this.data[a+1]);this.fireMoved();if(r){var t=r.x[g.id],z=c.rotate,y=this.stepWidth,v=this.categoryBalloon,w=this.firstTime,A=this.lastTime,B=this.cursorPosition,C=this.zooming,D=this.panning,J=c.graphs;if(c.mouseIsOver||C||D||this.forceShow)if(this.forceShow=!1,D){var k=this.panClickPos,c=this.panClickEndTime,C=this.panClickStartTime,E=this.panClickEnd,m=this.panClickStart,h=(z?k-f:k-h)/y;if(!g.parseDates||g.equalSpacing)h=Math.round(h);0!==h&&(k={type:"zoomed",target:this},k.chart=this.chart,g.parseDates&&!g.equalSpacing?(c+h>A&&(h=A-c),C+h<w&&(h=w-C),k.start=Math.round(C+h),k.end=Math.round(c+h),this.fire(k.type,k)):E+h>=this.data.length||0>m+h||(k.start=m+h,k.end=E+h,this.fire(k.type,k)))}else{"start"==B?t-=g.cellWidth/2:"mouse"==B&&(c.mouseIsOver?t=z?f-2:h-2:isNaN(this.tempPosition)||(t=this.tempPosition-2));if(z){if(0>t)if(C)t=0;else{this.hideCursor();return}if(t>q+1)if(C)t=q+1;else{this.hideCursor();return}}else{if(0>t)if(C)t=0;else{this.hideCursor();return}if(t>p)if(C)t=p;else{this.hideCursor();return}}w=this.line;0<this.cursorAlpha&&(z?(A=0,y=t+l,e&&(y-=g.cellWidth/2)):(A=t,y=0,e&&(A-=g.cellWidth/2)),B=this.animationDuration,0<B&&!this.zooming?isNaN(this.previousX)?w.translate(A,y):(w.translate(this.previousX,this.previousY),w.animate({translate:A+","+y},B,"easeOutSine")):w.translate(A,y),this.previousX=A,this.previousY=y,w.show());this.linePos=z?t+l:t;C&&(e&&w.hide(),z?this.updateSelectionSize(NaN,t):this.updateSelectionSize(t,NaN));A=!0;C&&(A=!1);this.categoryBalloonEnabled&&A?(this.setBalloonPosition(v,g,t,z),(w=this.categoryBalloonFunction)?v.showBalloon(w(r.category)):(w=t="",g.parseDates?(t=d.formatDate(r.category,this.categoryBalloonDateFormat,c),g=d.changeDate(new Date(r.category),c.categoryAxis.minPeriod,1),w=d.formatDate(g,this.categoryBalloonDateFormat,c),-1!=t.indexOf("fff")&&(t=d.formatMilliseconds(t,r.category),w=d.formatMilliseconds(w,g))):(t=d.fixNewLines(r.category),u&&(w=d.fixNewLines(u.category))),g=this.categoryBalloonText.replace(/\[\[category\]\]/g,String(t)),g=g.replace(/\[\[toCategory\]\]/g,String(w)),v.showBalloon(g))):v.hide();J&&this.bulletsEnabled&&this.showBullets();if(this.oneBalloonOnly){t=Infinity;for(g=0;g<J.length;g++)v=J[g],v.showBalloon&&!v.hidden&&v.balloonText&&(u=r.axes[v.valueAxis.id].graphs[v.id],w=u.y,"top"==v.showBalloonAt&&(w=0),"bottom"==v.showBalloonAt&&(w=this.height),isNaN(w)||(z?Math.abs(h-w)<t&&(t=Math.abs(h-w),E=v):Math.abs(f-w)<t&&(t=Math.abs(f-w),E=v)));this.mostCloseGraph&&(E=this.mostCloseGraph)}if(a!=this.previousIndex||E!=this.previousMostCloseGraph)if(this.normalizeBulletSize(),this.destroyValueBalloons(),this.resizedBullets=[],J&&this.valueBalloonsEnabled&&A&&c.balloon.enabled){this.valueBalloons=A=[];for(g=0;g<J.length;g++)if(v=J[g],w=NaN,(!this.oneBalloonOnly||v==E)&&v.showBalloon&&!v.hidden&&v.balloonText&&("step"==v.type&&"left"==v.stepDirection&&(r=this.data[a+1]),r)){if(u=r.axes[v.valueAxis.id].graphs[v.id])w=u.y;"top"==v.showBalloonAt&&(w=0);"bottom"==v.showBalloonAt&&(w=this.height);if(this.showNextAvailable&&isNaN(w)&&a+1<this.data.length)for(t=a+1;t<this.data.length;t++)if(y=this.data[t])if(u=y.axes[v.valueAxis.id].graphs[v.id],w=u.y,!isNaN(w))break;if(!isNaN(w)){y=u.x;e=!0;if(z){if(t=w,0>y||y>q)e=!1}else if(t=y,y=w,0>t||t>p+k+1)e=!1;e&&(e=this.graphBulletSize,l=this.graphBulletAlpha,1==e&&isNaN(l)||!d.isModern||!(B=u.bulletGraphics)||(B.translate(u.bx,u.by,e),this.resizedBullets.push(u),isNaN(l)||(B.setAttr("fill-opacity",l),B.setAttr("stroke-opacity",l))),e=v.valueBalloon,l=c.getBalloonColor(v,u),e.setBounds(m,n,m+p,n+q),e.pointerOrientation="H",B=this.balloonPointerOrientation,"vertical"==B&&(e.pointerOrientation="V"),"horizontal"==B&&(e.pointerOrientation="H"),e.changeColor(l),void 0!==v.balloonAlpha&&(e.fillAlpha=v.balloonAlpha),void 0!==v.balloonTextColor&&(e.color=v.balloonTextColor),e.setPosition(t+m,y+n),t=c.formatString(v.balloonText,u,!0),(y=v.balloonFunction)&&(t=y(u,v).toString()),""!==t&&(z?e.showBalloon(t):(e.text=t,e.show=!0),A.push({yy:w,balloon:e})),!z&&e.set&&(e.set.hide(),v=e.textDiv)&&(v.style.visibility="hidden"))}}this.avoidBalloonOverlapping&&this.arrangeBalloons()}b?(k={type:"changed"},k.index=a,k.chart=this.chart,k.zooming=C,k.mostCloseGraph=E,k.position=z?f:h,k.target=this,c.fire("changed",k),this.fire("changed",k),this.skipZoomDispatch=!1):(this.skipZoomDispatch=!0,c.updateLegendValues(a));this.previousIndex=a;this.previousMostCloseGraph=E}}}else this.hideCursor()},setBalloonPosition:function(a,b,c,e){var d=b.position,f=b.inside;b=b.axisThickness;var g=this.chart,k=g.dx,g=g.dy,l=this.x,m=this.y,n=this.width,p=this.height;e?(f&&("right"==d?a.setBounds(l,m+g,l+n+k,m+c+g):a.setBounds(l,m+g,l+n+k,m+c)),"right"==d?f?a.setPosition(l+n+k,m+c+g):a.setPosition(l+n+k+b,m+c+g):f?a.setPosition(l,m+c):a.setPosition(l-b,m+c)):"top"==d?f?a.setPosition(l+c+k,m+g):a.setPosition(l+c+k,m+g-b+1):f?a.setPosition(l+c,m+p):a.setPosition(l+c,m+p+b-1)},setBalloonBounds:function(a,b,c){var e=b.position,d=b.inside,f=b.axisThickness,g=b.tickLength,k=this.chart,l=k.dx,k=k.dy,m=this.x,n=this.y,p=this.width,q=this.height;c?(d&&(a.pointerWidth=0),"right"==e?d?a.setBounds(m,n+k,m+p+l,n+q+k):a.setBounds(m+p+l+f,n+k,m+p+1E3,n+q+k):d?a.setBounds(m,n,p+m,q+n):a.setBounds(-1E3,-1E3,m-g-f,n+q+15)):(a.maxWidth=p,b.parseDates&&(g=0,a.pointerWidth=0),"top"==e?d?a.setBounds(m+l,n+k,p+l+m,q+n):a.setBounds(m+l,-1E3,p+l+m,n+k-g-f):d?a.setBounds(m,n,p+m,q+n-g):a.setBounds(m,n+q+g+f-1,m+p,n+q+g+f))},enableDrawing:function(a){this.enabled=!a;this.hideCursor();this.rolledOver=!1;this.drawing=a},isZooming:function(a){a&&a!=this.zooming&&this.handleMouseDown("fake");a||a==this.zooming||this.handleMouseUp()},handleMouseOut:function(){if(this.enabled)if(this.zooming)this.setPosition();else{this.index=void 0;var a={type:"changed",index:void 0,target:this};a.chart=this.chart;this.fire("changed",a);this.hideCursor()}},handleReleaseOutside:function(){this.handleMouseUp()},handleMouseUp:function(){var a=this.chart,b=this.data,c;if(a){var e=a.mouseX-this.x,h=a.mouseY-
this.y;if(this.drawingNow){this.drawingNow=!1;d.remove(this.drawingLine);c=this.drawStartX;var f=this.drawStartY;if(2<Math.abs(c-e)||2<Math.abs(f-h))c={type:"draw",target:this,chart:a,initialX:c,initialY:f,finalX:e,finalY:h},this.fire(c.type,c)}if(this.enabled&&0<b.length){if(this.pan)this.rolledOver=!1;else if(this.zoomable&&this.zooming){c=this.selectWithoutZooming?{type:"selected"}:{type:"zoomed"};c.target=this;c.chart=a;if("cursor"==this.type)this.rotate?this.selectionPosY=h:this.selectionPosX=h=e,4>Math.abs(h-this.initialMouse)&&this.fromIndex==this.index||(this.index<this.fromIndex?(c.end=this.fromIndex,c.start=this.index):(c.end=this.index,c.start=this.fromIndex),h=a.categoryAxis,h.parseDates&&!h.equalSpacing&&(b[c.start]&&(c.start=b[c.start].time),b[c.end]&&(c.end=a.getEndTime(b[c.end].time))),this.skipZoomDispatch||this.fire(c.type,c));else{var g=this.initialMouseX,k=this.initialMouseY;3>Math.abs(e-g)&&3>Math.abs(h-k)||(b=Math.min(g,e),f=Math.min(k,h),e=Math.abs(g-e),h=Math.abs(k-
h),a.hideXScrollbar&&(b=0,e=this.width),a.hideYScrollbar&&(f=0,h=this.height),c.selectionHeight=h,c.selectionWidth=e,c.selectionY=f,c.selectionX=b,this.skipZoomDispatch||this.fire(c.type,c))}this.selectWithoutZooming||d.remove(this.selection)}this.skipZoomDispatch=!1}}this.panning=this.zooming=!1},showCursorAt:function(a){var b=this.chart.categoryAxis;a=b.parseDates?b.dateToCoordinate(a):b.categoryToCoordinate(a);this.previousMousePosition=NaN;this.forceShow=!0;this.setPosition(a,!1)},clearSelection:function(){d.remove(this.selection)},handleMouseDown:function(a){if(this.zoomable||this.pan||this.drawing){var b=this.rotate,c=this.chart,e=c.mouseX-this.x,h=c.mouseY-this.y;if(0<e&&e<this.width&&0<h&&h<this.height||"fake"==a)this.setPosition(),this.selectWithoutZooming&&d.remove(this.selection),this.drawing?(this.drawStartY=h,this.drawStartX=e,this.drawingNow=!0):this.pan?(this.zoomable=!1,c.setMouseCursor("move"),this.panning=!0,this.panClickPos=b?h:e,this.panClickStart=this.start,this.panClickEnd=this.end,this.panClickStartTime=this.startTime,this.panClickEndTime=this.endTime):this.zoomable&&("cursor"==this.type?(this.fromIndex=this.index,b?(this.initialMouse=h,this.selectionPosY=this.linePos):(this.initialMouse=e,this.selectionPosX=this.linePos)):(this.initialMouseX=e,this.initialMouseY=h,this.selectionPosX=e,this.selectionPosY=h),this.zooming=!0)}}})})();(function(){var d=window.AmCharts;d.SimpleChartScrollbar=d.Class({construct:function(a){this.createEvents("zoomed");this.backgroundColor="#D4D4D4";this.backgroundAlpha=1;this.selectedBackgroundColor="#EFEFEF";this.scrollDuration=this.selectedBackgroundAlpha=1;this.resizeEnabled=!0;this.hideResizeGrips=!1;this.scrollbarHeight=20;this.updateOnReleaseOnly=!1;9>document.documentMode&&(this.updateOnReleaseOnly=!0);this.dragIconHeight=this.dragIconWidth=35;this.dragIcon="dragIconRoundBig";d.applyTheme(this,a,"SimpleChartScrollbar")},draw:function(){var a=this;a.destroy();if(a.enabled){var b=a.chart.container,c=a.rotate,e=a.chart,h=b.set();a.set=h;e.scrollbarsSet.push(h);var f,g;c?(f=a.scrollbarHeight,g=e.plotAreaHeight):(g=a.scrollbarHeight,f=e.plotAreaWidth);a.width=f;if((a.height=g)&&f){var k=d.rect(b,f,g,a.backgroundColor,a.backgroundAlpha,1,a.backgroundColor,a.backgroundAlpha);d.setCN(e,k,"scrollbar-bg");a.bg=k;h.push(k);k=d.rect(b,f,g,"#000",.005);h.push(k);a.invisibleBg=k;k.click(function(){a.handleBgClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()}).touchend(function(){a.handleBgClick()});k=d.rect(b,f,g,a.selectedBackgroundColor,a.selectedBackgroundAlpha);d.setCN(e,k,"scrollbar-bg-selected");a.selectedBG=k;h.push(k);f=d.rect(b,f,g,"#000",.005);a.dragger=f;h.push(f);f.mousedown(function(b){a.handleDragStart(b)}).mouseup(function(){a.handleDragStop()}).mouseover(function(){a.handleDraggerOver()}).mouseout(function(){a.handleMouseOut()}).touchstart(function(b){a.handleDragStart(b)}).touchend(function(){a.handleDragStop()});f=e.pathToImages;c?(k=f+a.dragIcon+"H.png",f=a.dragIconWidth,c=a.dragIconHeight):(k=f+a.dragIcon+".png",c=a.dragIconWidth,f=a.dragIconHeight);g=b.image(k,0,0,c,f);d.setCN(e,g,"scrollbar-grip-left");k=b.image(k,0,0,c,f);d.setCN(e,k,"scrollbar-grip-right");var l=10,m=20;e.panEventsEnabled&&(l=25,m=a.scrollbarHeight);var n=d.rect(b,l,m,"#000",.005),p=d.rect(b,l,m,"#000",.005);p.translate(-(l-c)/2,-(m-f)/2);n.translate(-(l-c)/2,-(m-f)/2);c=b.set([g,p]);b=b.set([k,n]);a.iconLeft=c;h.push(a.iconLeft);a.iconRight=b;h.push(b);c.mousedown(function(){a.leftDragStart()}).mouseup(function(){a.leftDragStop()}).mouseover(function(){a.iconRollOver()}).mouseout(function(){a.iconRollOut()}).touchstart(function(){a.leftDragStart()}).touchend(function(){a.leftDragStop()});b.mousedown(function(){a.rightDragStart()}).mouseup(function(){a.rightDragStop()}).mouseover(function(){a.iconRollOver()}).mouseout(function(){a.iconRollOut()}).touchstart(function(){a.rightDragStart()}).touchend(function(){a.rightDragStop()});d.ifArray(e.chartData)?h.show():h.hide();a.hideDragIcons();a.clipDragger(!1)}h.translate(a.x,a.y);h.node.style.msTouchAction="none"}},updateScrollbarSize:function(a,b){a=Math.round(a);b=Math.round(b);var c=this.dragger,e,d,f,g;this.rotate?(e=0,d=a,f=this.width+
1,g=b-a,c.setAttr("height",b-a),c.setAttr("y",d)):(e=a,d=0,f=b-a,g=this.height+1,c.setAttr("width",b-a),c.setAttr("x",e));this.clipAndUpdate(e,d,f,g)},update:function(){var a,b=!1,c,e,d=this.x,f=this.y,g=this.dragger,k=this.getDBox();if(k){c=k.x+d;e=k.y+f;var l=k.width,k=k.height,m=this.rotate,n=this.chart,p=this.width,q=this.height,r=n.mouseX,u=n.mouseY;a=this.initialMouse;this.forceClip&&this.clipDragger(!0);n.mouseIsOver&&(this.dragging&&(n=this.initialCoord,m?(a=n+(u-a),0>a&&(a=0),n=q-k,a>n&&(a=n),g.setAttr("y",a)):(a=n+(r-a),0>a&&(a=0),n=p-l,a>n&&(a=n),g.setAttr("x",a)),this.clipDragger(!0)),this.resizingRight&&(m?(a=u-e,a+e>q+f&&(a=q-e+f),0>a?(this.resizingRight=!1,b=this.resizingLeft=!0):(0===a&&(a=.1),g.setAttr("height",a))):(a=r-c,a+c>p+d&&(a=p-c+d),0>a?(this.resizingRight=!1,b=this.resizingLeft=!0):(0===a&&(a=.1),g.setAttr("width",a))),this.clipDragger(!0)),this.resizingLeft&&(m?(c=e,e=u,e<f&&(e=f),e>q+f&&(e=q+f),a=!0===b?c-e:k+c-e,0>a?(this.resizingRight=!0,this.resizingLeft=!1,g.setAttr("y",c+k-f)):(0===a&&(a=.1),g.setAttr("y",e-f),g.setAttr("height",a))):(e=r,e<d&&(e=d),e>p+d&&(e=p+d),a=!0===b?c-e:l+c-e,0>a?(this.resizingRight=!0,this.resizingLeft=!1,g.setAttr("x",c+l-d)):(0===a&&(a=.1),g.setAttr("x",e-d),g.setAttr("width",a))),this.clipDragger(!0)))}},stopForceClip:function(){this.forceClip=!1},clipDragger:function(a){var b=this.getDBox();if(b){var c=b.x,e=b.y,d=b.width,b=b.height,f=!1;if(this.rotate){if(c=0,d=this.width+1,this.clipY!=e||this.clipH!=b)f=!0}else if(e=0,b=this.height+1,this.clipX!=c||this.clipW!=d)f=!0;f&&(this.clipAndUpdate(c,e,d,b),a&&(this.updateOnReleaseOnly||this.dispatchScrollbarEvent()))}},maskGraphs:function(){},clipAndUpdate:function(a,b,c,e){this.clipX=a;this.clipY=b;this.clipW=c;this.clipH=e;this.selectedBG.clipRect(a,b,c,e);this.updateDragIconPositions();this.maskGraphs(a,b,c,e)},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var a=this.chart;a.hideBalloon();var b=this.getDBox(),c=b.x,e=b.y,d=b.width,b=b.height;this.rotate?(c=e,d=this.height/b):d=this.width/d;a={type:"zoomed",position:c,chart:a,target:this,multiplier:d};this.fire(a.type,a)}},updateDragIconPositions:function(){var a=this.getDBox(),b=a.x,c=a.y,e=this.iconLeft,d=this.iconRight,f,g,k=this.scrollbarHeight;this.rotate?(f=this.dragIconWidth,g=this.dragIconHeight,e.translate((k-g)/2,c-f/2),d.translate((k-g)/2,c+a.height-f/2)):(f=this.dragIconHeight,g=this.dragIconWidth,e.translate(b-g/2,(k-f)/2),d.translate(b-g/2+a.width,(k-f)/2))},showDragIcons:function(){this.resizeEnabled&&(this.iconLeft.show(),this.iconRight.show())},hideDragIcons:function(){if(!this.resizingLeft&&!this.resizingRight&&!this.dragging){if(this.hideResizeGrips||!this.resizeEnabled)this.iconLeft.hide(),this.iconRight.hide();this.removeCursors()}},removeCursors:function(){this.chart.setMouseCursor("auto")},relativeZoom:function(a,b){this.enabled&&(this.dragger.stop(),this.multiplier=a,this.position=b,this.updateScrollbarSize(b,this.rotate?b+this.height/a:b+this.width/a),this.clipDragger())},destroy:function(){this.clear();d.remove(this.set);d.remove(this.iconRight);d.remove(this.iconLeft)},clear:function(){},handleDragStart:function(){if(this.enabled){var a=this.chart;this.dragger.stop();this.removeCursors();this.dragging=!0;var b=this.getDBox();this.rotate?(this.initialCoord=b.y,this.initialMouse=a.mouseY):(this.initialCoord=b.x,this.initialMouse=a.mouseX)}},handleDragStop:function(){this.updateOnReleaseOnly&&(this.update(),this.skipEvent=!1,this.dispatchScrollbarEvent());this.dragging=!1;this.mouseIsOver&&this.removeCursors();this.update()},handleDraggerOver:function(){this.handleMouseOver()},leftDragStart:function(){this.dragger.stop();this.resizingLeft=!0},leftDragStop:function(){this.resizingLeft=!1;this.mouseIsOver||this.removeCursors();this.updateOnRelease()},rightDragStart:function(){this.dragger.stop();this.resizingRight=!0},rightDragStop:function(){this.resizingRight=!1;this.mouseIsOver||this.removeCursors();this.updateOnRelease()},iconRollOut:function(){this.removeCursors()},iconRollOver:function(){this.rotate?this.chart.setMouseCursor("n-resize"):this.chart.setMouseCursor("e-resize");this.handleMouseOver()},getDBox:function(){if(this.dragger)return this.dragger.getBBox()},handleBgClick:function(){var a=this;if(!a.resizingRight&&!a.resizingLeft){a.zooming=!0;var b,c,e=a.scrollDuration,h=a.dragger;b=a.getDBox();var f=b.height,g=b.width;c=a.chart;var k=a.y,l=a.x,m=a.rotate;m?(b="y",c=c.mouseY-f/2-k,c=d.fitToBounds(c,0,a.height-f)):(b="x",c=c.mouseX-g/2-l,c=d.fitToBounds(c,0,a.width-g));a.updateOnReleaseOnly?(a.skipEvent=!1,h.setAttr(b,c),a.dispatchScrollbarEvent(),a.clipDragger()):(c=Math.round(c),m?h.animate({y:c},e,">"):h.animate({x:c},e,">"),a.forceClip=!0,clearTimeout(a.forceTO),a.forceTO=setTimeout(function(){a.stopForceClip.call(a)},5E3*e))}},updateOnRelease:function(){this.updateOnReleaseOnly&&(this.update(),this.skipEvent=!1,this.dispatchScrollbarEvent())},handleReleaseOutside:function(){if(this.set){if(this.resizingLeft||this.resizingRight||this.dragging)this.updateOnRelease(),this.removeCursors();this.mouseIsOver=this.dragging=this.resizingRight=this.resizingLeft=!1;this.hideDragIcons();this.update()}},handleMouseOver:function(){this.mouseIsOver=!0;this.showDragIcons()},handleMouseOut:function(){this.mouseIsOver=!1;this.hideDragIcons()}})})();(function(){var d=window.AmCharts;d.ChartScrollbar=d.Class({inherits:d.SimpleChartScrollbar,construct:function(a){this.cname="ChartScrollbar";d.ChartScrollbar.base.construct.call(this,a);this.enabled=!0;this.graphLineColor="#BBBBBB";this.graphLineAlpha=0;this.graphFillColor="#BBBBBB";this.graphFillAlpha=1;this.selectedGraphLineColor="#888888";this.selectedGraphLineAlpha=0;this.selectedGraphFillColor="#888888";this.selectedGraphFillAlpha=1;this.gridCount=0;this.gridColor="#FFFFFF";this.gridAlpha=.7;this.skipEvent=this.autoGridCount=!1;this.color="#FFFFFF";this.scrollbarCreated=!1;this.offset=0;this.oppositeAxis=!0;d.applyTheme(this,a,this.cname)},init:function(){var a=this.categoryAxis,b=this.chart;a||(this.categoryAxis=a=new d.CategoryAxis);a.chart=b;a.id="scrollbar";a.dateFormats=b.categoryAxis.dateFormats;a.markPeriodChange=b.categoryAxis.markPeriodChange;a.boldPeriodBeginning=b.categoryAxis.boldPeriodBeginning;a.labelFunction=b.categoryAxis.labelFunction;a.axisItemRenderer=d.RecItem;a.axisRenderer=d.RecAxis;a.guideFillRenderer=d.RecFill;a.inside=!0;a.fontSize=this.fontSize;a.tickLength=0;a.axisAlpha=0;d.isString(this.graph)&&(this.graph=d.getObjById(b.graphs,this.graph));if(a=this.graph){var c=this.valueAxis;c||(this.valueAxis=c=new d.ValueAxis,c.visible=!1,c.scrollbar=!0,c.axisItemRenderer=d.RecItem,c.axisRenderer=d.RecAxis,c.guideFillRenderer=d.RecFill,c.labelsEnabled=!1,c.chart=b);b=this.unselectedGraph;b||(b=new d.AmGraph,b.scrollbar=!0,this.unselectedGraph=b,b.negativeBase=a.negativeBase,b.noStepRisers=a.noStepRisers);b=this.selectedGraph;b||(b=new d.AmGraph,b.scrollbar=!0,this.selectedGraph=b,b.negativeBase=a.negativeBase,b.noStepRisers=a.noStepRisers)}this.scrollbarCreated=!0},draw:function(){var a=this;d.ChartScrollbar.base.draw.call(a);if(a.enabled){a.scrollbarCreated||a.init();var b=a.chart,c=b.chartData,e=a.categoryAxis,h=a.rotate,f=a.x,g=a.y,k=a.width,l=a.height,m=b.categoryAxis,n=a.set;e.setOrientation(!h);e.parseDates=m.parseDates;e.rotate=h;e.equalSpacing=m.equalSpacing;e.minPeriod=m.minPeriod;e.startOnAxis=m.startOnAxis;e.viW=k;e.viH=l;e.width=k;e.height=l;e.gridCount=a.gridCount;e.gridColor=a.gridColor;e.gridAlpha=a.gridAlpha;e.color=a.color;e.tickLength=0;e.axisAlpha=0;e.autoGridCount=a.autoGridCount;e.parseDates&&!e.equalSpacing&&e.timeZoom(b.firstTime,b.lastTime);e.zoom(0,c.length-1);if(m=a.graph){var p=a.valueAxis,q=m.valueAxis;p.id=q.id;p.rotate=h;p.setOrientation(h);p.width=k;p.height=l;p.viW=k;p.viH=l;p.dataProvider=c;p.reversed=q.reversed;p.logarithmic=q.logarithmic;p.gridAlpha=0;p.axisAlpha=0;n.push(p.set);h?(p.y=g,p.x=0):(p.x=f,p.y=0);var f=Infinity,g=-Infinity,r;for(r=0;r<c.length;r++){var u=c[r].axes[q.id].graphs[m.id].values,t;for(t in u)if(u.hasOwnProperty(t)&&"percents"!=t&&"total"!=t){var z=u[t];z<f&&(f=z);z>g&&(g=z)}}Infinity!=f&&(p.minimum=f);-Infinity!=g&&(p.maximum=g+.1*(g-f));f==g&&(--p.minimum,p.maximum+=1);void 0!==a.minimum&&(p.minimum=a.minimum);void 0!==a.maximum&&(p.maximum=a.maximum);p.zoom(0,c.length-1);t=a.unselectedGraph;t.id=m.id;t.bcn="scrollbar-graph-";t.rotate=h;t.chart=b;t.data=c;t.valueAxis=p;t.chart=m.chart;t.categoryAxis=a.categoryAxis;t.periodSpan=m.periodSpan;t.valueField=m.valueField;t.openField=m.openField;t.closeField=m.closeField;t.highField=m.highField;t.lowField=m.lowField;t.lineAlpha=a.graphLineAlpha;t.lineColorR=a.graphLineColor;t.fillAlphas=a.graphFillAlpha;t.fillColorsR=a.graphFillColor;t.connect=m.connect;t.hidden=m.hidden;t.width=k;t.height=l;t.pointPosition=m.pointPosition;t.stepDirection=m.stepDirection;t.periodSpan=m.periodSpan;q=a.selectedGraph;q.id=m.id;q.bcn=t.bcn+"selected-";q.rotate=h;q.chart=b;q.data=c;q.valueAxis=p;q.chart=m.chart;q.categoryAxis=e;q.periodSpan=m.periodSpan;q.valueField=m.valueField;q.openField=m.openField;q.closeField=m.closeField;q.highField=m.highField;q.lowField=m.lowField;q.lineAlpha=a.selectedGraphLineAlpha;q.lineColorR=a.selectedGraphLineColor;q.fillAlphas=a.selectedGraphFillAlpha;q.fillColorsR=a.selectedGraphFillColor;q.connect=m.connect;q.hidden=m.hidden;q.width=k;q.height=l;q.pointPosition=m.pointPosition;q.stepDirection=m.stepDirection;q.periodSpan=m.periodSpan;b=a.graphType;b||(b=m.type);t.type=b;q.type=b;c=c.length-1;t.zoom(0,c);q.zoom(0,c);q.set.click(function(){a.handleBackgroundClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()});t.set.click(function(){a.handleBackgroundClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()});n.push(t.set);n.push(q.set)}n.push(e.set);n.push(e.labelsSet);a.bg.toBack();a.invisibleBg.toFront();a.dragger.toFront();a.iconLeft.toFront();a.iconRight.toFront()}},timeZoom:function(a,b,c){this.startTime=a;this.endTime=b;this.timeDifference=b-a;this.skipEvent=!d.toBoolean(c);this.zoomScrollbar();this.skipEvent||this.dispatchScrollbarEvent()},zoom:function(a,b){this.start=a;this.end=b;this.skipEvent=!0;this.zoomScrollbar()},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var a=this.chart.chartData,b,c,e=this.dragger.getBBox();b=e.x;var d=e.y,f=e.width,e=e.height,g=this.chart;this.rotate?(b=d,c=e):c=f;f={type:"zoomed",target:this};f.chart=g;var k=this.categoryAxis,l=this.stepWidth,d=g.minSelectedTime,e=!1;if(k.parseDates&&!k.equalSpacing){if(a=g.lastTime,g=g.firstTime,k=Math.round(b/l)+g,b=this.dragging?k+this.timeDifference:Math.round((b+c)/l)+g,k>b&&(k=b),0<d&&b-k<d&&(b=Math.round(k+(b-k)/2),e=Math.round(d/2),k=b-e,b+=e,e=!0),b>a&&(b=a),b-d<k&&(k=b-d),k<g&&(k=g),k+d>b&&(b=k+d),k!=this.startTime||b!=this.endTime)this.startTime=k,this.endTime=b,f.start=k,f.end=b,f.startDate=new Date(k),f.endDate=new Date(b),this.fire(f.type,f)}else if(k.startOnAxis||(b+=l/2),c-=this.stepWidth/2,d=k.xToIndex(b),b=k.xToIndex(b+c),d!=this.start||this.end!=b)k.startOnAxis&&(this.resizingRight&&d==b&&b++,this.resizingLeft&&d==b&&(0<d?d--:b=1)),this.start=d,this.end=this.dragging?this.start+this.difference:b,f.start=this.start,f.end=this.end,k.parseDates&&(a[this.start]&&(f.startDate=new Date(a[this.start].time)),a[this.end]&&(f.endDate=new Date(a[this.end].time))),this.fire(f.type,f);e&&this.zoomScrollbar()}},zoomScrollbar:function(){var a,b;a=this.chart;var c=a.chartData,e=this.categoryAxis;e.parseDates&&!e.equalSpacing?(c=e.stepWidth,e=a.firstTime,a=c*(this.startTime-e),b=c*(this.endTime-e)):(a=c[this.start].x[e.id],b=c[this.end].x[e.id],c=e.stepWidth,e.startOnAxis||(e=c/2,a-=e,b+=e));this.stepWidth=c;this.updateScrollbarSize(a,b)},maskGraphs:function(a,b,c,e){var d=this.selectedGraph;d&&d.set.clipRect(a,b,c,e)},handleDragStart:function(){d.ChartScrollbar.base.handleDragStart.call(this);this.difference=this.end-this.start;this.timeDifference=this.endTime-this.startTime;0>this.timeDifference&&(this.timeDifference=0)},handleBackgroundClick:function(){d.ChartScrollbar.base.handleBackgroundClick.call(this);this.dragging||(this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0))}})})();(function(){var d=window.AmCharts;d.AmBalloon=d.Class({construct:function(a){this.cname="AmBalloon";this.enabled=!0;this.fillColor="#FFFFFF";this.fillAlpha=.8;this.borderThickness=2;this.borderColor="#FFFFFF";this.borderAlpha=1;this.cornerRadius=0;this.maxWidth=220;this.horizontalPadding=8;this.verticalPadding=4;this.pointerWidth=6;this.pointerOrientation="V";this.color="#000000";this.adjustBorderColor=!0;this.show=this.follow=this.showBullet=!1;this.bulletSize=3;this.shadowAlpha=.4;this.shadowColor="#000000";this.fadeOutDuration=this.animationDuration=.3;this.fixedPosition=!1;this.offsetY=6;this.offsetX=1;this.textAlign="center";this.disableMouseEvents=!0;this.deltaSignX=this.deltaSignY=1;d.isModern||(this.offsetY*=1.5);d.applyTheme(this,a,this.cname)},draw:function(){var a=this.pointToX,b=this.pointToY,c=this.chart;d.VML&&(this.fadeOutDuration=0);this.xAnim&&c.stopAnim(this.xAnim);this.yAnim&&c.stopAnim(this.yAnim);if(!isNaN(a)){var e=this.follow,h=c.container,f=this.set;d.remove(f);this.removeDiv();f=h.set();f.node.style.pointerEvents="none";this.set=f;c.balloonsSet.push(f);if(this.show){var g=this.l,k=this.t,l=this.r,m=this.b,n=this.balloonColor,p=this.fillColor,q=this.borderColor,r=p;void 0!=n&&(this.adjustBorderColor?r=q=n:p=n);var u=this.horizontalPadding,t=this.verticalPadding,z=this.pointerWidth,y=this.pointerOrientation,v=this.cornerRadius,w=c.fontFamily,A=this.fontSize;void 0==A&&(A=c.fontSize);var n=document.createElement("div"),B=c.classNamePrefix;n.className=B+"-balloon-div";this.className&&(n.className=n.className+" "+B+"-balloon-div-"+this.className);B=n.style;this.disableMouseEvents&&(B.pointerEvents="none");B.position="absolute";var C=this.minWidth,D="";isNaN(C)||(D="min-width:"+(C-2*u)+"px; ");n.innerHTML="<div style='text-align:"+this.textAlign+"; "+D+"max-width:"+this.maxWidth+"px; font-size:"+A+"px; color:"+this.color+"; font-family:"+w+"'>"+this.text+"</div>";c.chartDiv.appendChild(n);this.textDiv=n;A=n.offsetWidth;w=n.offsetHeight;n.clientHeight&&(A=n.clientWidth,w=n.clientHeight);w+=2*t;D=A+2*u;!isNaN(C)&&D<C&&(D=C);window.opera&&(w+=2);var J=!1,A=this.offsetY;c.handDrawn&&(A+=c.handDrawScatter+2);"H"!=y?(C=a-D/2,b<k+w+10&&"down"!=y?(J=!0,e&&(b+=A),A=b+z,this.deltaSignY=-1):(e&&(b-=A),A=b-w-z,this.deltaSignY=1)):(2*z>w&&(z=w/2),A=b-w/2,a<g+(l-g)/2?(C=a+z,this.deltaSignX=-1):(C=a-D-z,this.deltaSignX=1));A+w>=m&&(A=m-w);A<k&&(A=k);C<g&&(C=g);C+D>l&&(C=l-D);var k=A+t,m=C+u,t=this.shadowAlpha,E=this.shadowColor,u=this.borderThickness,O=this.bulletSize,I;0<v||0===z?(0<t&&(a=d.rect(h,D,w,p,0,u+1,E,t,this.cornerRadius),d.isModern?a.translate(1,1):a.translate(4,4),f.push(a)),p=d.rect(h,D,w,p,this.fillAlpha,u,q,this.borderAlpha,this.cornerRadius),this.showBullet&&(I=d.circle(h,O,r,this.fillAlpha),f.push(I))):(r=[],v=[],"H"!=y?(g=a-C,g>D-z&&(g=D-z),g<z&&(g=z),r=[0,g-z,a-C,g+z,D,D,0,0],v=J?[0,0,b-A,0,0,w,w,0]:[w,w,b-A,w,w,0,0,w]):(r=b-A,r>w-z&&(r=w-z),r<z&&(r=z),v=[0,r-z,b-A,r+z,w,w,0,0],r=a<g+(l-g)/2?[0,0,C<a?0:a-C,0,0,D,D,0]:[D,D,C+D>a?D:a-C,D,D,0,0,D]),0<t&&(a=d.polygon(h,r,v,p,0,u,E,t),a.translate(1,1),f.push(a)),p=d.polygon(h,r,v,p,this.fillAlpha,u,q,this.borderAlpha));this.bg=p;f.push(p);p.toFront();d.setCN(c,p,"balloon-bg");this.className&&d.setCN(c,p,"balloon-bg-"+this.className);h=1*this.deltaSignX;B.left=m+"px";B.top=k+"px";f.translate(C-h,A);p=p.getBBox();this.bottom=A+w+1;this.yPos=p.y+A;I&&I.translate(this.pointToX-C+h,b-A);b=this.animationDuration;0<this.animationDuration&&!e&&!isNaN(this.prevX)&&(f.translate(this.prevX,this.prevY),f.animate({translate:C-h+","+
A},b,"easeOutSine"),n&&(B.left=this.prevTX+"px",B.top=this.prevTY+"px",this.xAnim=c.animate({node:n},"left",this.prevTX,m,b,"easeOutSine","px"),this.yAnim=c.animate({node:n},"top",this.prevTY,k,b,"easeOutSine","px")));this.prevX=C-h;this.prevY=A;this.prevTX=m;this.prevTY=k}}},followMouse:function(){if(this.follow&&this.show){var a=this.chart.mouseX-this.offsetX*this.deltaSignX,b=this.chart.mouseY;this.pointToX=a;this.pointToY=b;if(a!=this.previousX||b!=this.previousY)if(this.previousX=a,this.previousY=b,0===this.cornerRadius)this.draw();else{var c=this.set;if(c){var e=c.getBBox(),a=a-e.width/2,d=b-e.height-10;a<this.l&&(a=this.l);a>this.r-e.width&&(a=this.r-e.width);d<this.t&&(d=b+10);c.translate(a,d);b=this.textDiv.style;b.left=a+this.horizontalPadding+"px";b.top=d+this.verticalPadding+"px"}}}},changeColor:function(a){this.balloonColor=a},setBounds:function(a,b,c,e){this.l=a;this.t=b;this.r=c;this.b=e;this.destroyTO&&clearTimeout(this.destroyTO)},showBalloon:function(a){this.text=a;this.show=!0;this.destroyTO&&clearTimeout(this.destroyTO);a=this.chart;this.fadeAnim1&&a.stopAnim(this.fadeAnim1);this.fadeAnim2&&a.stopAnim(this.fadeAnim2);this.draw()},hide:function(a){var b=this;isNaN(a)&&(a=b.fadeOutDuration);var c=b.chart;if(0<a){b.destroyTO&&clearTimeout(b.destroyTO);b.destroyTO=setTimeout(function(){b.destroy.call(b)},1E3*a);b.follow=!1;b.show=!1;var e=b.set;e&&(e.setAttr("opacity",b.fillAlpha),b.fadeAnim1=e.animate({opacity:0},a,"easeInSine"));b.textDiv&&(b.fadeAnim2=c.animate({node:b.textDiv},"opacity",1,0,a,"easeInSine",""))}else b.show=!1,b.follow=!1,b.destroy()},setPosition:function(a,b,c){this.pointToX=a;this.pointToY=b;c&&(a==this.previousX&&b==this.previousY||this.draw());this.previousX=a;this.previousY=b},followCursor:function(a){var b=this;(b.follow=a)?(b.pShowBullet=b.showBullet,b.showBullet=!1):void 0!==b.pShowBullet&&(b.showBullet=b.pShowBullet);clearInterval(b.interval);var c=b.chart.mouseX,e=b.chart.mouseY;!isNaN(c)&&a&&(b.pointToX=c-b.offsetX*b.deltaSignX,b.pointToY=e,b.followMouse(),b.interval=setInterval(function(){b.followMouse.call(b)},40))},removeDiv:function(){if(this.textDiv){var a=this.textDiv.parentNode;a&&a.removeChild(this.textDiv)}},destroy:function(){clearInterval(this.interval);d.remove(this.set);this.removeDiv();this.set=null}})})();(function(){var d=window.AmCharts;d.AmCoordinateChart=d.Class({inherits:d.AmChart,construct:function(a){d.AmCoordinateChart.base.construct.call(this,a);this.theme=a;this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph");this.startAlpha=1;this.startDuration=0;this.startEffect="elastic";this.sequencedAnimation=!0;this.colors="#FF6600 #FCD202 #B0DE09 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(" ");this.balloonDateFormat="MMM DD, YYYY";this.valueAxes=[];this.graphs=[];this.guides=[];this.gridAboveGraphs=!1;d.applyTheme(this,a,"AmCoordinateChart")},initChart:function(){d.AmCoordinateChart.base.initChart.call(this);var a=this.categoryAxis;a&&(this.categoryAxis=d.processObject(a,d.CategoryAxis,this.theme));this.processValueAxes();this.createValueAxes();this.processGraphs();this.processGuides();d.VML&&(this.startAlpha=1);this.setLegendData(this.graphs);this.gridAboveGraphs&&this.gridSet.toFront()},createValueAxes:function(){if(0===this.valueAxes.length){var a=new d.ValueAxis;this.addValueAxis(a)}},parseData:function(){this.processValueAxes();this.processGraphs()},parseSerialData:function(a){var b=this.graphs,c,e={},h=this.seriesIdField;h||(h=this.categoryField);this.chartData=[];if(a){var f=!1,g,k=this.categoryAxis,l,m,n;k&&(f=k.parseDates,l=k.forceShowField,n=k.classNameField,m=k.labelColorField,g=k.categoryFunction);var p,q,r={},u;f&&(c=d.extractPeriod(k.minPeriod),p=c.period,q=c.count,u=d.getPeriodDuration(p,q));var t={};this.lookupTable=t;var z,y=this.dataDateFormat,v={};for(z=0;z<a.length;z++){var w={},A=a[z];c=A[this.categoryField];w.dataContext=A;w.category=g?g(c,A,k):String(c);l&&(w.forceShow=A[l]);n&&(w.className=A[n]);m&&(w.labelColor=A[m]);t[A[h]]=w;if(f&&(k.categoryFunction?c=k.categoryFunction(c,A,k):(!y||c instanceof Date||(c=c.toString()+" |"),c=d.getDate(c,y,k.minPeriod)),c=d.resetDateToMin(c,p,q,k.firstDayOfWeek),w.category=c,w.time=c.getTime(),isNaN(w.time)))continue;var B=this.valueAxes;w.axes={};w.x={};var C;for(C=0;C<B.length;C++){var D=B[C].id;w.axes[D]={};w.axes[D].graphs={};var J;for(J=0;J<b.length;J++){c=b[J];var E=c.id,O=1.1;isNaN(c.gapPeriod)||(O=c.gapPeriod);var I=c.periodValue;if(c.valueAxis.id==D){w.axes[D].graphs[E]={};var W={};W.index=z;var ea=A;c.dataProvider&&(ea=e);W.values=this.processValues(ea,c,I);!c.connect&&v&&v[E]&&0<O&&w.time-r[E]>=u*O&&(v[E].gap=!0);this.processFields(c,W,ea);W.category=w.category;W.serialDataItem=w;W.graph=c;w.axes[D].graphs[E]=W;r[E]=w.time;v[E]=W}}}this.chartData[z]=w}}for(a=0;a<b.length;a++)c=b[a],c.dataProvider&&this.parseGraphData(c)},processValues:function(a,b,c){var e={},h,f=!1;"candlestick"!=b.type&&"ohlc"!=b.type||""===c||(f=!0);for(var g="value error open close low high".split(" "),k=0;k<g.length;k++){var l=g[k];"value"!=l&&"error"!=l&&f&&(c=l.charAt(0).toUpperCase()+l.slice(1));var m=a[b[l+"Field"]+c];null!==m&&(h=Number(m),isNaN(h)||(e[l]=h),"date"==b.valueAxis.type&&void 0!==m&&(h=d.getDate(m,b.chart.dataDateFormat),e[l]=h.getTime()))}return e},parseGraphData:function(a){var b=a.dataProvider,c=a.seriesIdField;c||(c=this.seriesIdField);c||(c=this.categoryField);var e;for(e=0;e<b.length;e++){var d=b[e],f=this.lookupTable[String(d[c])],g=a.valueAxis.id;f&&(g=f.axes[g].graphs[a.id],g.serialDataItem=f,g.values=this.processValues(d,a,a.periodValue),this.processFields(a,g,d))}},addValueAxis:function(a){a.chart=this;this.valueAxes.push(a);this.validateData()},removeValueAxesAndGraphs:function(){var a=this.valueAxes,b;for(b=a.length-1;-1<b;b--)this.removeValueAxis(a[b])},removeValueAxis:function(a){var b=this.graphs,c;for(c=b.length-1;0<=c;c--){var e=b[c];e&&e.valueAxis==a&&this.removeGraph(e)}b=this.valueAxes;for(c=b.length-1;0<=c;c--)b[c]==a&&b.splice(c,1);this.validateData()},addGraph:function(a){this.graphs.push(a);this.chooseGraphColor(a,this.graphs.length-1);this.validateData()},removeGraph:function(a){var b=this.graphs,c;for(c=b.length-1;0<=c;c--)b[c]==a&&(b.splice(c,1),a.destroy());this.validateData()},processValueAxes:function(){var a=this.valueAxes,b;for(b=0;b<a.length;b++){var c=a[b],c=d.processObject(c,d.ValueAxis,this.theme);a[b]=c;c.chart=this;c.id||(c.id="valueAxisAuto"+b+"_"+(new Date).getTime());void 0===c.usePrefixes&&(c.usePrefixes=this.usePrefixes)}},processGuides:function(){var a=this.guides,b=this.categoryAxis;if(a)for(var c=0;c<a.length;c++){var e=a[c];(void 0!==e.category||void 0!==e.date)&&b&&b.addGuide(e);e.id||(e.id="guideAuto"+c+"_"+(new Date).getTime());var h=e.valueAxis;h?(d.isString(h)&&(h=this.getValueAxisById(h)),h?h.addGuide(e):this.valueAxes[0].addGuide(e)):isNaN(e.value)||this.valueAxes[0].addGuide(e)}},processGraphs:function(){var a=this.graphs,b;for(b=0;b<a.length;b++){var c=a[b],c=d.processObject(c,d.AmGraph,this.theme);a[b]=c;this.chooseGraphColor(c,b);c.chart=this;d.isString(c.valueAxis)&&(c.valueAxis=this.getValueAxisById(c.valueAxis));c.valueAxis||(c.valueAxis=this.valueAxes[0]);c.id||(c.id="graphAuto"+b+"_"+(new Date).getTime())}},formatString:function(a,b,c){var e=b.graph,h=e.valueAxis;h.duration&&b.values.value&&(h=d.formatDuration(b.values.value,h.duration,"",h.durationUnits,h.maxInterval,h.numberFormatter),a=a.split("[[value]]").join(h));a=d.massReplace(a,{"[[title]]":e.title,"[[description]]":b.description});a=c?d.fixNewLines(a):d.fixBrakes(a);return a=d.cleanFromEmpty(a)},getBalloonColor:function(a,b,c){var e=a.lineColor,h=a.balloonColor;c&&(h=e);c=a.fillColorsR;"object"==typeof c?e=c[0]:void 0!==c&&(e=c);b.isNegative&&(c=a.negativeLineColor,a=a.negativeFillColors,"object"==typeof a?c=a[0]:void 0!==a&&(c=a),void 0!==c&&(e=c));void 0!==b.color&&(e=b.color);void 0!==b.lineColor&&(e=b.lineColor);b=b.fillColors;void 0!==b&&(e=b,d.ifArray(b)&&(e=b[0]));void 0===h&&(h=e);return h},getGraphById:function(a){return d.getObjById(this.graphs,a)},getValueAxisById:function(a){return d.getObjById(this.valueAxes,a)},processFields:function(a,b,c){if(a.itemColors){var e=a.itemColors,h=b.index;b.color=h<e.length?e[h]:d.randomColor()}e="lineColor color alpha fillColors description bullet customBullet bulletSize bulletConfig url labelColor dashLength pattern gap className".split(" ");for(h=0;h<e.length;h++){var f=e[h],g=a[f+"Field"];g&&(g=c[g],d.isDefined(g)&&(b[f]=g))}b.dataContext=c},chooseGraphColor:function(a,b){if(a.lineColor)a.lineColorR=a.lineColor;else{var c;c=this.colors.length>b?this.colors[b]:d.randomColor();a.lineColorR=c}a.fillColorsR=a.fillColors?a.fillColors:a.lineColorR;a.bulletBorderColorR=a.bulletBorderColor?a.bulletBorderColor:a.useLineColorForBulletBorder?a.lineColorR:a.bulletColor;a.bulletColorR=a.bulletColor?a.bulletColor:a.lineColorR;if(c=this.patterns)a.pattern=c[b]},handleLegendEvent:function(a){var b=a.type;a=a.dataItem;if(!this.legend.data&&a){var c=a.hidden,e=a.showBalloon;switch(b){case"clickMarker":this.textClickEnabled&&(e?this.hideGraphsBalloon(a):this.showGraphsBalloon(a));break;case"clickLabel":e?this.hideGraphsBalloon(a):this.showGraphsBalloon(a);break;case"rollOverItem":c||this.highlightGraph(a);break;case"rollOutItem":c||this.unhighlightGraph();break;case"hideItem":this.hideGraph(a);break;case"showItem":this.showGraph(a)}}},highlightGraph:function(a){var b=this.graphs,c,e=.2;this.legend&&(e=this.legend.rollOverGraphAlpha);if(1!=e)for(c=0;c<b.length;c++){var d=b[c];d!=a&&d.changeOpacity(e)}},unhighlightGraph:function(){var a;this.legend&&(a=this.legend.rollOverGraphAlpha);if(1!=a){a=this.graphs;var b;for(b=0;b<a.length;b++)a[b].changeOpacity(1)}},showGraph:function(a){a.switchable&&(a.hidden=!1,this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),this.chartCreated&&this.initChart())},hideGraph:function(a){a.switchable&&(this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),a.hidden=!0,this.chartCreated&&this.initChart())},hideGraphsBalloon:function(a){a.showBalloon=!1;this.updateLegend()},showGraphsBalloon:function(a){a.showBalloon=!0;this.updateLegend()},updateLegend:function(){this.legend&&this.legend.invalidateSize()},resetAnimation:function(){var a=this.graphs;if(a){var b;for(b=0;b<a.length;b++)a[b].animationPlayed=!1}},animateAgain:function(){this.resetAnimation();this.validateNow()}})})();(function(){var d=window.AmCharts;d.AmSlicedChart=d.Class({inherits:d.AmChart,construct:function(a){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice");d.AmSlicedChart.base.construct.call(this,a);this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" ");this.alpha=1;this.groupPercent=0;this.groupedTitle="Other";this.groupedPulled=!1;this.groupedAlpha=1;this.marginLeft=0;this.marginBottom=this.marginTop=10;this.marginRight=0;this.hoverAlpha=1;this.outlineColor="#FFFFFF";this.outlineAlpha=0;this.outlineThickness=1;this.startAlpha=0;this.startDuration=1;this.startEffect="bounce";this.sequencedAnimation=!0;this.pullOutDuration=1;this.pullOutEffect="bounce";this.pullOnHover=this.pullOutOnlyOne=!1;this.labelsEnabled=!0;this.labelTickColor="#000000";this.labelTickAlpha=.2;this.hideLabelsPercent=0;this.urlTarget="_self";this.autoMarginOffset=10;this.gradientRatio=[];this.maxLabelWidth=200;d.applyTheme(this,a,"AmSlicedChart")},initChart:function(){d.AmSlicedChart.base.initChart.call(this);this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.setLegendData(this.chartData));this.drawChart()},handleLegendEvent:function(a){var b=a.type,c=a.dataItem,e=this.legend;if(!e.data&&c){var d=c.hidden;a=a.event;switch(b){case"clickMarker":d||e.switchable||this.clickSlice(c,a);break;case"clickLabel":d||this.clickSlice(c,a,!1);break;case"rollOverItem":d||this.rollOverSlice(c,!1,a);break;case"rollOutItem":d||this.rollOutSlice(c,a);break;case"hideItem":this.hideSlice(c,a);break;case"showItem":this.showSlice(c,a)}}},invalidateVisibility:function(){this.recalculatePercents();this.initChart();var a=this.legend;a&&a.invalidateSize()},addEventListeners:function(a,b){var c=this;a.mouseover(function(a){c.rollOverSlice(b,!0,a)}).mouseout(function(a){c.rollOutSlice(b,a)}).touchend(function(a){c.rollOverSlice(b,a);c.panEventsEnabled&&c.clickSlice(b,a)}).touchstart(function(a){c.rollOverSlice(b,a)}).click(function(a){c.clickSlice(b,a)}).contextmenu(function(a){c.handleRightClick(b,a)})},formatString:function(a,b,c){a=d.formatValue(a,b,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);var e=this.pf.precision;isNaN(this.tempPrec)||(this.pf.precision=this.tempPrec);a=d.formatValue(a,b,["percents"],this.pf);a=d.massReplace(a,{"[[title]]":b.title,"[[description]]":b.description});this.pf.precision=e;-1!=a.indexOf("[[")&&(a=d.formatDataContextValue(a,b.dataContext));a=c?d.fixNewLines(a):d.fixBrakes(a);return a=d.cleanFromEmpty(a)},startSlices:function(){var a;for(a=0;a<this.chartData.length;a++)0<this.startDuration&&this.sequencedAnimation?this.setStartTO(a):this.startSlice(this.chartData[a])},setStartTO:function(a){var b=this;a=setTimeout(function(){b.startSequenced.call(b)},b.startDuration/b.chartData.length*500*a);b.timeOuts.push(a)},pullSlices:function(a){var b=this.chartData,c;for(c=0;c<b.length;c++){var e=b[c];e.pulled&&this.pullSlice(e,1,a)}},startSequenced:function(){var a=this.chartData,b;for(b=0;b<a.length;b++)if(!a[b].started){this.startSlice(this.chartData[b]);break}},startSlice:function(a){a.started=!0;var b=a.wedge,c=this.startDuration,e=a.labelSet;b&&0<c&&(0<a.alpha&&b.show(),b.translate(a.startX,a.startY),b.animate({opacity:1,translate:"0,0"},c,this.startEffect));e&&0<c&&(0<a.alpha&&e.show(),e.translate(a.startX,a.startY),e.animate({opacity:1,translate:"0,0"},c,this.startEffect))},showLabels:function(){var a=this.chartData,b;for(b=0;b<a.length;b++){var c=a[b];if(0<c.alpha){var e=c.label;e&&e.show();(c=c.tick)&&c.show()}}},showSlice:function(a){isNaN(a)?a.hidden=!1:this.chartData[a].hidden=!1;this.invalidateVisibility()},hideSlice:function(a){isNaN(a)?a.hidden=!0:this.chartData[a].hidden=!0;this.hideBalloon();this.invalidateVisibility()},rollOverSlice:function(a,b,c){isNaN(a)||(a=this.chartData[a]);clearTimeout(this.hoverInt);if(!a.hidden){this.pullOnHover&&this.pullSlice(a,1);1>this.hoverAlpha&&a.wedge&&a.wedge.attr({opacity:this.hoverAlpha});var e=a.balloonX,h=a.balloonY;a.pulled&&(e+=a.pullX,h+=a.pullY);var f=this.formatString(this.balloonText,a,!0),g=this.balloonFunction;g&&(f=g(a,f));g=d.adjustLuminosity(a.color,-.15);f?this.showBalloon(f,g,b,e,h):this.hideBalloon();0===a.value&&this.hideBalloon();a={type:"rollOverSlice",dataItem:a,chart:this,event:c};this.fire(a.type,a)}},rollOutSlice:function(a,b){isNaN(a)||(a=this.chartData[a]);a.wedge&&a.wedge.attr({opacity:1});this.hideBalloon();var c={type:"rollOutSlice",dataItem:a,chart:this,event:b};this.fire(c.type,c)},clickSlice:function(a,b,c){isNaN(a)||(a=this.chartData[a]);a.pulled?this.pullSlice(a,0):this.pullSlice(a,1);d.getURL(a.url,this.urlTarget);c||(a={type:"clickSlice",dataItem:a,chart:this,event:b},this.fire(a.type,a))},handleRightClick:function(a,b){isNaN(a)||(a=this.chartData[a]);var c={type:"rightClickSlice",dataItem:a,chart:this,event:b};this.fire(c.type,c)},drawTicks:function(){var a=this.chartData,b;for(b=0;b<a.length;b++){var c=a[b];if(c.label&&!c.skipTick){var e=c.ty,e=d.line(this.container,[c.tx0,c.tx,c.tx2],[c.ty0,e,e],this.labelTickColor,this.labelTickAlpha);d.setCN(this,e,this.type+"-tick");d.setCN(this,e,c.className,!0);c.tick=e;c.wedge.push(e)}}},initialStart:function(){var a=this,b=a.startDuration,c=setTimeout(function(){a.showLabels.call(a)},1E3*b);a.timeOuts.push(c);a.chartCreated?a.pullSlices(!0):(a.startSlices(),0<b?(b=setTimeout(function(){a.pullSlices.call(a)},1200*b),a.timeOuts.push(b)):a.pullSlices(!0))},pullSlice:function(a,b,c){var e=this.pullOutDuration;!0===c&&(e=0);if(c=a.wedge)0<e?(c.animate({translate:b*a.pullX+","+b*a.pullY},e,this.pullOutEffect),a.labelSet&&a.labelSet.animate({translate:b*a.pullX+","+b*a.pullY},e,this.pullOutEffect)):(a.labelSet&&a.labelSet.translate(b*a.pullX,b*a.pullY),c.translate(b*a.pullX,b*a.pullY));1==b?(a.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(a.index),a={type:"pullOutSlice",dataItem:a,chart:this}):(a.pulled=!1,a={type:"pullInSlice",dataItem:a,chart:this});this.fire(a.type,a)},pullInAll:function(a){var b=this.chartData,c;for(c=0;c<this.chartData.length;c++)c!=a&&b[c].pulled&&this.pullSlice(b[c],0)},pullOutAll:function(){var a=this.chartData,b;for(b=0;b<a.length;b++)a[b].pulled||this.pullSlice(a[b],1)},parseData:function(){var a=[];this.chartData=a;var b=this.dataProvider;isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha);if(void 0!==b){var c=b.length,e=0,h,f,g;for(h=0;h<c;h++){f={};var k=b[h];f.dataContext=k;null!==k[this.valueField]&&(f.value=Number(k[this.valueField]));(g=k[this.titleField])||(g="");f.title=g;f.pulled=d.toBoolean(k[this.pulledField],!1);(g=k[this.descriptionField])||(g="");f.description=g;f.labelRadius=Number(k[this.labelRadiusField]);f.switchable=!0;f.className=k[this.classNameField];f.url=k[this.urlField];g=k[this.patternField];!g&&this.patterns&&(g=this.patterns[h]);f.pattern=g;f.visibleInLegend=d.toBoolean(k[this.visibleInLegendField],!0);g=k[this.alphaField];f.alpha=void 0!==g?Number(g):this.alpha;g=k[this.colorField];void 0!==g&&(f.color=g);f.labelColor=d.toColor(k[this.labelColorField]);e+=f.value;f.hidden=!1;a[h]=f}for(h=b=0;h<c;h++)f=a[h],f.percents=f.value/e*100,f.percents<this.groupPercent&&b++;1<b&&(this.groupValue=0,this.removeSmallSlices(),a.push({title:this.groupedTitle,value:this.groupValue,percents:this.groupValue/e*100,pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern,className:this.groupedClassName,dataContext:{}}));c=this.baseColor;c||(c=this.pieBaseColor);e=this.brightnessStep;e||(e=this.pieBrightnessStep);for(h=0;h<a.length;h++)c?g=d.adjustLuminosity(c,h*e/100):(g=this.colors[h],void 0===g&&(g=d.randomColor())),void 0===a[h].color&&(a[h].color=g);this.recalculatePercents()}},recalculatePercents:function(){var a=this.chartData,b=0,c,e;for(c=0;c<a.length;c++)e=a[c],!e.hidden&&0<e.value&&(b+=e.value);for(c=0;c<a.length;c++)e=this.chartData[c],e.percents=!e.hidden&&0<e.value?100*e.value/b:0},removeSmallSlices:function(){var a=this.chartData,b;for(b=a.length-1;0<=b;b--)a[b].percents<this.groupPercent&&(this.groupValue+=a[b].value,a.splice(b,1))},animateAgain:function(){var a=this;a.startSlices();for(var b=0;b<a.chartData.length;b++){var c=a.chartData[b];c.started=!1;var e=c.wedge;e&&e.translate(c.startX,c.startY);(e=c.labelSet)&&e.translate(c.startX,c.startY)}b=a.startDuration;0<b?(b=setTimeout(function(){a.pullSlices.call(a)},1200*b),a.timeOuts.push(b)):a.pullSlices()},measureMaxLabel:function(){var a=this.chartData,b=0,c;for(c=0;c<a.length;c++){var e=a[c],h=this.formatString(this.labelText,e),f=this.labelFunction;f&&(h=f(e,h));e=d.text(this.container,h,this.color,this.fontFamily,this.fontSize);h=e.getBBox().width;h>b&&(b=h);e.remove()}return b}})})();(function(){var d=window.AmCharts;d.AmRectangularChart=d.Class({inherits:d.AmCoordinateChart,construct:function(a){d.AmRectangularChart.base.construct.call(this,a);this.theme=a;this.createEvents("zoomed");this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=20;this.verticalPosition=this.horizontalPosition=this.depth3D=this.angle=0;this.heightMultiplier=this.widthMultiplier=1;this.plotAreaFillColors="#FFFFFF";this.plotAreaFillAlphas=0;this.plotAreaBorderColor="#000000";this.plotAreaBorderAlpha=0;this.zoomOutButtonImageSize=19;this.zoomOutButtonImage="lens.png";this.zoomOutText="Show all";this.zoomOutButtonColor="#e5e5e5";this.zoomOutButtonAlpha=0;this.zoomOutButtonRollOverAlpha=1;this.zoomOutButtonPadding=8;this.trendLines=[];this.autoMargins=!0;this.marginsUpdated=!1;this.autoMarginOffset=10;d.applyTheme(this,a,"AmRectangularChart")},initChart:function(){d.AmRectangularChart.base.initChart.call(this);this.updateDxy();var a=!0;!this.marginsUpdated&&this.autoMargins&&(this.resetMargins(),a=!1);this.processScrollbars();this.updateMargins();this.updatePlotArea();this.updateScrollbars();this.updateTrendLines();this.updateChartCursor();this.updateValueAxes();a&&(this.scrollbarOnly||this.updateGraphs())},drawChart:function(){d.AmRectangularChart.base.drawChart.call(this);this.drawPlotArea();if(d.ifArray(this.chartData)){var a=this.chartCursor;a&&a.draw()}},resetMargins:function(){var a={},b;if("xy"==this.type){var c=this.xAxes,e=this.yAxes;for(b=0;b<c.length;b++){var d=c[b];d.ignoreAxisWidth||(d.setOrientation(!0),d.fixAxisPosition(),a[d.position]=!0)}for(b=0;b<e.length;b++)c=e[b],c.ignoreAxisWidth||(c.setOrientation(!1),c.fixAxisPosition(),a[c.position]=!0)}else{e=this.valueAxes;for(b=0;b<e.length;b++)c=e[b],c.ignoreAxisWidth||(c.setOrientation(this.rotate),c.fixAxisPosition(),a[c.position]=!0);(b=this.categoryAxis)&&!b.ignoreAxisWidth&&(b.setOrientation(!this.rotate),b.fixAxisPosition(),b.fixAxisPosition(),a[b.position]=!0)}a.left&&(this.marginLeft=0);a.right&&(this.marginRight=0);a.top&&(this.marginTop=0);a.bottom&&(this.marginBottom=0);this.fixMargins=a},measureMargins:function(){var a=this.valueAxes,b,c=this.autoMarginOffset,e=this.fixMargins,d=this.realWidth,f=this.realHeight,g=c,k=c,l=d;b=f;var m;for(m=0;m<a.length;m++)a[m].handleSynchronization(),b=this.getAxisBounds(a[m],g,l,k,b),g=Math.round(b.l),l=Math.round(b.r),k=Math.round(b.t),b=Math.round(b.b);if(a=this.categoryAxis)b=this.getAxisBounds(a,g,l,k,b),g=Math.round(b.l),l=Math.round(b.r),k=Math.round(b.t),b=Math.round(b.b);e.left&&g<c&&(this.marginLeft=Math.round(-g+c));e.right&&l>=d-c&&(this.marginRight=Math.round(l-d+c));e.top&&k<c+this.titleHeight&&(this.marginTop=Math.round(this.marginTop-k+c+this.titleHeight));e.bottom&&b>f-c&&(this.marginBottom=Math.round(this.marginBottom+b-f+c));this.initChart()},getAxisBounds:function(a,b,c,e,d){if(!a.ignoreAxisWidth){var f=a.labelsSet,g=a.tickLength;a.inside&&(g=0);if(f)switch(f=a.getBBox(),a.position){case"top":a=f.y;e>a&&(e=a);break;case"bottom":a=f.y+f.height;d<a&&(d=a);break;case"right":a=f.x+f.width+g+3;c<a&&(c=a);break;case"left":a=f.x-g,b>a&&(b=a)}}return{l:b,t:e,r:c,b:d}},drawZoomOutButton:function(){var a=this;if(!a.zbSet){var b=a.container.set();a.zoomButtonSet.push(b);var c=a.color,e=a.fontSize,h=a.zoomOutButtonImageSize,f=a.zoomOutButtonImage,g=d.lang.zoomOutText||a.zoomOutText,k=a.zoomOutButtonColor,l=a.zoomOutButtonAlpha,m=a.zoomOutButtonFontSize,n=a.zoomOutButtonPadding;isNaN(m)||(e=m);(m=a.zoomOutButtonFontColor)&&(c=m);var m=a.zoomOutButton,p;m&&(m.fontSize&&(e=m.fontSize),m.color&&(c=m.color),m.backgroundColor&&(k=m.backgroundColor),isNaN(m.backgroundAlpha)||(a.zoomOutButtonRollOverAlpha=m.backgroundAlpha));var q=m=0;void 0!==a.pathToImages&&f&&(p=a.container.image(a.pathToImages+f,0,0,h,h),d.setCN(a,p,"zoom-out-image"),b.push(p),p=p.getBBox(),m=p.width+5);void 0!==g&&(c=d.text(a.container,g,c,a.fontFamily,e,"start"),d.setCN(a,c,"zoom-out-label"),e=c.getBBox(),q=p?p.height/2-3:e.height/2,c.translate(m,q),b.push(c));p=b.getBBox();c=1;d.isModern||(c=0);k=d.rect(a.container,p.width+2*n+5,p.height+2*n-2,k,1,1,k,c);k.setAttr("opacity",l);k.translate(-n,-n);d.setCN(a,k,"zoom-out-bg");b.push(k);k.toBack();a.zbBG=k;p=k.getBBox();b.translate(a.marginLeftReal+a.plotAreaWidth-p.width+n,a.marginTopReal+n);b.hide();b.mouseover(function(){a.rollOverZB()}).mouseout(function(){a.rollOutZB()}).click(function(){a.clickZB()}).touchstart(function(){a.rollOverZB()}).touchend(function(){a.rollOutZB();a.clickZB()});for(l=0;l<b.length;l++)b[l].attr({cursor:"pointer"});a.zbSet=b}},rollOverZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonRollOverAlpha)},rollOutZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonAlpha)},clickZB:function(){this.zoomOut()},zoomOut:function(){this.updateScrollbar=!0;this.zoom()},drawPlotArea:function(){var a=this.dx,b=this.dy,c=this.marginLeftReal,e=this.marginTopReal,h=this.plotAreaWidth-1,f=this.plotAreaHeight-1,g=this.plotAreaFillColors,k=this.plotAreaFillAlphas,l=this.plotAreaBorderColor,m=this.plotAreaBorderAlpha;"object"==typeof k&&(k=k[0]);g=d.polygon(this.container,[0,h,h,0,0],[0,0,f,f,0],g,k,1,l,m,this.plotAreaGradientAngle);d.setCN(this,g,"plot-area");g.translate(c+a,e+b);this.set.push(g);0!==a&&0!==b&&(g=this.plotAreaFillColors,"object"==typeof g&&(g=g[0]),g=d.adjustLuminosity(g,-.15),h=d.polygon(this.container,[0,a,h+a,h,0],[0,b,b,0,0],g,k,1,l,m),d.setCN(this,h,"plot-area-bottom"),h.translate(c,e+f),this.set.push(h),a=d.polygon(this.container,[0,0,a,a,0],[0,f,f+b,b,0],g,k,1,l,m),d.setCN(this,a,"plot-area-left"),a.translate(c,e),this.set.push(a));(c=this.bbset)&&this.scrollbarOnly&&c.remove()},updatePlotArea:function(){var a=this.updateWidth(),b=this.updateHeight(),c=this.container;this.realWidth=a;this.realWidth=b;c&&this.container.setSize(a,b);a=a-this.marginLeftReal-this.marginRightReal-this.dx;b=b-this.marginTopReal-this.marginBottomReal;1>a&&(a=1);1>b&&(b=1);this.plotAreaWidth=Math.round(a);this.plotAreaHeight=Math.round(b)},updateDxy:function(){this.dx=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180));this.dy=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180));this.d3x=Math.round(this.columnSpacing3D*Math.cos(this.angle*Math.PI/180));this.d3y=Math.round(-this.columnSpacing3D*Math.sin(this.angle*Math.PI/180))},updateMargins:function(){var a=this.getTitleHeight();this.titleHeight=a;this.marginTopReal=this.marginTop-this.dy;this.fixMargins&&!this.fixMargins.top&&(this.marginTopReal+=a);this.marginBottomReal=this.marginBottom;this.marginLeftReal=this.marginLeft;this.marginRightReal=this.marginRight},updateValueAxes:function(){var a=this.valueAxes,b=this.marginLeftReal,c=this.marginTopReal,e=this.plotAreaHeight,h=this.plotAreaWidth,f;for(f=0;f<a.length;f++){var g=a[f];g.axisRenderer=d.RecAxis;g.guideFillRenderer=d.RecFill;g.axisItemRenderer=d.RecItem;g.dx=this.dx;g.dy=this.dy;g.viW=h-1;g.viH=e-1;g.marginsChanged=!0;g.viX=b;g.viY=c;this.updateObjectSize(g)}},updateObjectSize:function(a){a.width=(this.plotAreaWidth-1)*this.widthMultiplier;a.height=(this.plotAreaHeight-1)*this.heightMultiplier;a.x=this.marginLeftReal+this.horizontalPosition;a.y=this.marginTopReal+this.verticalPosition},updateGraphs:function(){var a=this.graphs,b;for(b=0;b<a.length;b++){var c=a[b];c.x=this.marginLeftReal+this.horizontalPosition;c.y=this.marginTopReal+this.verticalPosition;c.width=this.plotAreaWidth*this.widthMultiplier;c.height=this.plotAreaHeight*this.heightMultiplier;c.index=b;c.dx=this.dx;c.dy=this.dy;c.rotate=this.rotate}},updateChartCursor:function(){var a=this.chartCursor;a&&(a=d.processObject(a,d.ChartCursor,this.theme),this.addChartCursor(a),a.x=this.marginLeftReal,a.y=this.marginTopReal,a.width=this.plotAreaWidth-1,a.height=this.plotAreaHeight-1,a.chart=this)},processScrollbars:function(){var a=this.chartScrollbar;a&&(a=d.processObject(a,d.ChartScrollbar,this.theme),this.addChartScrollbar(a))},updateScrollbars:function(){},addChartCursor:function(a){d.callMethod("destroy",[this.chartCursor]);a&&(this.listenTo(a,"changed",this.handleCursorChange),this.listenTo(a,"zoomed",this.handleCursorZoom));this.chartCursor=a},removeChartCursor:function(){d.callMethod("destroy",[this.chartCursor]);this.chartCursor=null},zoomTrendLines:function(){var a=this.trendLines,b;for(b=0;b<a.length;b++){var c=a[b];c.valueAxis.recalculateToPercents?c.set&&c.set.hide():(c.x=this.marginLeftReal+this.horizontalPosition,c.y=this.marginTopReal+this.verticalPosition,c.draw())}},addTrendLine:function(a){this.trendLines.push(a)},removeTrendLine:function(a){var b=this.trendLines,c;for(c=b.length-1;0<=c;c--)b[c]==a&&b.splice(c,1)},adjustMargins:function(a,b){var c=a.position,e=a.scrollbarHeight+a.offset;a.enabled&&("top"==c?b?this.marginLeftReal+=e:this.marginTopReal+=e:b?this.marginRightReal+=e:this.marginBottomReal+=e)},getScrollbarPosition:function(a,b,c){var e="bottom",d="top";a.oppositeAxis||(d=e,e="top");a.position=b?"bottom"==c||"left"==c?e:d:"top"==c||"right"==c?e:d},updateChartScrollbar:function(a,b){if(a){a.rotate=b;var c=this.marginTopReal,e=this.marginLeftReal,d=a.scrollbarHeight,f=this.dx,g=this.dy,k=a.offset;"top"==a.position?b?(a.y=c,a.x=e-d-k):(a.y=c-d+g-k,a.x=e+f):b?(a.y=c+g,a.x=e+this.plotAreaWidth+f+k):(a.y=c+this.plotAreaHeight+k,a.x=this.marginLeftReal)}},showZB:function(a){var b=this.zbSet;a&&(b=this.zoomOutText,""!==b&&b&&this.drawZoomOutButton());if(b=this.zbSet)this.zoomButtonSet.push(b),a?b.show():b.hide(),this.rollOutZB()},handleReleaseOutside:function(a){d.AmRectangularChart.base.handleReleaseOutside.call(this,a);(a=this.chartCursor)&&a.handleReleaseOutside&&a.handleReleaseOutside()},handleMouseDown:function(a){d.AmRectangularChart.base.handleMouseDown.call(this,a);var b=this.chartCursor;b&&b.handleMouseDown&&b.handleMouseDown(a)},handleCursorChange:function(){},update:function(){d.AmRectangularChart.base.update.call(this);this.chartCursor&&this.chartCursor.update&&this.chartCursor.update()}})})();(function(){var d=window.AmCharts;d.TrendLine=d.Class({construct:function(a){this.cname="TrendLine";this.createEvents("click");this.isProtected=!1;this.dashLength=0;this.lineColor="#00CC00";this.lineThickness=this.lineAlpha=1;d.applyTheme(this,a,this.cname)},draw:function(){var a=this;a.destroy();var b=a.chart,c=b.container,e,h,f,g,k=a.categoryAxis,l=a.initialDate,m=a.initialCategory,n=a.finalDate,p=a.finalCategory,q=a.valueAxis,r=a.valueAxisX,u=a.initialXValue,t=a.finalXValue,z=a.initialValue,y=a.finalValue,v=q.recalculateToPercents,w=b.dataDateFormat;k&&(l&&(l=d.getDate(l,w,"fff"),a.initialDate=l,e=k.dateToCoordinate(l)),m&&(e=k.categoryToCoordinate(m)),n&&(n=d.getDate(n,w,"fff"),a.finalDate=n,h=k.dateToCoordinate(n)),p&&(h=k.categoryToCoordinate(p)));r&&!v&&(isNaN(u)||(e=r.getCoordinate(u)),isNaN(t)||(h=r.getCoordinate(t)));q&&!v&&(isNaN(z)||(f=q.getCoordinate(z)),isNaN(y)||(g=q.getCoordinate(y)));if(!(isNaN(e)||isNaN(h)||isNaN(f)||isNaN(f))){b.rotate?(k=[f,g],g=[e,h]):(k=[e,h],g=[f,g]);l=a.lineColor;f=d.line(c,k,g,l,a.lineAlpha,a.lineThickness,a.dashLength);e=k;h=g;p=k[1]-k[0];q=g[1]-g[0];0===p&&(p=.01);0===q&&(q=.01);m=p/Math.abs(p);n=q/Math.abs(q);q=p*q/Math.abs(p*q)*Math.sqrt(Math.pow(p,2)+Math.pow(q,2));p=Math.asin(p/q);q=90*Math.PI/180-p;p=Math.abs(5*Math.cos(q));q=Math.abs(5*Math.sin(q));e.push(k[1]-m*q,k[0]-m*q);h.push(g[1]+n*p,g[0]+n*p);k=d.polygon(c,e,h,l,.005,0);c=c.set([k,f]);c.translate(b.marginLeftReal,b.marginTopReal);b.trendLinesSet.push(c);d.setCN(b,f,"trend-line");d.setCN(b,f,"trend-line-"+a.id);a.line=f;a.set=c;if(f=a.initialImage)f=d.processObject(f,d.Image,a.theme),f.chart=b,f.draw(),f.translate(e[0]+f.offsetX,h[0]+f.offsetY),c.push(f.set);if(f=a.finalImage)f=d.processObject(f,d.Image,a.theme),f.chart=b,f.draw(),f.translate(e[1]+f.offsetX,h[1]+f.offsetY),c.push(f.set);k.mouseup(function(){a.handleLineClick()}).mouseover(function(){a.handleLineOver()}).mouseout(function(){a.handleLineOut()});k.touchend&&k.touchend(function(){a.handleLineClick()});c.clipRect(0,0,b.plotAreaWidth,b.plotAreaHeight)}},handleLineClick:function(){var a={type:"click",trendLine:this,chart:this.chart};this.fire(a.type,a)},handleLineOver:function(){var a=this.rollOverColor;void 0!==a&&this.line.attr({stroke:a})},handleLineOut:function(){this.line.attr({stroke:this.lineColor})},destroy:function(){d.remove(this.set)}})})();(function(){var d=window.AmCharts;d.Image=d.Class({construct:function(a){this.cname="Image";this.height=this.width=20;this.rotation=this.offsetY=this.offsetX=0;this.balloonColor=this.color="#000000";this.opacity=1;d.applyTheme(this,a,this.cname)},draw:function(){var a=this;a.set&&a.set.remove();var b=a.chart.container;a.set=b.set();var c,e;a.url?(c=b.image(a.url,0,0,a.width,a.height),e=1):a.svgPath&&(c=b.path(a.svgPath),c.setAttr("fill",a.color),c.setAttr("stroke",a.outlineColor),b=c.getBBox(),e=Math.min(a.width/b.width,a.height/b.height));c&&(c.setAttr("opacity",a.opacity),a.set.rotate(a.rotation),c.translate(-a.width/2,-a.height/2,e),a.balloonText&&c.mouseover(function(b){a.chart.showBalloon(a.balloonText,a.balloonColor,!0)}).mouseout(function(b){a.chart.hideBalloon()}).touchend(function(b){a.chart.hideBalloon()}).touchstart(function(b){a.chart.showBalloon(a.balloonText,a.balloonColor,!0)}),a.set.push(c))},translate:function(a,b){this.set&&this.set.translate(a,b)}})})();(function(){var d=window.AmCharts;d.circle=function(a,b,c,e,h,f,g,k,l){0>=b&&(b=.001);if(void 0==h||0===h)h=.01;void 0===f&&(f="#000000");void 0===g&&(g=0);e={fill:c,stroke:f,"fill-opacity":e,"stroke-width":h,"stroke-opacity":g};a=isNaN(l)?a.circle(0,0,b).attr(e):a.ellipse(0,0,b,l).attr(e);k&&a.gradient("radialGradient",[c,d.adjustLuminosity(c,-.6)]);return a};d.text=function(a,b,c,e,h,f,g,k){f||(f="middle");"right"==f&&(f="end");"left"==f&&(f="start");isNaN(k)&&(k=1);void 0!==b&&(b=String(b),d.isIE&&!d.isModern&&(b=b.replace("&amp;","&"),b=b.replace("&","&amp;")));c={fill:c,"font-family":e,"font-size":h,opacity:k};!0===g&&(c["font-weight"]="bold");c["text-anchor"]=f;return a.text(b,c)};d.polygon=function(a,b,c,e,h,f,g,k,l,m,n){isNaN(f)&&(f=.01);isNaN(k)&&(k=h);var p=e,q=!1;"object"==typeof p&&1<p.length&&(q=!0,p=p[0]);void 0===g&&(g=p);h={fill:p,stroke:g,"fill-opacity":h,"stroke-width":f,"stroke-opacity":k};void 0!==n&&0<n&&(h["stroke-dasharray"]=n);n=d.dx;f=d.dy;a.handDrawn&&(c=d.makeHD(b,c,a.handDrawScatter),b=c[0],c=c[1]);g=Math.round;m&&(g=d.doNothing);m="M"+(g(b[0])+n)+","+(g(c[0])+f);for(k=1;k<b.length;k++)m+=" L"+(g(b[k])+n)+","+(g(c[k])+f);a=a.path(m+" Z").attr(h);q&&a.gradient("linearGradient",e,l);return a};d.rect=function(a,b,c,e,h,f,g,k,l,m,n){if(isNaN(b)||isNaN(c))return a.set();isNaN(f)&&(f=0);void 0===l&&(l=0);void 0===m&&(m=270);isNaN(h)&&(h=0);var p=e,q=!1;"object"==typeof p&&(p=p[0],q=!0);void 0===g&&(g=p);void 0===k&&(k=h);b=Math.round(b);c=Math.round(c);var r=0,u=0;0>b&&(b=Math.abs(b),r=-b);0>c&&(c=Math.abs(c),u=-c);r+=d.dx;u+=d.dy;h={fill:p,stroke:g,"fill-opacity":h,"stroke-opacity":k};void 0!==n&&0<n&&(h["stroke-dasharray"]=n);a=a.rect(r,u,b,c,l,f).attr(h);q&&a.gradient("linearGradient",e,m);return a};d.bullet=function(a,b,c,e,h,f,g,k,l,m,n,p){var q;"circle"==b&&(b="round");switch(b){case"round":q=d.circle(a,c/2,e,h,f,g,k);break;case"square":q=d.polygon(a,[-c/2,c/2,c/2,-c/2],[c/2,c/2,-c/2,-c/2],e,h,f,g,k,m-180);break;case"rectangle":q=d.polygon(a,[-c,c,c,-c],[c/2,c/2,-c/2,-c/2],e,h,f,g,k,m-180);break;case"diamond":q=d.polygon(a,[-c/2,0,c/2,0],[0,-c/2,0,c/2],e,h,f,g,k);break;case"triangleUp":q=d.triangle(a,c,0,e,h,f,g,k);break;case"triangleDown":q=d.triangle(a,c,180,e,h,f,g,k);break;case"triangleLeft":q=d.triangle(a,c,270,e,h,f,g,k);break;case"triangleRight":q=d.triangle(a,c,90,e,h,f,g,k);break;case"bubble":q=d.circle(a,c/2,e,h,f,g,k,!0);break;case"line":q=d.line(a,[-c/2,c/2],[0,0],e,h,f,g,k);break;case"yError":q=a.set();q.push(d.line(a,[0,0],[-c/2,c/2],e,h,f));q.push(d.line(a,[-l,l],[-c/2,-c/2],e,h,f));q.push(d.line(a,[-l,l],[c/2,c/2],e,h,f));break;case"xError":q=a.set(),q.push(d.line(a,[-c/2,c/2],[0,0],e,h,f)),q.push(d.line(a,[-c/2,-c/2],[-l,l],e,h,f)),q.push(d.line(a,[c/2,c/2],[-l,l],e,h,f))}q&&q.pattern(n,NaN,p);return q};d.triangle=function(a,b,c,e,d,f,g,k){if(void 0===f||0===f)f=1;void 0===g&&(g="#000");void 0===k&&(k=0);e={fill:e,stroke:g,"fill-opacity":d,"stroke-width":f,"stroke-opacity":k};b/=2;var l;0===c&&(l=" M"+-b+","+b+" L0,"+-b+" L"+b+","+b+" Z");180==c&&(l=" M"+-b+","+-b+" L0,"+b+" L"+b+","+-b+" Z");90==c&&(l=" M"+-b+","+-b+" L"+b+",0 L"+-b+","+b+" Z");270==c&&(l=" M"+-b+",0 L"+b+","+b+" L"+b+","+-b+" Z");return a.path(l).attr(e)};d.line=function(a,b,c,e,h,f,g,k,l,m,n){if(a.handDrawn&&!n)return d.handDrawnLine(a,b,c,e,h,f,g,k,l,m,n);f={fill:"none","stroke-width":f};void 0!==g&&0<g&&(f["stroke-dasharray"]=g);isNaN(h)||(f["stroke-opacity"]=h);e&&(f.stroke=e);e=Math.round;m&&(e=d.doNothing);m=d.dx;h=d.dy;g="M"+(e(b[0])+m)+","+(e(c[0])+h);for(k=1;k<b.length;k++)g+=" L"+(e(b[k])+m)+","+(e(c[k])+h);if(d.VML)return a.path(g,void 0,!0).attr(f);l&&(g+=" M0,0 L0,0");return a.path(g).attr(f)};d.makeHD=function(a,b,c){for(var e=[],d=[],f=1;f<a.length;f++)for(var g=Number(a[f-1]),k=Number(b[f-1]),l=Number(a[f]),m=Number(b[f]),n=Math.sqrt(Math.pow(l-g,2)+Math.pow(m-k,2)),n=Math.round(n/50)+1,l=(l-g)/n,m=(m-k)/n,p=0;p<=n;p++){var q=g+p*l+Math.random()*c,r=k+p*m+Math.random()*c;e.push(q);d.push(r)}return[e,d]};d.handDrawnLine=function(a,b,c,e,h,f,g,k,l,m){var n,p=a.set();for(n=1;n<b.length;n++)for(var q=[b[n-1],b[n]],r=[c[n-1],c[n]],r=d.makeHD(q,r,a.handDrawScatter),q=r[0],r=r[1],u=1;u<q.length;u++)p.push(d.line(a,[q[u-1],q[u]],[r[u-1],r[u]],e,h,f+Math.random()*a.handDrawThickness-a.handDrawThickness/2,g,k,l,m,!0));return p};d.doNothing=function(a){return a};d.wedge=function(a,b,c,e,h,f,g,k,l,m,n,p,q){var r=Math.round;f=r(f);g=r(g);k=r(k);var u=r(g/f*k),t=d.VML,z=359.5+f/100;359.94<z&&(z=359.94);h>=z&&(h=z);var y=1/180*Math.PI,z=b+Math.sin(e*y)*k,v=c-Math.cos(e*y)*u,w=b+Math.sin(e*y)*f,A=c-Math.cos(e*y)*g,B=b+Math.sin((e+h)*y)*f,C=c-Math.cos((e+h)*y)*g,D=b+Math.sin((e+h)*y)*k,y=c-Math.cos((e+h)*y)*u,J={fill:d.adjustLuminosity(m.fill,-.2),"stroke-opacity":0,"fill-opacity":m["fill-opacity"]},E=0;180<Math.abs(h)&&(E=1);e=a.set();var O;t&&(z=r(10*z),w=r(10*w),B=r(10*B),D=r(10*D),v=r(10*v),A=r(10*A),C=r(10*C),y=r(10*y),b=r(10*b),l=r(10*l),c=r(10*c),f*=10,g*=10,k*=10,u*=10,1>Math.abs(h)&&1>=Math.abs(B-
w)&&1>=Math.abs(C-A)&&(O=!0));h="";var I;p&&(J["fill-opacity"]=0,J["stroke-opacity"]=m["stroke-opacity"]/2,J.stroke=m.stroke);if(0<l){I=" M"+z+","+(v+l)+" L"+w+","+(A+l);t?(O||(I+=" A"+(b-f)+","+(l+c-g)+","+(b+f)+","+(l+c+g)+","+w+","+(A+l)+","+B+","+(C+l)),I+=" L"+D+","+(y+l),0<k&&(O||(I+=" B"+(b-k)+","+(l+c-u)+","+(b+k)+","+(l+c+u)+","+D+","+(l+y)+","+z+","+(l+v)))):(I+=" A"+f+","+g+",0,"+E+",1,"+B+","+(C+l)+" L"+D+","+(y+l),0<k&&(I+=" A"+k+","+u+",0,"+E+",0,"+z+","+(v+l)));I+=" Z";var W=l;t&&(W/=10);for(var ea=0;ea<W;ea+=10){var P=a.path(I,void 0,void 0,"1000,1000").attr(J);e.push(P);P.translate(0,-ea)}I=a.path(" M"+z+","+v+" L"+z+","+(v+l)+" L"+w+","+(A+l)+" L"+w+","+A+" L"+z+","+v+" Z",void 0,void 0,"1000,1000").attr(J);l=a.path(" M"+B+","+C+" L"+B+","+(C+l)+" L"+D+","+(y+l)+" L"+D+","+y+" L"+B+","+C+" Z",void 0,void 0,"1000,1000").attr(J);e.push(I);e.push(l)}t?(O||(h=" A"+r(b-f)+","+r(c-g)+","+r(b+f)+","+r(c+g)+","+r(w)+","+r(A)+","+r(B)+","+r(C)),f=" M"+r(z)+","+r(v)+" L"+r(w)+","+r(A)+
h+" L"+r(D)+","+r(y)):f=" M"+z+","+v+" L"+w+","+A+(" A"+f+","+g+",0,"+E+",1,"+B+","+C)+" L"+D+","+y;0<k&&(t?O||(f+=" B"+(b-k)+","+(c-u)+","+(b+k)+","+(c+u)+","+D+","+y+","+z+","+v):f+=" A"+k+","+u+",0,"+E+",0,"+z+","+v);a.handDrawn&&(b=d.line(a,[z,w],[v,A],m.stroke,m.thickness*Math.random()*a.handDrawThickness,m["stroke-opacity"]),e.push(b));a=a.path(f+" Z",void 0,void 0,"1000,1000").attr(m);if(n){b=[];for(c=0;c<n.length;c++)b.push(d.adjustLuminosity(m.fill,n[c]));0<b.length&&a.gradient("linearGradient",b)}a.pattern(p,NaN,q);e.wedge=a;e.push(a);return e};d.adjustLuminosity=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,"");6>a.length&&(a=String(a[0])+String(a[0])+String(a[1])+String(a[1])+String(a[2])+String(a[2]));b=b||0;var c="#",e,d;for(d=0;3>d;d++)e=parseInt(a.substr(2*d,2),16),e=Math.round(Math.min(Math.max(0,e+e*b),255)).toString(16),c+=("00"+e).substr(e.length);return c}})();(function(){var d=window.AmCharts;d.Bezier=d.Class({construct:function(a,b,c,e,h,f,g,k,l,m){"object"==typeof g&&(g=g[0]);"object"==typeof k&&(k=k[0]);0===k&&(g="none");f={fill:g,"fill-opacity":k,"stroke-width":f};void 0!==l&&0<l&&(f["stroke-dasharray"]=l);isNaN(h)||(f["stroke-opacity"]=h);e&&(f.stroke=e);e="M"+Math.round(b[0])+","+Math.round(c[0]);h=[];for(l=0;l<b.length;l++)h.push({x:Number(b[l]),y:Number(c[l])});1<h.length&&(b=this.interpolate(h),e+=this.drawBeziers(b));m?e+=m:d.VML||(e+="M0,0 L0,0");this.path=a.path(e).attr(f);this.node=this.path.node},interpolate:function(a){var b=[];b.push({x:a[0].x,y:a[0].y});var c=a[1].x-a[0].x,e=a[1].y-a[0].y,h=d.bezierX,f=d.bezierY;b.push({x:a[0].x+c/h,y:a[0].y+e/f});var g;for(g=1;g<a.length-1;g++){var k=a[g-1],l=a[g],e=a[g+1];isNaN(e.x)&&(e=l);isNaN(l.x)&&(l=k);isNaN(k.x)&&(k=l);c=e.x-l.x;e=e.y-k.y;k=l.x-k.x;k>c&&(k=c);b.push({x:l.x-k/h,y:l.y-e/f});b.push({x:l.x,y:l.y});b.push({x:l.x+k/h,y:l.y+e/f})}e=a[a.length-1].y-a[a.length-2].y;c=a[a.length-1].x-
a[a.length-2].x;b.push({x:a[a.length-1].x-c/h,y:a[a.length-1].y-e/f});b.push({x:a[a.length-1].x,y:a[a.length-1].y});return b},drawBeziers:function(a){var b="",c;for(c=0;c<(a.length-1)/3;c++)b+=this.drawBezierMidpoint(a[3*c],a[3*c+1],a[3*c+2],a[3*c+3]);return b},drawBezierMidpoint:function(a,b,c,e){var d=Math.round,f=this.getPointOnSegment(a,b,.75),g=this.getPointOnSegment(e,c,.75),k=(e.x-a.x)/16,l=(e.y-a.y)/16,m=this.getPointOnSegment(a,b,.375);a=this.getPointOnSegment(f,g,.375);a.x-=k;a.y-=l;b=this.getPointOnSegment(g,f,.375);b.x+=k;b.y+=l;c=this.getPointOnSegment(e,c,.375);k=this.getMiddle(m,a);f=this.getMiddle(f,g);g=this.getMiddle(b,c);m=" Q"+d(m.x)+","+d(m.y)+","+d(k.x)+","+d(k.y);m+=" Q"+d(a.x)+","+d(a.y)+","+d(f.x)+","+d(f.y);m+=" Q"+d(b.x)+","+d(b.y)+","+d(g.x)+","+d(g.y);return m+=" Q"+d(c.x)+","+d(c.y)+","+d(e.x)+","+d(e.y)},getMiddle:function(a,b){return{x:(a.x+b.x)/2,y:(a.y+b.y)/2}},getPointOnSegment:function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}}})})();(function(){var d=window.AmCharts;d.AmDraw=d.Class({construct:function(a,b,c,e){d.SVG_NS="http://www.w3.org/2000/svg";d.SVG_XLINK="http://www.w3.org/1999/xlink";d.hasSVG=!!document.createElementNS&&!!document.createElementNS(d.SVG_NS,"svg").createSVGRect;1>b&&(b=10);1>c&&(c=10);this.div=a;this.width=b;this.height=c;this.rBin=document.createElement("div");d.hasSVG?(d.SVG=!0,b=this.createSvgElement("svg"),a.appendChild(b),this.container=b,this.addDefs(e),this.R=new d.SVGRenderer(this)):d.isIE&&d.VMLRenderer&&(d.VML=!0,d.vmlStyleSheet||(document.namespaces.add("amvml","urn:schemas-microsoft-com:vml"),31>document.styleSheets.length?(b=document.createStyleSheet(),b.addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true"),d.vmlStyleSheet=b):document.styleSheets[0].addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true")),this.container=a,this.R=new d.VMLRenderer(this,e),this.R.disableSelection(a))},createSvgElement:function(a){return document.createElementNS(d.SVG_NS,a)},circle:function(a,b,c,e){var h=new d.AmDObject("circle",this);h.attr({r:c,cx:a,cy:b});this.addToContainer(h.node,e);return h},ellipse:function(a,b,c,e,h){var f=new d.AmDObject("ellipse",this);f.attr({rx:c,ry:e,cx:a,cy:b});this.addToContainer(f.node,h);return f},setSize:function(a,b){0<a&&0<b&&(this.container.style.width=a+"px",this.container.style.height=b+"px")},rect:function(a,b,c,e,h,f,g){var k=new d.AmDObject("rect",this);d.VML&&(h=Math.round(100*h/Math.min(c,e)),c+=2*f,e+=2*f,k.bw=f,k.node.style.marginLeft=-f,k.node.style.marginTop=-f);1>c&&(c=1);1>e&&(e=1);k.attr({x:a,y:b,width:c,height:e,rx:h,ry:h,"stroke-width":f});this.addToContainer(k.node,g);return k},image:function(a,b,c,e,h,f){var g=new d.AmDObject("image",this);g.attr({x:b,y:c,width:e,height:h});this.R.path(g,a);this.addToContainer(g.node,f);return g},addToContainer:function(a,b){b||(b=this.container);b.appendChild(a)},text:function(a,b,c){return this.R.text(a,b,c)},path:function(a,b,c,e){var h=new d.AmDObject("path",this);e||(e="100,100");h.attr({cs:e});c?h.attr({dd:a}):h.attr({d:a});this.addToContainer(h.node,b);return h},set:function(a){return this.R.set(a)},remove:function(a){if(a){var b=this.rBin;b.appendChild(a);b.innerHTML=""}},renderFix:function(){var a=this.container,b=a.style;b.top="0px";b.left="0px";var c=a.getBoundingClientRect(),a=c.left-Math.round(c.left),c=c.top-Math.round(c.top);a&&(b.left=a+"px");c&&(b.top=c+"px")},update:function(){this.R.update()},addDefs:function(a){if(d.hasSVG){var b=this.createSvgElement("desc"),c=this.container;c.setAttribute("version","1.1");c.style.position="absolute";this.setSize(this.width,this.height);d.rtl&&(c.setAttribute("direction","rtl"),c.style.left="auto",c.style.right="0px");a.addCodeCredits&&b.appendChild(document.createTextNode("JavaScript chart by amCharts "+a.version));c.appendChild(b);a.defs&&(b=this.createSvgElement("defs"),c.appendChild(b),d.parseDefs(a.defs,b),this.defs=b)}}})})();(function(){var d=window.AmCharts;d.AmDObject=d.Class({construct:function(a,b){this.D=b;this.R=b.R;this.node=this.R.create(this,a);this.y=this.x=0;this.scale=1},attr:function(a){this.R.attr(this,a);return this},getAttr:function(a){return this.node.getAttribute(a)},setAttr:function(a,b){this.R.setAttr(this,a,b);return this},clipRect:function(a,b,c,d){this.R.clipRect(this,a,b,c,d)},translate:function(a,b,c,d){d||(a=Math.round(a),b=Math.round(b));this.R.move(this,a,b,c);this.x=a;this.y=b;this.scale=c;this.angle&&this.rotate(this.angle)},rotate:function(a,b){this.R.rotate(this,a,b);this.angle=a},animate:function(a,b,c){for(var e in a)if(a.hasOwnProperty(e)){var h=e,f=a[e];c=d.getEffect(c);this.R.animate(this,h,f,b,c)}},push:function(a){if(a){var b=this.node;b.appendChild(a.node);var c=a.clipPath;c&&b.appendChild(c);(a=a.grad)&&b.appendChild(a)}},text:function(a){this.R.setText(this,a)},remove:function(){this.R.remove(this)},clear:function(){var a=this.node;if(a.hasChildNodes())for(;1<=a.childNodes.length;)a.removeChild(a.firstChild)},hide:function(){this.setAttr("visibility","hidden")},show:function(){this.setAttr("visibility","visible")},getBBox:function(){return this.R.getBBox(this)},toFront:function(){var a=this.node;if(a){this.prevNextNode=a.nextSibling;var b=a.parentNode;b&&b.appendChild(a)}},toPrevious:function(){var a=this.node;a&&this.prevNextNode&&(a=a.parentNode)&&a.insertBefore(this.prevNextNode,null)},toBack:function(){var a=this.node;if(a){this.prevNextNode=a.nextSibling;var b=a.parentNode;if(b){var c=b.firstChild;c&&b.insertBefore(a,c)}}},mouseover:function(a){this.R.addListener(this,"mouseover",a);return this},mouseout:function(a){this.R.addListener(this,"mouseout",a);return this},click:function(a){this.R.addListener(this,"click",a);return this},dblclick:function(a){this.R.addListener(this,"dblclick",a);return this},mousedown:function(a){this.R.addListener(this,"mousedown",a);return this},mouseup:function(a){this.R.addListener(this,"mouseup",a);return this},touchstart:function(a){this.R.addListener(this,"touchstart",a);return this},touchend:function(a){this.R.addListener(this,"touchend",a);return this},contextmenu:function(a){this.node.addEventListener?this.node.addEventListener("contextmenu",a,!0):this.R.addListener(this,"contextmenu",a);return this},stop:function(){d.removeFromArray(this.R.animations,this.an_x);d.removeFromArray(this.R.animations,this.an_y)},length:function(){return this.node.childNodes.length},gradient:function(a,b,c){this.R.gradient(this,a,b,c)},pattern:function(a,b,c){a&&this.R.pattern(this,a,b,c)}})})();(function(){var d=window.AmCharts;d.VMLRenderer=d.Class({construct:function(a,b){this.chart=b;this.D=a;this.cNames={circle:"oval",ellipse:"oval",rect:"roundrect",path:"shape"};this.styleMap={x:"left",y:"top",width:"width",height:"height","font-family":"fontFamily","font-size":"fontSize",visibility:"visibility"}},create:function(a,b){var c;if("group"==b)c=document.createElement("div"),a.type="div";else if("text"==b)c=document.createElement("div"),a.type="text";else if("image"==b)c=document.createElement("img"),a.type="image";else{a.type="shape";a.shapeType=this.cNames[b];c=document.createElement("amvml:"+this.cNames[b]);var d=document.createElement("amvml:stroke");c.appendChild(d);a.stroke=d;var h=document.createElement("amvml:fill");c.appendChild(h);a.fill=h;h.className="amvml";d.className="amvml";c.className="amvml"}c.style.position="absolute";c.style.top=0;c.style.left=0;return c},path:function(a,b){a.node.setAttribute("src",b)},setAttr:function(a,b,c){if(void 0!==c){var e;8===document.documentMode&&(e=!0);var h=a.node,f=a.type,g=h.style;"r"==b&&(g.width=2*c,g.height=2*c);"oval"==a.shapeType&&("rx"==b&&(g.width=2*c),"ry"==b&&(g.height=2*c));"roundrect"==a.shapeType&&("width"!=b&&"height"!=b||--c);"cursor"==b&&(g.cursor=c);"cx"==b&&(g.left=c-d.removePx(g.width)/2);"cy"==b&&(g.top=c-d.removePx(g.height)/2);var k=this.styleMap[b];void 0!==k&&(g[k]=c);"text"==f&&("text-anchor"==b&&(a.anchor=c,k=h.clientWidth,"end"==c&&(g.marginLeft=-k+"px"),"middle"==c&&(g.marginLeft=-(k/2)+"px",g.textAlign="center"),"start"==c&&(g.marginLeft="0px")),"fill"==b&&(g.color=c),"font-weight"==b&&(g.fontWeight=c));if(g=a.children)for(k=0;k<g.length;k++)g[k].setAttr(b,c);if("shape"==f){"cs"==b&&(h.style.width="100px",h.style.height="100px",h.setAttribute("coordsize",c));"d"==b&&h.setAttribute("path",this.svgPathToVml(c));"dd"==b&&h.setAttribute("path",c);f=a.stroke;a=a.fill;"stroke"==b&&(e?f.color=c:f.setAttribute("color",c));"stroke-width"==b&&(e?f.weight=c:f.setAttribute("weight",c));"stroke-opacity"==b&&(e?f.opacity=c:f.setAttribute("opacity",c));"stroke-dasharray"==b&&(g="solid",0<c&&3>c&&(g="dot"),3<=c&&6>=c&&(g="dash"),6<c&&(g="longdash"),e?f.dashstyle=g:f.setAttribute("dashstyle",g));if("fill-opacity"==b||"opacity"==b)0===c?e?a.on=!1:a.setAttribute("on",!1):e?a.opacity=c:a.setAttribute("opacity",c);"fill"==b&&(e?a.color=c:a.setAttribute("color",c));"rx"==b&&(e?h.arcSize=c+"%":h.setAttribute("arcsize",c+"%"))}}},attr:function(a,b){for(var c in b)b.hasOwnProperty(c)&&this.setAttr(a,c,b[c])},text:function(a,b,c){var e=new d.AmDObject("text",this.D),h=e.node;h.style.whiteSpace="pre";h.innerHTML=a;this.D.addToContainer(h,c);this.attr(e,b);return e},getBBox:function(a){return this.getBox(a.node)},getBox:function(a){var b=a.offsetLeft,c=a.offsetTop,d=a.offsetWidth,h=a.offsetHeight,f;if(a.hasChildNodes()){var g,k,l;for(l=0;l<a.childNodes.length;l++){f=this.getBox(a.childNodes[l]);var m=f.x;isNaN(m)||(isNaN(g)?g=m:m<g&&(g=m));var n=f.y;isNaN(n)||(isNaN(k)?k=n:n<k&&(k=n));m=f.width+m;isNaN(m)||(d=Math.max(d,m));f=f.height+n;isNaN(f)||(h=Math.max(h,f))}0>g&&(b+=g);0>k&&(c+=k)}return{x:b,y:c,width:d,height:h}},setText:function(a,b){var c=a.node;c&&(c.innerHTML=b);this.setAttr(a,"text-anchor",a.anchor)},addListener:function(a,b,c){a.node["on"+b]=c},move:function(a,b,c){var e=a.node,h=e.style;"text"==a.type&&(c-=d.removePx(h.fontSize)/2-1);"oval"==a.shapeType&&(b-=d.removePx(h.width)/2,c-=d.removePx(h.height)/2);a=a.bw;isNaN(a)||(b-=a,c-=a);isNaN(b)||isNaN(c)||(e.style.left=b+"px",e.style.top=c+"px")},svgPathToVml:function(a){var b=a.split(" ");a="";var c,d=Math.round,h;for(h=0;h<b.length;h++){var f=b[h],g=f.substring(0,1),f=f.substring(1),k=f.split(","),l=d(k[0])+","+d(k[1]);"M"==g&&(a+=" m "+l);"L"==g&&(a+=" l "+l);"Z"==g&&(a+=" x e");if("Q"==g){var m=c.length,n=c[m-1],p=k[0],q=k[1],l=k[2],r=k[3];c=d(c[m-2]/3+2/3*p);n=d(n/3+2/3*q);p=d(2/3*p+l/3);q=d(2/3*q+r/3);a+=" c "+c+","+n+","+p+","+q+","+l+","+r}"A"==g&&(a+=" wa "+f);"B"==g&&(a+=" at "+f);c=k}return a},animate:function(a,b,c,d,h){var f=a.node,g=this.chart;if("translate"==b){b=c.split(",");c=b[1];var k=f.offsetTop;g.animate(a,"left",f.offsetLeft,b[0],d,h,"px");g.animate(a,"top",k,c,d,h,"px")}},clipRect:function(a,b,c,d,h){a=a.node;0===b&&0===c?(a.style.width=d+"px",a.style.height=h+"px",a.style.overflow="hidden"):a.style.clip="rect("+c+"px "+(b+d)+"px "+(c+h)+"px "+b+"px)"},rotate:function(a,b,c){if(0!==Number(b)){var e=a.node;a=e.style;c||(c=this.getBGColor(e.parentNode));a.backgroundColor=c;a.paddingLeft=1;c=b*Math.PI/180;var h=Math.cos(c),f=Math.sin(c),g=d.removePx(a.left),k=d.removePx(a.top),l=e.offsetWidth,e=e.offsetHeight;b/=Math.abs(b);a.left=g+l/2-l/2*Math.cos(c)-b*e/2*Math.sin(c)+3;a.top=k-b*l/2*Math.sin(c)+b*e/2*Math.sin(c);a.cssText=a.cssText+"; filter:progid:DXImageTransform.Microsoft.Matrix(M11='"+h+"', M12='"+-f+"', M21='"+f+"', M22='"+h+"', sizingmethod='auto expand');"}},getBGColor:function(a){var b="#FFFFFF";if(a.style){var c=a.style.backgroundColor;""!==c?b=c:a.parentNode&&(b=this.getBGColor(a.parentNode))}return b},set:function(a){var b=new d.AmDObject("group",this.D);this.D.container.appendChild(b.node);if(a){var c;for(c=0;c<a.length;c++)b.push(a[c])}return b},gradient:function(a,b,c,d){var h="";"radialGradient"==b&&(b="gradientradial",c.reverse());"linearGradient"==b&&(b="gradient");var f;for(f=0;f<c.length;f++){var g=Math.round(100*f/(c.length-1)),h=h+(g+"% "+c[f]);f<c.length-1&&(h+=",")}a=a.fill;90==d?d=0:270==d?d=180:180==d?d=90:0===d&&(d=270);8===document.documentMode?(a.type=b,a.angle=d):(a.setAttribute("type",b),a.setAttribute("angle",d));h&&(a.colors.value=h)},remove:function(a){a.clipPath&&this.D.remove(a.clipPath);this.D.remove(a.node)},disableSelection:function(a){void 0!==typeof a.onselectstart&&(a.onselectstart=function(){return!1});a.style.cursor="default"},pattern:function(a,b,c,e){c=a.node;a=a.fill;var h="none";b.color&&(h=b.color);c.fillColor=h;b=b.url;d.isAbsolute(b)||(b=e+b);8===document.documentMode?(a.type="tile",a.src=b):(a.setAttribute("type","tile"),a.setAttribute("src",b))},update:function(){}})})();(function(){var d=window.AmCharts;d.SVGRenderer=d.Class({construct:function(a){this.D=a;this.animations=[]},create:function(a,b){return document.createElementNS(d.SVG_NS,b)},attr:function(a,b){for(var c in b)b.hasOwnProperty(c)&&this.setAttr(a,c,b[c])},setAttr:function(a,b,c){void 0!==c&&a.node.setAttribute(b,c)},animate:function(a,b,c,e,h){var f=a.node;a["an_"+b]&&d.removeFromArray(this.animations,a["an_"+b]);"translate"==b?(f=(f=f.getAttribute("transform"))?String(f).substring(10,f.length-1):"0,0",f=f.split(", ").join(" "),f=f.split(" ").join(","),0===f&&(f="0,0")):f=Number(f.getAttribute(b));c={obj:a,frame:0,attribute:b,from:f,to:c,time:e,effect:h};this.animations.push(c);a["an_"+b]=c},update:function(){var a,b=this.animations;for(a=b.length-1;0<=a;a--){var c=b[a],e=1E3*c.time/d.updateRate,h=c.frame+1,f=c.obj,g=c.attribute,k,l,m;h<=e?(c.frame++,"translate"==g?(k=c.from.split(","),g=Number(k[0]),k=Number(k[1]),isNaN(k)&&(k=0),l=c.to.split(","),m=Number(l[0]),l=Number(l[1]),m=0===m-g?m:Math.round(d[c.effect](0,h,g,m-g,e)),c=0===l-k?l:Math.round(d[c.effect](0,h,k,l-k,e)),g="transform",c="translate("+m+","+c+")"):(l=Number(c.from),k=Number(c.to),m=k-l,c=d[c.effect](0,h,l,m,e),isNaN(c)&&(c=k),0===m&&this.animations.splice(a,1)),this.setAttr(f,g,c)):("translate"==g?(l=c.to.split(","),m=Number(l[0]),l=Number(l[1]),f.translate(m,l)):(k=Number(c.to),this.setAttr(f,g,k)),this.animations.splice(a,1))}},getBBox:function(a){if(a=a.node)try{return a.getBBox()}catch(b){}return{width:0,height:0,x:0,y:0}},path:function(a,b){a.node.setAttributeNS(d.SVG_XLINK,"xlink:href",b)},clipRect:function(a,b,c,e,h){var f=a.node,g=a.clipPath;g&&this.D.remove(g);var k=f.parentNode;k&&(f=document.createElementNS(d.SVG_NS,"clipPath"),g=d.getUniqueId(),f.setAttribute("id",g),this.D.rect(b,c,e,h,0,0,f),k.appendChild(f),b="#",d.baseHref&&!d.isIE&&(b=this.removeTarget(window.location.href)+b),this.setAttr(a,"clip-path","url("+b+g+")"),this.clipPathC++,a.clipPath=f)},text:function(a,b,c){var e=new d.AmDObject("text",this.D);a=String(a).split("\n");var h=b["font-size"],f;for(f=0;f<a.length;f++){var g=this.create(null,"tspan");g.appendChild(document.createTextNode(a[f]));g.setAttribute("y",(h+2)*f+Math.round(h/2));g.setAttribute("x",0);g.style.fontSize=h+"px";e.node.appendChild(g)}e.node.setAttribute("y",Math.round(h/2));this.attr(e,b);this.D.addToContainer(e.node,c);return e},setText:function(a,b){var c=a.node;c&&(c.removeChild(c.firstChild),c.appendChild(document.createTextNode(b)))},move:function(a,b,c,d){isNaN(b)&&(b=0);isNaN(c)&&(c=0);b="translate("+b+","+c+")";d&&(b=b+" scale("+d+")");this.setAttr(a,"transform",b)},rotate:function(a,b){var c=a.node.getAttribute("transform"),d="rotate("+b+")";c&&(d=c+" "+d);this.setAttr(a,"transform",d)},set:function(a){var b=new d.AmDObject("g",this.D);this.D.container.appendChild(b.node);if(a){var c;for(c=0;c<a.length;c++)b.push(a[c])}return b},addListener:function(a,b,c){a.node["on"+b]=c},gradient:function(a,b,c,e){var h=a.node,f=a.grad;f&&this.D.remove(f);b=document.createElementNS(d.SVG_NS,b);f=d.getUniqueId();b.setAttribute("id",f);if(!isNaN(e)){var g=0,k=0,l=0,m=0;90==e?l=100:270==e?m=100:180==e?g=100:0===e&&(k=100);b.setAttribute("x1",g+"%");b.setAttribute("x2",k+"%");b.setAttribute("y1",l+"%");b.setAttribute("y2",m+"%")}for(e=0;e<c.length;e++)g=document.createElementNS(d.SVG_NS,"stop"),k=100*e/(c.length-1),0===e&&(k=0),g.setAttribute("offset",k+"%"),g.setAttribute("stop-color",c[e]),b.appendChild(g);h.parentNode.appendChild(b);c="#";d.baseHref&&!d.isIE&&(c=this.removeTarget(window.location.href)+
c);h.setAttribute("fill","url("+c+f+")");a.grad=b},removeTarget:function(a){return a.split("#")[0]},pattern:function(a,b,c,e){var h=a.node;isNaN(c)&&(c=1);var f=a.patternNode;f&&this.D.remove(f);var f=document.createElementNS(d.SVG_NS,"pattern"),g=d.getUniqueId(),k=b;b.url&&(k=b.url);d.isAbsolute(k)||(k=e+k);e=Number(b.width);isNaN(e)&&(e=4);var l=Number(b.height);isNaN(l)&&(l=4);e/=c;l/=c;c=b.x;isNaN(c)&&(c=0);var m=-Math.random()*Number(b.randomX);isNaN(m)||(c=m);m=b.y;isNaN(m)&&(m=0);var n=-Math.random()*Number(b.randomY);isNaN(n)||(m=n);f.setAttribute("id",g);f.setAttribute("width",e);f.setAttribute("height",l);f.setAttribute("patternUnits","userSpaceOnUse");f.setAttribute("xlink:href",k);b.color&&(n=document.createElementNS(d.SVG_NS,"rect"),n.setAttributeNS(null,"height",e),n.setAttributeNS(null,"width",l),n.setAttributeNS(null,"fill",b.color),f.appendChild(n));this.D.image(k,0,0,e,l,f).translate(c,m);k="#";d.baseHref&&!d.isIE&&(k=this.removeTarget(window.location.href)+k);h.setAttribute("fill","url("+k+g+")");a.patternNode=f;h.parentNode.appendChild(f)},remove:function(a){a.clipPath&&this.D.remove(a.clipPath);a.grad&&this.D.remove(a.grad);a.patternNode&&this.D.remove(a.patternNode);this.D.remove(a.node)}})})();AmCharts.AmDSet=AmCharts.Class({construct:function(d){this.create("g")},attr:function(d){this.R.attr(this.node,d)},move:function(d,a){this.R.move(this.node,d,a)}});(function(){var d=window.AmCharts;d.AmLegend=d.Class({construct:function(a){this.enabled=!0;this.cname="AmLegend";this.createEvents("rollOverMarker","rollOverItem","rollOutMarker","rollOutItem","showItem","hideItem","clickMarker","rollOverItem","rollOutItem","clickLabel");this.position="bottom";this.borderColor=this.color="#000000";this.borderAlpha=0;this.markerLabelGap=5;this.verticalGap=10;this.align="left";this.horizontalGap=0;this.spacing=10;this.markerDisabledColor="#AAB3B3";this.markerType="square";this.markerSize=16;this.markerBorderThickness=this.markerBorderAlpha=1;this.marginBottom=this.marginTop=0;this.marginLeft=this.marginRight=20;this.autoMargins=!0;this.valueWidth=50;this.switchable=!0;this.switchType="x";this.switchColor="#FFFFFF";this.rollOverColor="#CC0000";this.reversedOrder=!1;this.labelText="[[title]]";this.valueText="[[value]]";this.useMarkerColorForLabels=!1;this.rollOverGraphAlpha=1;this.textClickEnabled=!1;this.equalWidths=!0;this.backgroundColor="#FFFFFF";this.backgroundAlpha=0;this.useGraphSettings=!1;this.showEntries=!0;d.applyTheme(this,a,this.cname)},setData:function(a){this.legendData=a;this.invalidateSize()},invalidateSize:function(){this.destroy();this.entries=[];this.valueLabels=[];var a=this.legendData;this.enabled&&(d.ifArray(a)||d.ifArray(this.data))&&this.drawLegend()},drawLegend:function(){var a=this.chart,b=this.position,c=this.width,e=a.divRealWidth,h=a.divRealHeight,f=this.div,g=this.legendData;this.data&&(g=this.data);isNaN(this.fontSize)&&(this.fontSize=a.fontSize);if("right"==b||"left"==b)this.maxColumns=1,this.autoMargins&&(this.marginLeft=this.marginRight=10);else if(this.autoMargins){this.marginRight=a.marginRight;this.marginLeft=a.marginLeft;var k=a.autoMarginOffset;"bottom"==b?(this.marginBottom=k,this.marginTop=0):(this.marginTop=k,this.marginBottom=0)}c=void 0!==c?d.toCoordinate(c,e):a.realWidth;"outside"==b?(c=f.offsetWidth,h=f.offsetHeight,f.clientHeight&&(c=f.clientWidth,h=f.clientHeight)):(isNaN(c)||(f.style.width=c+"px"),f.className="amChartsLegend "+a.classNamePrefix+"-legend-div");this.divWidth=c;(b=this.container)?(b.container.innerHTML="",f.appendChild(b.container),b.width=c,b.height=h,b.setSize(c,h),b.addDefs(a)):b=new d.AmDraw(f,c,h,a);this.container=b;this.lx=0;this.ly=8;h=this.markerSize;h>this.fontSize&&(this.ly=h/2-1);0<h&&(this.lx+=h+this.markerLabelGap);this.titleWidth=0;if(h=this.title)h=d.text(this.container,h,this.color,a.fontFamily,this.fontSize,"start",!0),d.setCN(a,h,"legend-title"),h.translate(this.marginLeft,this.marginTop+this.verticalGap+this.ly+1),a=h.getBBox(),this.titleWidth=a.width+15,this.titleHeight=a.height+6;this.index=this.maxLabelWidth=0;if(this.showEntries){for(a=0;a<g.length;a++)this.createEntry(g[a]);for(a=this.index=0;a<g.length;a++)this.createValue(g[a])}this.arrangeEntries();this.updateValues()},arrangeEntries:function(){var a=this.position,b=this.marginLeft+this.titleWidth,c=this.marginRight,e=this.marginTop,h=this.marginBottom,f=this.horizontalGap,g=this.div,k=this.divWidth,l=this.maxColumns,m=this.verticalGap,n=this.spacing,p=k-c-b,q=0,r=0,u=this.container;this.set&&this.set.remove();var t=u.set();this.set=t;var z=u.set();t.push(z);var y=this.entries,v,w;for(w=0;w<y.length;w++){v=y[w].getBBox();var A=v.width;A>q&&(q=A);v=v.height;v>r&&(r=v)}var A=r=0,B=f,C=0,D=0;for(w=0;w<y.length;w++){var J=y[w];this.reversedOrder&&(J=y[y.length-w-1]);v=J.getBBox();var E;this.equalWidths?E=A*(q+n+this.markerLabelGap):(E=B,B=B+v.width+f+n);v.height>D&&(D=v.height);E+v.width>p&&0<w&&0!==A&&(r++,E=A=0,B=E+v.width+f+n,C=C+D+m,D=0);J.translate(E,C);A++;!isNaN(l)&&A>=l&&(A=0,r++,C=C+D+m,B=f,D=0);z.push(J)}v=z.getBBox();l=v.height+2*m-1;"left"==a||"right"==a?(n=v.width+2*f,k=n+b+c,g.style.width=k+"px",this.ieW=k):n=k-b-c-1;c=d.polygon(this.container,[0,n,n,0],[0,0,l,l],this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha);d.setCN(this.chart,c,"legend-bg");t.push(c);t.translate(b,e);c.toBack();b=f;if("top"==a||"bottom"==a||"absolute"==a||"outside"==a)"center"==this.align?b=f+(n-v.width)/2:"right"==this.align&&(b=f+n-v.width);z.translate(b,m+1);this.titleHeight>l&&(l=this.titleHeight);a=l+e+h+1;0>a&&(a=0);a>this.chart.divRealHeight&&(g.style.top="0px");g.style.height=Math.round(a)+"px";u.setSize(this.divWidth,a)},createEntry:function(a){if(!1!==a.visibleInLegend){var b=this.chart,c=a.markerType;a.legendEntryWidth=this.markerSize;c||(c=this.markerType);var e=a.color,h=a.alpha;a.legendKeyColor&&(e=a.legendKeyColor());a.legendKeyAlpha&&(h=a.legendKeyAlpha());var f;!0===a.hidden&&(f=e=this.markerDisabledColor);var g=a.pattern,k=a.customMarker;k||(k=this.customMarker);var l=this.container,m=this.markerSize,n=0,p=0,q=m/2;if(this.useGraphSettings){c=a.type;this.switchType=void 0;if("line"==c||"step"==c||"smoothedLine"==c||"ohlc"==c)g=l.set(),a.hidden||(e=a.lineColorR,f=a.bulletBorderColorR),n=d.line(l,[0,2*m],[m/2,m/2],e,a.lineAlpha,a.lineThickness,a.dashLength),d.setCN(b,n,"graph-stroke"),g.push(n),a.bullet&&(a.hidden||(e=a.bulletColorR),n=d.bullet(l,a.bullet,a.bulletSize,e,a.bulletAlpha,a.bulletBorderThickness,f,a.bulletBorderAlpha))&&(d.setCN(b,n,"graph-bullet"),n.translate(m+1,m/2),g.push(n)),q=0,n=m,p=m/3;else{var r;a.getGradRotation&&(r=a.getGradRotation());n=a.fillColorsR;!0===a.hidden&&(n=e);if(g=this.createMarker("rectangle",n,a.fillAlphas,a.lineThickness,e,a.lineAlpha,r,g))q=m,g.translate(q,m/2);n=m}d.setCN(b,g,"graph-"+c);d.setCN(b,g,"graph-"+a.id)}else k?g=l.image(k,0,0,m,m):(g=this.createMarker(c,e,h,void 0,void 0,void 0,void 0,g))&&g.translate(m/2,m/2);d.setCN(b,g,"legend-marker");this.addListeners(g,a);l=l.set([g]);this.switchable&&a.switchable&&l.setAttr("cursor","pointer");void 0!==a.id&&d.setCN(b,l,"legend-item-"+a.id);d.setCN(b,l,a.className,!0);(f=this.switchType)&&"none"!=f&&0<m&&("x"==f?(c=this.createX(),c.translate(m/2,m/2)):c=this.createV(),c.dItem=a,!0!==a.hidden?"x"==f?c.hide():c.show():"x"!=f&&c.hide(),this.switchable||c.hide(),this.addListeners(c,a),a.legendSwitch=c,l.push(c),d.setCN(b,c,"legend-switch"));f=this.color;a.showBalloon&&this.textClickEnabled&&void 0!==this.selectedColor&&(f=this.selectedColor);this.useMarkerColorForLabels&&(f=e);!0===a.hidden&&(f=this.markerDisabledColor);e=d.massReplace(this.labelText,{"[[title]]":a.title});c=this.fontSize;g&&(m<=c&&g.translate(q,m/2+this.ly-c/2+(c+2-m)/2-p),a.legendEntryWidth=g.getBBox().width);var u;e&&(e=d.fixBrakes(e),a.legendTextReal=e,u=this.labelWidth,u=isNaN(u)?d.text(this.container,e,f,b.fontFamily,c,"start"):d.wrappedText(this.container,e,f,b.fontFamily,c,"start",!1,u,0),d.setCN(b,u,"legend-label"),u.translate(this.lx+n,this.ly),l.push(u),b=u.getBBox().width,this.maxLabelWidth<b&&(this.maxLabelWidth=b));this.entries[this.index]=l;a.legendEntry=this.entries[this.index];a.legendLabel=u;this.index++}},addListeners:function(a,b){var c=this;a&&a.mouseover(function(a){c.rollOverMarker(b,a)}).mouseout(function(a){c.rollOutMarker(b,a)}).click(function(a){c.clickMarker(b,a)})},rollOverMarker:function(a,b){this.switchable&&this.dispatch("rollOverMarker",a,b);this.dispatch("rollOverItem",a,b)},rollOutMarker:function(a,b){this.switchable&&this.dispatch("rollOutMarker",a,b);this.dispatch("rollOutItem",a,b)},clickMarker:function(a,b){this.switchable&&(!0===a.hidden?this.dispatch("showItem",a,b):this.dispatch("hideItem",a,b));this.dispatch("clickMarker",a,b)},rollOverLabel:function(a,b){a.hidden||(this.textClickEnabled&&a.legendLabel&&a.legendLabel.attr({fill:this.rollOverColor}),this.dispatch("rollOverItem",a,b))},rollOutLabel:function(a,b){if(!a.hidden){if(this.textClickEnabled&&a.legendLabel){var c=this.color;void 0!==this.selectedColor&&a.showBalloon&&(c=this.selectedColor);this.useMarkerColorForLabels&&(c=a.lineColor,void 0===c&&(c=a.color));a.legendLabel.attr({fill:c})}this.dispatch("rollOutItem",a,b)}},clickLabel:function(a,b){this.textClickEnabled?a.hidden||this.dispatch("clickLabel",a,b):this.switchable&&(!0===a.hidden?this.dispatch("showItem",a,b):this.dispatch("hideItem",a,b))},dispatch:function(a,b,c){b={type:a,dataItem:b,target:this,event:c,chart:this.chart};this.chart&&this.chart.handleLegendEvent(b);this.fire(a,b)},createValue:function(a){var b=this,c=b.fontSize,e=b.chart;if(!1!==a.visibleInLegend){var h=b.maxLabelWidth;b.forceWidth&&(h=b.labelWidth);b.equalWidths||(b.valueAlign="left");"left"==b.valueAlign&&(h=a.legendEntry.getBBox().width);var f=h;if(b.valueText&&0<b.valueWidth){var g=b.color;b.useMarkerColorForValues&&(g=a.color,a.legendKeyColor&&(g=a.legendKeyColor()));!0===a.hidden&&(g=b.markerDisabledColor);var k=b.valueText,h=h+b.lx+b.markerLabelGap+b.valueWidth,l="end";"left"==b.valueAlign&&(h-=b.valueWidth,l="start");g=d.text(b.container,k,g,b.chart.fontFamily,c,l);d.setCN(e,g,"legend-value");g.translate(h,b.ly);b.entries[b.index].push(g);f+=b.valueWidth+2*b.markerLabelGap;g.dItem=a;b.valueLabels.push(g)}b.index++;e=b.markerSize;e<c+7&&(e=c+7,d.VML&&(e+=3));c=b.container.rect(a.legendEntryWidth,0,f,e,0,0).attr({stroke:"none",fill:"#fff","fill-opacity":.005});c.dItem=a;b.entries[b.index-1].push(c);c.mouseover(function(c){b.rollOverLabel(a,c)}).mouseout(function(c){b.rollOutLabel(a,c)}).click(function(c){b.clickLabel(a,c)})}},createV:function(){var a=this.markerSize;return d.polygon(this.container,[a/5,a/2,a-a/5,a/2],[a/3,a-a/5,a/5,a/1.7],this.switchColor)},createX:function(){var a=(this.markerSize-4)/2,b={stroke:this.switchColor,"stroke-width":3},c=this.container,e=d.line(c,[-a,a],[-a,a]).attr(b),a=d.line(c,[-a,a],[a,-a]).attr(b);return this.container.set([e,a])},createMarker:function(a,b,c,e,h,f,g,k){var l=this.markerSize,m=this.container;h||(h=this.markerBorderColor);h||(h=b);isNaN(e)&&(e=this.markerBorderThickness);isNaN(f)&&(f=this.markerBorderAlpha);return d.bullet(m,a,l,b,c,e,h,f,l,g,k,this.chart.path)},validateNow:function(){this.invalidateSize()},updateValues:function(){var a=this.valueLabels,b=this.chart,c,e=this.data;for(c=0;c<a.length;c++){var h=a[c],f=h.dItem,g=" ";if(e)f.value?h.text(f.value):h.text("");else{var k;if(void 0!==f.type){k=f.currentDataItem;var l=this.periodValueText;f.legendPeriodValueText&&(l=f.legendPeriodValueText);k?(g=this.valueText,f.legendValueText&&(g=f.legendValueText),g=b.formatString(g,k)):l&&b.formatPeriodString&&(l=d.massReplace(l,{"[[title]]":f.title}),g=b.formatPeriodString(l,f))}else g=b.formatString(this.valueText,f);if(l=this.valueFunction)k&&(f=k),g=l(f,g);h.text(g)}}},renderFix:function(){if(!d.VML){var a=this.container;a&&a.renderFix()}},destroy:function(){this.div.innerHTML="";d.remove(this.set)}})})();(function(){var d=window.AmCharts;d.formatMilliseconds=function(a,b){if(-1!=a.indexOf("fff")){var c=b.getMilliseconds(),d=String(c);10>c&&(d="00"+c);10<=c&&100>c&&(d="0"+c);a=a.replace(/fff/g,d)}return a};d.extractPeriod=function(a){var b=d.stripNumbers(a),c=1;b!=a&&(c=Number(a.slice(0,a.indexOf(b))));return{period:b,count:c}};d.getDate=function(a,b,c){return a instanceof Date?d.newDate(a,c):b&&isNaN(a)?d.stringToDate(a,b):new Date(a)};d.newDate=function(a,b){return b&&-1==b.indexOf("fff")?new Date(a):d.useUTC?new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()):new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())};d.resetDateToMin=function(a,b,c,e){void 0===e&&(e=1);var h,f,g,k,l,m,n;d.useUTC?(h=a.getUTCFullYear(),f=a.getUTCMonth(),g=a.getUTCDate(),k=a.getUTCHours(),l=a.getUTCMinutes(),m=a.getUTCSeconds(),n=a.getUTCMilliseconds(),a=a.getUTCDay()):(h=a.getFullYear(),f=a.getMonth(),g=a.getDate(),k=a.getHours(),l=a.getMinutes(),m=a.getSeconds(),n=a.getMilliseconds(),a=a.getDay());switch(b){case"YYYY":h=Math.floor(h/c)*c;f=0;g=1;n=m=l=k=0;break;case"MM":f=Math.floor(f/c)*c;g=1;n=m=l=k=0;break;case"WW":g=a>=e?g-a+e:g-(7+a)+e;n=m=l=k=0;break;case"DD":n=m=l=k=0;break;case"hh":k=Math.floor(k/c)*c;n=m=l=0;break;case"mm":l=Math.floor(l/c)*c;n=m=0;break;case"ss":m=Math.floor(m/c)*c;n=0;break;case"fff":n=Math.floor(n/c)*c}d.useUTC?(a=new Date,a.setUTCFullYear(h,f,g),a.setUTCHours(k,l,m,n)):a=new Date(h,f,g,k,l,m,n);return a};d.getPeriodDuration=function(a,b){void 0===b&&(b=1);var c;switch(a){case"YYYY":c=316224E5;break;case"MM":c=26784E5;break;case"WW":c=6048E5;break;case"DD":c=864E5;break;case"hh":c=36E5;break;case"mm":c=6E4;break;case"ss":c=1E3;break;case"fff":c=1}return c*b};d.intervals={s:{nextInterval:"ss",contains:1E3},ss:{nextInterval:"mm",contains:60,count:0},mm:{nextInterval:"hh",contains:60,count:1},hh:{nextInterval:"DD",contains:24,count:2},DD:{nextInterval:"",contains:Infinity,count:3}};d.getMaxInterval=function(a,b){var c=d.intervals;return a>=c[b].contains?(a=Math.round(a/c[b].contains),b=c[b].nextInterval,d.getMaxInterval(a,b)):"ss"==b?c[b].nextInterval:b};d.dayNames="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");d.shortDayNames="Sun Mon Tue Wed Thu Fri Sat".split(" ");d.monthNames="January February March April May June July August September October November December".split(" ");d.shortMonthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");d.getWeekNumber=function(a){a=new Date(a);a.setHours(0,0,0);a.setDate(a.getDate()+4-(a.getDay()||7));var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864E5+1)/7)};d.stringToDate=function(a,b){var c={},e=[{pattern:"YYYY",period:"year"},{pattern:"YY",period:"year"},{pattern:"MM",period:"month"},{pattern:"M",period:"month"},{pattern:"DD",period:"date"},{pattern:"D",period:"date"},{pattern:"JJ",period:"hours"},{pattern:"J",period:"hours"},{pattern:"HH",period:"hours"},{pattern:"H",period:"hours"},{pattern:"KK",period:"hours"},{pattern:"K",period:"hours"},{pattern:"LL",period:"hours"},{pattern:"L",period:"hours"},{pattern:"NN",period:"minutes"},{pattern:"N",period:"minutes"},{pattern:"SS",period:"seconds"},{pattern:"S",period:"seconds"},{pattern:"QQQ",period:"milliseconds"},{pattern:"QQ",period:"milliseconds"},{pattern:"Q",period:"milliseconds"}],h=!0,f=b.indexOf("AA");-1!=f&&(a.substr(f,2),"pm"==a.toLowerCase&&(h=!1));var f=b,g,k,l;for(l=0;l<e.length;l++)k=e[l].period,c[k]=0,"date"==k&&(c[k]=1);for(l=0;l<e.length;l++)if(g=e[l].pattern,k=e[l].period,-1!=b.indexOf(g)){var m=d.getFromDateString(g,a,f);b=b.replace(g,"");if("KK"==g||"K"==g||"LL"==g||"L"==g)h||(m+=12);c[k]=m}d.useUTC?(e=new Date,e.setUTCFullYear(c.year,c.month,c.date),e.setUTCHours(c.hours,c.minutes,c.seconds,c.milliseconds)):e=new Date(c.year,c.month,c.date,c.hours,c.minutes,c.seconds,c.milliseconds);return e};d.getFromDateString=function(a,b,c){if(void 0!==b)return c=c.indexOf(a),b=String(b),b=b.substr(c,a.length),"0"==b.charAt(0)&&(b=b.substr(1,b.length-1)),b=Number(b),isNaN(b)&&(b=0),-1!=a.indexOf("M")&&b--,b};d.formatDate=function(a,b,c){c||(c=d);var e,h,f,g,k,l,m,n=d.getWeekNumber(a);d.useUTC?(e=a.getUTCFullYear(),h=a.getUTCMonth(),f=a.getUTCDate(),g=a.getUTCDay(),k=a.getUTCHours(),l=a.getUTCMinutes(),m=a.getUTCSeconds(),a=a.getUTCMilliseconds()):(e=a.getFullYear(),h=a.getMonth(),f=a.getDate(),g=a.getDay(),k=a.getHours(),l=a.getMinutes(),m=a.getSeconds(),a=a.getMilliseconds());var p=String(e).substr(2,2),q=h+1;9>h&&(q="0"+
q);var r="0"+g;b=b.replace(/W/g,n);n=k;24==n&&(n=0);var u=n;10>u&&(u="0"+u);b=b.replace(/JJ/g,u);b=b.replace(/J/g,n);u=k;0===u&&(u=24,-1!=b.indexOf("H")&&f--);n=f;10>f&&(n="0"+f);var t=u;10>t&&(t="0"+t);b=b.replace(/HH/g,t);b=b.replace(/H/g,u);u=k;11<u&&(u-=12);t=u;10>t&&(t="0"+t);b=b.replace(/KK/g,t);b=b.replace(/K/g,u);u=k;0===u&&(u=12);12<u&&(u-=12);t=u;10>t&&(t="0"+t);b=b.replace(/LL/g,t);b=b.replace(/L/g,u);u=l;10>u&&(u="0"+u);b=b.replace(/NN/g,u);b=b.replace(/N/g,l);l=m;10>l&&(l="0"+l);b=b.replace(/SS/g,l);b=b.replace(/S/g,m);m=a;10>m&&(m="00"+m);100>m&&(m="0"+m);l=a;10>l&&(l="00"+l);b=b.replace(/QQQ/g,m);b=b.replace(/QQ/g,l);b=b.replace(/Q/g,a);b=12>k?b.replace(/A/g,"am"):b.replace(/A/g,"pm");b=b.replace(/YYYY/g,"@IIII@");b=b.replace(/YY/g,"@II@");b=b.replace(/MMMM/g,"@XXXX@");b=b.replace(/MMM/g,"@XXX@");b=b.replace(/MM/g,"@XX@");b=b.replace(/M/g,"@X@");b=b.replace(/DD/g,"@RR@");b=b.replace(/D/g,"@R@");b=b.replace(/EEEE/g,"@PPPP@");b=b.replace(/EEE/g,"@PPP@");b=b.replace(/EE/g,"@PP@");b=b.replace(/E/g,"@P@");b=b.replace(/@IIII@/g,e);b=b.replace(/@II@/g,p);b=b.replace(/@XXXX@/g,c.monthNames[h]);b=b.replace(/@XXX@/g,c.shortMonthNames[h]);b=b.replace(/@XX@/g,q);b=b.replace(/@X@/g,h+1);b=b.replace(/@RR@/g,n);b=b.replace(/@R@/g,f);b=b.replace(/@PPPP@/g,c.dayNames[g]);b=b.replace(/@PPP@/g,c.shortDayNames[g]);b=b.replace(/@PP@/g,r);return b=b.replace(/@P@/g,g)};d.changeDate=function(a,b,c,e,h){if(d.useUTC)return d.changeUTCDate(a,b,c,e,h);var f=-1;void 0===e&&(e=!0);void 0===h&&(h=!1);!0===e&&(f=1);switch(b){case"YYYY":a.setFullYear(a.getFullYear()+
c*f);e||h||a.setDate(a.getDate()+1);break;case"MM":b=a.getMonth();a.setMonth(a.getMonth()+c*f);a.getMonth()>b+c*f&&a.setDate(a.getDate()-1);e||h||a.setDate(a.getDate()+1);break;case"DD":a.setDate(a.getDate()+c*f);break;case"WW":a.setDate(a.getDate()+c*f*7);break;case"hh":a.setHours(a.getHours()+c*f);break;case"mm":a.setMinutes(a.getMinutes()+c*f);break;case"ss":a.setSeconds(a.getSeconds()+c*f);break;case"fff":a.setMilliseconds(a.getMilliseconds()+c*f)}return a};d.changeUTCDate=function(a,b,c,d,h){var f=-1;void 0===d&&(d=!0);void 0===h&&(h=!1);!0===d&&(f=1);switch(b){case"YYYY":a.setUTCFullYear(a.getUTCFullYear()+c*f);d||h||a.setUTCDate(a.getUTCDate()+1);break;case"MM":b=a.getUTCMonth();a.setUTCMonth(a.getUTCMonth()+c*f);a.getUTCMonth()>b+c*f&&a.setUTCDate(a.getUTCDate()-1);d||h||a.setUTCDate(a.getUTCDate()+1);break;case"DD":a.setUTCDate(a.getUTCDate()+c*f);break;case"WW":a.setUTCDate(a.getUTCDate()+c*f*7);break;case"hh":a.setUTCHours(a.getUTCHours()+c*f);break;case"mm":a.setUTCMinutes(a.getUTCMinutes()+
c*f);break;case"ss":a.setUTCSeconds(a.getUTCSeconds()+c*f);break;case"fff":a.setUTCMilliseconds(a.getUTCMilliseconds()+c*f)}return a}})();(function(){var e=window.AmCharts;e.AmSerialChart=e.Class({inherits:e.AmRectangularChart,construct:function(a){this.type="serial";e.AmSerialChart.base.construct.call(this,a);this.cname="AmSerialChart";this.theme=a;this.createEvents("changed");this.columnSpacing=5;this.columnSpacing3D=0;this.columnWidth=.8;this.updateScrollbar=!0;var b=new e.CategoryAxis(a);b.chart=this;this.categoryAxis=b;this.zoomOutOnDataUpdate=!0;this.mouseWheelZoomEnabled=this.mouseWheelScrollEnabled=this.rotate=this.skipZoom=!1;this.minSelectedTime=0;e.applyTheme(this,a,this.cname)},initChart:function(){e.AmSerialChart.base.initChart.call(this);this.updateCategoryAxis(this.categoryAxis,this.rotate,"categoryAxis");this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0);var a=this.chartCursor;a&&a.updateData&&(a.updateData(),a.fullWidth&&(a.fullRectSet=this.cursorLineSet));var a=this.countColumns(),b=this.graphs,c;for(c=0;c<b.length;c++)b[c].columnCount=a;this.updateScrollbar=!0;this.drawChart();this.autoMargins&&!this.marginsUpdated&&(this.marginsUpdated=!0,this.measureMargins())},handleWheelReal:function(a,b){if(!this.wheelBusy){var c=this.categoryAxis,d=c.parseDates,g=c.minDuration(),e=c=1;this.mouseWheelZoomEnabled?b||(c=-1):b&&(c=-1);var f=this.chartData.length,k=this.lastTime,m=this.firstTime;0>a?d?(f=this.endTime-this.startTime,d=this.startTime+c*g,g=this.endTime+e*g,0<e&&0<c&&g>=k&&(g=k,d=k-f),this.zoomToDates(new Date(d),new Date(g))):(0<e&&0<c&&this.end>=f-1&&(c=e=0),d=this.start+
c,g=this.end+e,this.zoomToIndexes(d,g)):d?(f=this.endTime-this.startTime,d=this.startTime-c*g,g=this.endTime-e*g,0<e&&0<c&&d<=m&&(d=m,g=m+f),this.zoomToDates(new Date(d),new Date(g))):(0<e&&0<c&&1>this.start&&(c=e=0),d=this.start-c,g=this.end-e,this.zoomToIndexes(d,g))}},validateData:function(a){this.marginsUpdated=!1;this.zoomOutOnDataUpdate&&!a&&(this.endTime=this.end=this.startTime=this.start=NaN);e.AmSerialChart.base.validateData.call(this)},drawChart:function(){if(0<this.realWidth&&0<this.realHeight){e.AmSerialChart.base.drawChart.call(this);var a=this.chartData;if(e.ifArray(a)){var b=this.chartScrollbar;b&&b.draw();var a=a.length-1,c,b=this.categoryAxis;if(b.parseDates&&!b.equalSpacing){if(b=this.startTime,c=this.endTime,isNaN(b)||isNaN(c))b=this.firstTime,c=this.lastTime}else if(b=this.start,c=this.end,isNaN(b)||isNaN(c))b=0,c=a;this.endTime=this.startTime=this.end=this.start=void 0;this.zoom(b,c)}}else this.cleanChart();this.dispDUpd()},cleanChart:function(){e.callMethod("destroy",[this.valueAxes,this.graphs,this.categoryAxis,this.chartScrollbar,this.chartCursor])},updateCategoryAxis:function(a,b,c){a.chart=this;a.id=c;a.rotate=b;a.axisRenderer=e.RecAxis;a.guideFillRenderer=e.RecFill;a.axisItemRenderer=e.RecItem;a.setOrientation(!this.rotate);a.x=this.marginLeftReal;a.y=this.marginTopReal;a.dx=this.dx;a.dy=this.dy;a.width=this.plotAreaWidth-1;a.height=this.plotAreaHeight-1;a.viW=this.plotAreaWidth-1;a.viH=this.plotAreaHeight-1;a.viX=this.marginLeftReal;a.viY=this.marginTopReal;a.marginsChanged=!0},updateValueAxes:function(){e.AmSerialChart.base.updateValueAxes.call(this);var a=this.valueAxes,b;for(b=0;b<a.length;b++){var c=a[b],d=this.rotate;c.rotate=d;c.setOrientation(d);d=this.categoryAxis;if(!d.startOnAxis||d.parseDates)c.expandMinMax=!0}},updateData:function(){this.parseData();var a=this.graphs,b,c=this.chartData;for(b=0;b<a.length;b++)a[b].data=c;0<c.length&&(this.firstTime=this.getStartTime(c[0].time),this.lastTime=this.getEndTime(c[c.length-1].time))},getStartTime:function(a){var b=this.categoryAxis;return e.resetDateToMin(new Date(a),b.minPeriod,1,b.firstDayOfWeek).getTime()},getEndTime:function(a){var b=e.extractPeriod(this.categoryAxis.minPeriod);return e.changeDate(new Date(a),b.period,b.count,!0).getTime()-1},updateMargins:function(){e.AmSerialChart.base.updateMargins.call(this);var a=this.chartScrollbar;a&&(this.getScrollbarPosition(a,this.rotate,this.categoryAxis.position),this.adjustMargins(a,this.rotate))},updateScrollbars:function(){e.AmSerialChart.base.updateScrollbars.call(this);this.updateChartScrollbar(this.chartScrollbar,this.rotate)},zoom:function(a,b){var c=this.categoryAxis;c.parseDates&&!c.equalSpacing?this.timeZoom(a,b):this.indexZoom(a,b);this.updateLegendValues()},timeZoom:function(a,b){var c=this.maxSelectedTime;isNaN(c)||(b!=this.endTime&&b-a>c&&(a=b-c,this.updateScrollbar=!0),a!=this.startTime&&b-a>c&&(b=a+c,this.updateScrollbar=!0));var d=this.minSelectedTime;if(0<d&&b-a<d){var g=Math.round(a+(b-a)/2),d=Math.round(d/2);a=g-d;b=g+d}var h=this.chartData,g=this.categoryAxis;if(e.ifArray(h)&&(a!=this.startTime||b!=this.endTime)){var f=g.minDuration(),d=this.firstTime,k=this.lastTime;a||(a=d,isNaN(c)||(a=k-c));b||(b=k);a>k&&(a=k);b<d&&(b=d);a<d&&(a=d);b>k&&(b=k);b<a&&(b=a+f);b-a<f/5&&(b<k?b=a+f/5:a=b-f/5);this.startTime=a;this.endTime=b;c=h.length-1;f=this.getClosestIndex(h,"time",a,!0,0,c);h=this.getClosestIndex(h,"time",b,!1,f,c);g.timeZoom(a,b);g.zoom(f,h);this.start=e.fitToBounds(f,0,c);this.end=e.fitToBounds(h,0,c);this.zoomAxesAndGraphs();this.zoomScrollbar();a!=d||b!=k?this.showZB(!0):this.showZB(!1);this.updateColumnsDepth();this.dispatchTimeZoomEvent()}},updateAfterValueZoom:function(){this.zoomAxesAndGraphs();this.zoomScrollbar();this.updateColumnsDepth()},indexZoom:function(a,b){var c=this.maxSelectedSeries;isNaN(c)||(b!=this.end&&b-a>c&&(a=b-c,this.updateScrollbar=!0),a!=this.start&&b-a>c&&(b=a+c,this.updateScrollbar=!0));if(a!=this.start||b!=this.end){var d=this.chartData.length-1;isNaN(a)&&(a=0,isNaN(c)||(a=d-c));isNaN(b)&&(b=d);b<a&&(b=a);b>d&&(b=d);a>d&&(a=d-1);0>a&&(a=0);this.start=a;this.end=b;this.categoryAxis.zoom(a,b);this.zoomAxesAndGraphs();this.zoomScrollbar();0!==a||b!=this.chartData.length-1?this.showZB(!0):this.showZB(!1);this.updateColumnsDepth();this.dispatchIndexZoomEvent()}},updateGraphs:function(){e.AmSerialChart.base.updateGraphs.call(this);var a=this.graphs,b;for(b=0;b<a.length;b++){var c=a[b];c.columnWidthReal=this.columnWidth;c.categoryAxis=this.categoryAxis;e.isString(c.fillToGraph)&&(c.fillToGraph=this.getGraphById(c.fillToGraph))}},updateColumnsDepth:function(){var a,b=this.graphs,c;e.remove(this.columnsSet);this.columnsArray=[];for(a=0;a<b.length;a++){c=b[a];var d=c.columnsArray;if(d){var g;for(g=0;g<d.length;g++)this.columnsArray.push(d[g])}}this.columnsArray.sort(this.compareDepth);if(0<this.columnsArray.length){b=this.container.set();this.columnSet.push(b);for(a=0;a<this.columnsArray.length;a++)b.push(this.columnsArray[a].column.set);c&&b.translate(c.x,c.y);this.columnsSet=b}},compareDepth:function(a,b){return a.depth>b.depth?1:-1},zoomScrollbar:function(){var a=this.chartScrollbar,b=this.categoryAxis;a&&this.updateScrollbar&&a.enabled&&a.dragger&&(a.dragger.stop(),b.parseDates&&!b.equalSpacing?a.timeZoom(this.startTime,this.endTime):a.zoom(this.start,this.end),this.updateScrollbar=!0)},updateTrendLines:function(){var a=this.trendLines,b;for(b=0;b<a.length;b++){var c=a[b],c=e.processObject(c,e.TrendLine,this.theme);a[b]=c;c.chart=this;c.id||(c.id="trendLineAuto"+b+"_"+(new Date).getTime());e.isString(c.valueAxis)&&(c.valueAxis=this.getValueAxisById(c.valueAxis));c.valueAxis||(c.valueAxis=this.valueAxes[0]);c.categoryAxis=this.categoryAxis}},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){var a=this.valueAxes,b;for(b=0;b<a.length;b++)a[b].zoom(this.start,this.end);a=this.graphs;for(b=0;b<a.length;b++)a[b].zoom(this.start,this.end);this.zoomTrendLines();(b=this.chartCursor)&&b.zoom&&b.zoom(this.start,this.end,this.startTime,this.endTime)}},countColumns:function(){var a=0,b=this.valueAxes.length,c=this.graphs.length,d,e,h=!1,f,k;for(k=0;k<b;k++){e=this.valueAxes[k];var m=e.stackType;if("100%"==m||"regular"==m)for(h=!1,f=0;f<c;f++)d=this.graphs[f],d.tcc=1,d.valueAxis==e&&"column"==d.type&&(!h&&d.stackable&&(a++,h=!0),(!d.stackable&&d.clustered||d.newStack)&&a++,d.columnIndex=a-1,d.clustered||(d.columnIndex=0));if("none"==m||"3d"==m){h=!1;for(f=0;f<c;f++)d=this.graphs[f],d.valueAxis==e&&"column"==d.type&&(d.clustered?(d.tcc=1,d.newStack&&(a=0),d.hidden||(d.columnIndex=a,a++)):d.hidden||(h=!0,d.tcc=1,d.columnIndex=0));h&&0===a&&(a=1)}if("3d"==m){e=1;for(k=0;k<c;k++)d=this.graphs[k],d.newStack&&e++,d.depthCount=e,d.tcc=a;a=e}}return a},parseData:function(){e.AmSerialChart.base.parseData.call(this);this.parseSerialData(this.dataProvider)},getCategoryIndexByValue:function(a){var b=this.chartData,c,d;for(d=0;d<b.length;d++)b[d].category==a&&(c=d);return c},handleCursorChange:function(a){this.updateLegendValues(a.index)},handleCursorZoom:function(a){this.updateScrollbar=!0;this.zoom(a.start,a.end)},handleScrollbarZoom:function(a){this.updateScrollbar=!1;this.zoom(a.start,a.end)},dispatchTimeZoomEvent:function(){if(this.prevStartTime!=this.startTime||this.prevEndTime!=this.endTime){var a={type:"zoomed"};a.startDate=new Date(this.startTime);a.endDate=new Date(this.endTime);a.startIndex=this.start;a.endIndex=this.end;this.startIndex=this.start;this.endIndex=this.end;this.startDate=a.startDate;this.endDate=a.endDate;this.prevStartTime=this.startTime;this.prevEndTime=this.endTime;var b=this.categoryAxis,c=e.extractPeriod(b.minPeriod).period,b=b.dateFormatsObject[c];a.startValue=e.formatDate(a.startDate,b,this);a.endValue=e.formatDate(a.endDate,b,this);a.chart=this;a.target=this;this.fire(a.type,a)}},dispatchIndexZoomEvent:function(){if(this.prevStartIndex!=this.start||this.prevEndIndex!=this.end){this.startIndex=this.start;this.endIndex=this.end;var a=this.chartData;if(e.ifArray(a)&&!isNaN(this.start)&&!isNaN(this.end)){var b={chart:this,target:this,type:"zoomed"};b.startIndex=this.start;b.endIndex=this.end;b.startValue=a[this.start].category;b.endValue=a[this.end].category;this.categoryAxis.parseDates&&(this.startTime=a[this.start].time,this.endTime=a[this.end].time,b.startDate=new Date(this.startTime),b.endDate=new Date(this.endTime));this.prevStartIndex=this.start;this.prevEndIndex=this.end;this.fire(b.type,b)}}},updateLegendValues:function(a){var b=this.graphs,c;for(c=0;c<b.length;c++){var d=b[c];isNaN(a)?d.currentDataItem=void 0:d.currentDataItem=this.chartData[a].axes[d.valueAxis.id].graphs[d.id]}this.legend&&this.legend.updateValues()},getClosestIndex:function(a,b,c,d,e,h){0>e&&(e=0);h>a.length-1&&(h=a.length-1);var f=e+Math.round((h-
e)/2),k=a[f][b];if(c==k)return f;if(1>=h-e){if(d)return e;d=a[h][b];return Math.abs(a[e][b]-c)<Math.abs(d-c)?e:h}return c==k?f:c<k?this.getClosestIndex(a,b,c,d,e,f):this.getClosestIndex(a,b,c,d,f,h)},zoomToIndexes:function(a,b){this.updateScrollbar=!0;var c=this.chartData;if(c){var d=c.length;0<d&&(0>a&&(a=0),b>d-1&&(b=d-1),d=this.categoryAxis,d.parseDates&&!d.equalSpacing?this.zoom(c[a].time,this.getEndTime(c[b].time)):this.zoom(a,b))}},zoomToDates:function(a,b){this.updateScrollbar=!0;var c=this.chartData;if(this.categoryAxis.equalSpacing){var d=this.getClosestIndex(c,"time",a.getTime(),!0,0,c.length);b=e.resetDateToMin(b,this.categoryAxis.minPeriod,1);c=this.getClosestIndex(c,"time",b.getTime(),!1,0,c.length);this.zoom(d,c)}else this.zoom(a.getTime(),b.getTime())},zoomToCategoryValues:function(a,b){this.updateScrollbar=!0;this.zoom(this.getCategoryIndexByValue(a),this.getCategoryIndexByValue(b))},formatPeriodString:function(a,b){if(b){var c=["value","open","low","high","close"],d="value open low high close average sum count".split(" "),g=b.valueAxis,h=this.chartData,f=b.numberFormatter;f||(f=this.nf);for(var k=0;k<c.length;k++){for(var m=c[k],l=0,p=0,q,t,x,u,r,n=0,A=0,y,z,v,E,H,I=this.start;I<=this.end;I++){var w=h[I];if(w&&(w=w.axes[g.id].graphs[b.id])){if(w.values){var B=w.values[m];if(this.rotate){if(0>w.x||w.x>w.graph.height)B=NaN}else if(0>w.x||w.x>w.graph.width)B=NaN;if(!isNaN(B)){isNaN(q)&&(q=B);t=B;if(isNaN(x)||x>B)x=B;if(isNaN(u)||u<B)u=B;r=e.getDecimals(l);var D=e.getDecimals(B),l=l+B,l=e.roundTo(l,Math.max(r,D));p++;r=l/p}}if(w.percents&&(w=w.percents[m],!isNaN(w))){isNaN(y)&&(y=w);z=w;if(isNaN(v)||v>w)v=w;if(isNaN(E)||E<w)E=w;H=e.getDecimals(n);B=e.getDecimals(w);n+=w;n=e.roundTo(n,Math.max(H,B));A++;H=n/A}}}n={open:y,close:z,high:E,low:v,average:H,sum:n,count:A};a=e.formatValue(a,{open:q,close:t,high:u,low:x,average:r,sum:l,count:p},d,f,m+"\\.",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);a=e.formatValue(a,n,d,this.pf,"percents\\."+m+"\\.")}}return a=e.cleanFromEmpty(a)},formatString:function(a,b,c){var d=b.graph;if(-1!=a.indexOf("[[category]]")){var g=b.serialDataItem.category;if(this.categoryAxis.parseDates){var h=this.balloonDateFormat,f=this.chartCursor;f&&(h=f.categoryBalloonDateFormat);-1!=a.indexOf("[[category]]")&&(h=e.formatDate(g,h,this),-1!=h.indexOf("fff")&&(h=e.formatMilliseconds(h,g)),g=h)}a=a.replace(/\[\[category\]\]/g,String(g))}g=d.numberFormatter;g||(g=this.nf);h=b.graph.valueAxis;(f=h.duration)&&!isNaN(b.values.value)&&(f=e.formatDuration(b.values.value,f,"",h.durationUnits,h.maxInterval,g),a=a.replace(RegExp("\\[\\[value\\]\\]","g"),f));"date"==h.type&&(h=e.formatDate(new Date(b.values.value),d.dateFormat,this),f=RegExp("\\[\\[value\\]\\]","g"),a=a.replace(f,h),h=e.formatDate(new Date(b.values.open),d.dateFormat,this),f=RegExp("\\[\\[open\\]\\]","g"),a=a.replace(f,h));d="value open low high close total".split(" ");h=this.pf;a=e.formatValue(a,b.percents,d,h,"percents\\.");a=e.formatValue(a,b.values,d,g,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);a=e.formatValue(a,b.values,["percents"],h);-1!=a.indexOf("[[")&&(a=e.formatDataContextValue(a,b.dataContext));-1!=a.indexOf("[[")&&b.graph.customData&&(a=e.formatDataContextValue(a,b.graph.customData));return a=e.AmSerialChart.base.formatString.call(this,a,b,c)},addChartScrollbar:function(a){e.callMethod("destroy",[this.chartScrollbar]);a&&(a.chart=this,this.listenTo(a,"zoomed",this.handleScrollbarZoom));this.rotate?void 0===a.width&&(a.width=a.scrollbarHeight):void 0===a.height&&(a.height=a.scrollbarHeight);this.chartScrollbar=a},removeChartScrollbar:function(){e.callMethod("destroy",[this.chartScrollbar]);this.chartScrollbar=null},handleReleaseOutside:function(a){e.AmSerialChart.base.handleReleaseOutside.call(this,a);e.callMethod("handleReleaseOutside",[this.chartScrollbar])},update:function(){e.AmSerialChart.base.update.call(this);this.chartScrollbar&&this.chartScrollbar.update&&this.chartScrollbar.update()}})})();(function(){var e=window.AmCharts;e.Cuboid=e.Class({construct:function(a,b,c,d,e,h,f,k,m,l,p,q,t,x,u,r,n){this.set=a.set();this.container=a;this.h=Math.round(c);this.w=Math.round(b);this.dx=d;this.dy=e;this.colors=h;this.alpha=f;this.bwidth=k;this.bcolor=m;this.balpha=l;this.dashLength=x;this.topRadius=r;this.pattern=u;this.rotate=t;this.bcn=n;t?0>b&&0===p&&(p=180):0>c&&270==p&&(p=90);this.gradientRotation=p;0===d&&0===e&&(this.cornerRadius=q);this.draw()},draw:function(){var a=this.set;a.clear();var b=this.container,c=b.chart,d=this.w,g=this.h,h=this.dx,f=this.dy,k=this.colors,m=this.alpha,l=this.bwidth,p=this.bcolor,q=this.balpha,t=this.gradientRotation,x=this.cornerRadius,u=this.dashLength,r=this.pattern,n=this.topRadius,A=this.bcn,y=k,z=k;"object"==typeof k&&(y=k[0],z=k[k.length-1]);var v,E,H,I,w,B,D,L,M,Q=m;r&&(m=0);var C,F,G,J,K=this.rotate;if(0<Math.abs(h)||0<Math.abs(f))if(isNaN(n))D=z,z=e.adjustLuminosity(y,-.2),z=e.adjustLuminosity(y,-.2),v=e.polygon(b,[0,h,d+h,d,0],[0,f,f,0,0],z,m,1,p,0,t),0<q&&(M=e.line(b,[0,h,d+h],[0,f,f],p,q,l,u)),E=e.polygon(b,[0,0,d,d,0],[0,g,g,0,0],z,m,1,p,0,t),E.translate(h,f),0<q&&(H=e.line(b,[h,h],[f,f+g],p,q,l,u)),I=e.polygon(b,[0,0,h,h,0],[0,g,g+f,f,0],z,m,1,p,0,t),w=e.polygon(b,[d,d,d+h,d+h,d],[0,g,g+f,f,0],z,m,1,p,0,t),0<q&&(B=e.line(b,[d,d+h,d+h,d],[0,f,g+f,g],p,q,l,u)),z=e.adjustLuminosity(D,.2),D=e.polygon(b,[0,h,d+h,d,0],[g,g+f,g+f,g,g],z,m,1,p,0,t),0<q&&(L=e.line(b,[0,h,d+h],[g,g+f,g+f],p,q,l,u));else{var N,O,P;K?(N=g/2,z=h/2,P=g/2,O=d+h/2,F=Math.abs(g/2),C=Math.abs(h/2)):(z=d/2,N=f/2,O=d/2,P=g+f/2+1,C=Math.abs(d/2),F=Math.abs(f/2));G=C*n;J=F*n;.1<C&&.1<C&&(v=e.circle(b,C,y,m,l,p,q,!1,F),v.translate(z,N));.1<G&&.1<G&&(D=e.circle(b,G,e.adjustLuminosity(y,.5),m,l,p,q,!1,J),D.translate(O,P))}m=Q;1>Math.abs(g)&&(g=0);1>Math.abs(d)&&(d=0);!isNaN(n)&&(0<Math.abs(h)||0<Math.abs(f))?(k=[y],k={fill:k,stroke:p,"stroke-width":l,"stroke-opacity":q,"fill-opacity":m},K?(m="M0,0 L"+d+","+(g/2-g/2*n),l=" B",0<d&&(l=" A"),e.VML?(m+=l+Math.round(d-
G)+","+Math.round(g/2-J)+","+Math.round(d+G)+","+Math.round(g/2+J)+","+d+",0,"+d+","+g,m=m+(" L0,"+g)+(l+Math.round(-C)+","+Math.round(g/2-F)+","+Math.round(C)+","+Math.round(g/2+F)+",0,"+g+",0,0")):(m+="A"+G+","+J+",0,0,0,"+d+","+(g-g/2*(1-n))+"L0,"+g,m+="A"+C+","+F+",0,0,1,0,0"),C=90):(l=d/2-d/2*n,m="M0,0 L"+l+","+g,e.VML?(m="M0,0 L"+l+","+g,l=" B",0>g&&(l=" A"),m+=l+Math.round(d/2-G)+","+Math.round(g-J)+","+Math.round(d/2+G)+","+Math.round(g+J)+",0,"+g+","+d+","+g,m+=" L"+d+",0",m+=l+Math.round(d/2+C)+","+Math.round(F)+","+Math.round(d/2-C)+","+Math.round(-F)+","+d+",0,0,0"):(m+="A"+G+","+J+",0,0,0,"+(d-d/2*(1-n))+","+g+"L"+d+",0",m+="A"+C+","+F+",0,0,1,0,0"),C=180),b=b.path(m).attr(k),b.gradient("linearGradient",[y,e.adjustLuminosity(y,-.3),e.adjustLuminosity(y,-.3),y],C),K?b.translate(h/2,0):b.translate(0,f/2)):b=0===g?e.line(b,[0,d],[0,0],p,q,l,u):0===d?e.line(b,[0,0],[0,g],p,q,l,u):0<x?e.rect(b,d,g,k,m,l,p,q,x,t,u):e.polygon(b,[0,0,d,d,0],[0,g,g,0,0],k,m,l,p,q,t,!1,u);d=isNaN(n)?0>g?[v,M,E,H,I,w,B,D,L,b]:[D,L,E,H,I,w,v,M,B,b]:K?0<d?[v,b,D]:[D,b,v]:0>g?[v,b,D]:[D,b,v];e.setCN(c,b,A+"front");e.setCN(c,E,A+"back");e.setCN(c,D,A+"top");e.setCN(c,v,A+"bottom");e.setCN(c,I,A+"left");e.setCN(c,w,A+"right");for(v=0;v<d.length;v++)if(E=d[v])a.push(E),e.setCN(c,E,A+"element");r&&b.pattern(r,NaN,c.path)},width:function(a){isNaN(a)&&(a=0);this.w=Math.round(a);this.draw()},height:function(a){isNaN(a)&&(a=0);this.h=Math.round(a);this.draw()},animateHeight:function(a,b){var c=this;c.easing=b;c.totalFrames=Math.round(1E3*a/e.updateRate);c.rh=c.h;c.frame=0;c.height(1);setTimeout(function(){c.updateHeight.call(c)},e.updateRate)},updateHeight:function(){var a=this;a.frame++;var b=a.totalFrames;a.frame<=b&&(b=a.easing(0,a.frame,1,a.rh-1,b),a.height(b),setTimeout(function(){a.updateHeight.call(a)},e.updateRate))},animateWidth:function(a,b){var c=this;c.easing=b;c.totalFrames=Math.round(1E3*a/e.updateRate);c.rw=c.w;c.frame=0;c.width(1);setTimeout(function(){c.updateWidth.call(c)},e.updateRate)},updateWidth:function(){var a=this;a.frame++;var b=a.totalFrames;a.frame<=b&&(b=a.easing(0,a.frame,1,a.rw-1,b),a.width(b),setTimeout(function(){a.updateWidth.call(a)},e.updateRate))}})})();(function(){var e=window.AmCharts;e.CategoryAxis=e.Class({inherits:e.AxisBase,construct:function(a){this.cname="CategoryAxis";e.CategoryAxis.base.construct.call(this,a);this.minPeriod="DD";this.equalSpacing=this.parseDates=!1;this.position="bottom";this.startOnAxis=!1;this.firstDayOfWeek=1;this.gridPosition="middle";this.markPeriodChange=this.boldPeriodBeginning=!0;this.safeDistance=30;this.centerLabelOnFullPeriod=!0;e.applyTheme(this,a,this.cname)},draw:function(){e.CategoryAxis.base.draw.call(this);this.generateDFObject();var a=this.chart.chartData;this.data=a;this.labelRotationR=this.labelRotation;if(e.ifArray(a)){var b,c=this.chart;"scrollbar"!=this.id?(e.setCN(c,this.set,"category-axis"),e.setCN(c,this.labelsSet,"category-axis"),e.setCN(c,this.axisLine.axisSet,"category-axis")):this.bcn=this.id+"-";var d=this.start,g=this.labelFrequency,h=0,f=this.end-d+1,k=this.gridCountR,m=this.showFirstLabel,l=this.showLastLabel,p,q="",q=e.extractPeriod(this.minPeriod),t=e.getPeriodDuration(q.period,q.count),x,u,r,n;x=this.rotate;b=this.firstDayOfWeek;p=this.boldPeriodBeginning;n=e.resetDateToMin(new Date(a[a.length-1].time+1.05*t),this.minPeriod,1,b).getTime();this.firstTime=c.firstTime;this.endTime>n&&(this.endTime=n);n=this.minorGridEnabled;var A=this.gridAlpha;if(this.parseDates&&!this.equalSpacing)this.lastTime=a[a.length-1].time,this.maxTime=e.resetDateToMin(new Date(this.lastTime+1.05*t),this.minPeriod,1,b).getTime(),this.timeDifference=this.endTime-this.startTime,this.parseDatesDraw();else if(!this.parseDates){if(this.cellWidth=this.getStepWidth(f),f<k&&(k=f),h+=this.start,this.stepWidth=this.getStepWidth(f),0<k){k=Math.floor(f/k);t=this.chooseMinorFrequency(k);f=h;f/2==Math.round(f/2)&&f--;0>f&&(f=0);var y=0;this.end-f+1>=this.autoRotateCount&&(this.labelRotationR=this.autoRotateAngle);for(b=f;b<=this.end+2;b++){p=!1;0<=b&&b<this.data.length?(u=this.data[b],q=u.category,p=u.forceShow):q="";if(n&&!isNaN(t))if(b/t==Math.round(b/t)||p)b/k==Math.round(b/k)||p||(this.gridAlpha=this.minorGridAlpha,q=void 0);else continue;else if(b/k!=Math.round(b/k)&&!p)continue;f=this.getCoordinate(b-h);r=0;"start"==this.gridPosition&&(f-=this.cellWidth/2,r=this.cellWidth/2);p=!0;var z=r;"start"==this.tickPosition&&(z=0,p=!1,r=0);if(b==d&&!m||b==this.end&&!l)q=void 0;Math.round(y/g)!=y/g&&(q=void 0);y++;var v=this.cellWidth;x&&(v=NaN,this.ignoreAxisWidth||!c.autoMargins)&&(v="right"==this.position?c.marginRight:c.marginLeft,v-=this.tickLength+10);this.labelFunction&&u&&(q=this.labelFunction(q,u,this));q=e.fixBrakes(q);a=!1;this.boldLabels&&(a=!0);b>this.end&&"start"==this.tickPosition&&(q=" ");this.rotate&&this.inside&&(r=-2);r=new this.axisItemRenderer(this,f,q,p,v,r,void 0,a,z,!1,u.labelColor,u.className);r.serialDataItem=u;this.pushAxisItem(r);this.gridAlpha=A}}}else if(this.parseDates&&this.equalSpacing){h=this.start;this.startTime=this.data[this.start].time;this.endTime=this.data[this.end].time;this.timeDifference=this.endTime-this.startTime;d=this.choosePeriod(0);g=d.period;x=d.count;a=e.getPeriodDuration(g,x);a<t&&(g=q.period,x=q.count,a=t);u=g;"WW"==u&&(u="DD");this.stepWidth=this.getStepWidth(f);k=Math.ceil(this.timeDifference/a)+1;q=e.resetDateToMin(new Date(this.startTime-a),g,x,b).getTime();this.cellWidth=this.getStepWidth(f);f=Math.round(q/a);d=-1;f/2==Math.round(f/2)&&(d=-2,q-=a);f=this.start;f/2==Math.round(f/2)&&f--;0>f&&(f=0);A=this.end+2;A>=this.data.length&&(A=this.data.length);y=!1;y=!m;this.previousPos=-1E3;20<this.labelRotationR&&(this.safeDistance=5);z=f;if(this.data[f].time!=e.resetDateToMin(new Date(this.data[f].time),g,x,b).getTime())for(a=0,v=q,b=f;b<A;b++)t=this.data[b].time,this.checkPeriodChange(g,x,t,v)&&(a++,2<=a&&(z=b,b=A),v=t);n&&1<x&&(t=this.chooseMinorFrequency(x),e.getPeriodDuration(g,t));if(0<this.gridCountR)for(b=f;b<A;b++)if(t=this.data[b].time,this.checkPeriodChange(g,x,t,q)&&b>=z){f=this.getCoordinate(b-this.start);n=!1;this.nextPeriod[u]&&(n=this.checkPeriodChange(this.nextPeriod[u],1,t,q,u));a=!1;n&&this.markPeriodChange?(n=this.dateFormatsObject[this.nextPeriod[u]],a=!0):n=this.dateFormatsObject[u];q=e.formatDate(new Date(t),n,c);if(b==d&&!m||b==k&&!l)q=" ";y?y=!1:(p||(a=!1),f-this.previousPos>this.safeDistance*Math.cos(this.labelRotationR*Math.PI/180)&&(this.labelFunction&&(q=this.labelFunction(q,new Date(t),this,g,x,r)),this.boldLabels&&(a=!0),r=new this.axisItemRenderer(this,f,q,void 0,void 0,void 0,void 0,a),n=r.graphics(),this.pushAxisItem(r),n=n.getBBox().width,e.isModern||(n-=f),this.previousPos=f+n));r=q=t}}for(b=0;b<this.data.length;b++)if(m=this.data[b])l=this.parseDates&&!this.equalSpacing?Math.round((m.time-this.startTime)*this.stepWidth+this.cellWidth/2):this.getCoordinate(b-h),m.x[this.id]=l;m=this.guides.length;for(b=0;b<m;b++)l=this.guides[b],p=r=r=k=n=NaN,d=l.above,l.toCategory&&(r=c.getCategoryIndexByValue(l.toCategory),isNaN(r)||(n=this.getCoordinate(r-h),l.expand&&(n+=this.cellWidth/2),r=new this.axisItemRenderer(this,n,"",!0,NaN,NaN,l),this.pushAxisItem(r,d))),l.category&&(p=c.getCategoryIndexByValue(l.category),isNaN(p)||(k=this.getCoordinate(p-h),l.expand&&(k-=this.cellWidth/2),r=(n-k)/2,r=new this.axisItemRenderer(this,k,l.label,!0,NaN,r,l),this.pushAxisItem(r,d))),p=c.dataDateFormat,l.toDate&&(l.toDate=e.getDate(l.toDate,p,this.minPeriod),this.equalSpacing?(r=c.getClosestIndex(this.data,"time",l.toDate.getTime(),!1,0,this.data.length-1),isNaN(r)||(n=this.getCoordinate(r-h))):n=(l.toDate.getTime()-this.startTime)*this.stepWidth,r=new this.axisItemRenderer(this,n,"",!0,NaN,NaN,l),this.pushAxisItem(r,d)),l.date&&(l.date=e.getDate(l.date,p,this.minPeriod),this.equalSpacing?(p=c.getClosestIndex(this.data,"time",l.date.getTime(),!1,0,this.data.length-1),isNaN(p)||(k=this.getCoordinate(p-h))):k=(l.date.getTime()-this.startTime)*this.stepWidth,r=(n-k)/2,p=!0,l.toDate&&(p=!1),r="H"==this.orientation?new this.axisItemRenderer(this,k,l.label,p,2*r,NaN,l):new this.axisItemRenderer(this,k,l.label,!1,NaN,r,l),this.pushAxisItem(r,d)),(0<n||0<k)&&(n<this.width||k<this.width)&&(n=new this.guideFillRenderer(this,k,n,l),p=n.graphics(),this.pushAxisItem(n,d),l.graphics=p,p.index=b,l.balloonText&&this.addEventListeners(p,l))}this.axisCreated=!0;c=this.x;h=this.y;this.set.translate(c,h);this.labelsSet.translate(c,h);this.labelsSet.show();this.positionTitle();(c=this.axisLine.set)&&c.toFront();c=this.getBBox().height;2<c-this.previousHeight&&this.autoWrap&&!this.parseDates&&(this.axisCreated=this.chart.marginsUpdated=!1);this.previousHeight=c},xToIndex:function(a){var b=this.data,c=this.chart,d=c.rotate,g=this.stepWidth;this.parseDates&&!this.equalSpacing?(a=this.startTime+Math.round(a/g)-this.minDuration()/2,c=c.getClosestIndex(b,"time",a,!1,this.start,this.end+1)):(this.startOnAxis||(a-=g/2),c=this.start+Math.round(a/g));var c=e.fitToBounds(c,0,b.length-1),h;b[c]&&(h=b[c].x[this.id]);d?h>this.height+1&&c--:h>this.width+1&&c--;0>h&&c++;return c=e.fitToBounds(c,0,b.length-1)},dateToCoordinate:function(a){return this.parseDates&&!this.equalSpacing?(a.getTime()-this.startTime)*this.stepWidth:this.parseDates&&this.equalSpacing?(a=this.chart.getClosestIndex(this.data,"time",a.getTime(),!1,0,this.data.length-1),this.getCoordinate(a-this.start)):NaN},categoryToCoordinate:function(a){return this.chart?(a=this.chart.getCategoryIndexByValue(a),this.getCoordinate(a-this.start)):NaN},coordinateToDate:function(a){return this.equalSpacing?(a=this.xToIndex(a),new Date(this.data[a].time)):new Date(this.startTime+a/this.stepWidth)},getCoordinate:function(a){a*=this.stepWidth;this.startOnAxis||(a+=this.stepWidth/2);return Math.round(a)}})})();snaApp.directive("snaBusinessTicker",['$rootScope','$interval','$timeout','$http','appConfig','$log','$sce','$location',function($rootScope,$interval,$timeout,$http,appConfig,$log,$sce,$location){var speed=Math.round($(window).width()*0.15),settings,transition=false;var itemsToShow=4;if($rootScope.deviceType=='DESKTOP'){itemsToShow=4;}else if($rootScope.deviceType=='TABLET'){itemsToShow=3;}else{itemsToShow=2;}
function link(scope,element,attrs){scope.locationUrl=$location.absUrl();scope.showTickerTab=function(tab,event){if(transition){return;}
event&&event.preventDefault();if(scope.selectedTab&&tab.self==scope.selectedTab.self){return false;}
transition=true;updateTickerData(scope,tab);}
scope.trackGAEvent=function(category,label){ga('send','event',category,'click',label);if(window.secondAnalyticsPropertyEnabled){ga('b.send','event',category,'click',label);}};scope.$watch('tabs',function(tickerTabs){if(tickerTabs&&tickerTabs.length>0&&scope.tabs[0]){scope.showTickerTab(scope.tabs[0]);}});scope.carouselPause=function(){if($rootScope.device!='DESKTOP'){return;}
$('#businessTickerDiv').slick('slickPause');}
scope.carouselResume=function(){if($rootScope.device!='DESKTOP'){return;}
$('#businessTickerDiv').slick('slickPlay');}
$rootScope.$watch('deviceType',function(value){var deviceType=getDeviceType();if(deviceType=='DESKTOP'){itemsToShow=4;}else if(deviceType=='TABLET'){itemsToShow=3;}else{itemsToShow=2;}
if(scope.selectedTab){updateTickerData(scope,scope.selectedTab);}});$interval(function(){refreshTickerData(scope);},30000);$rootScope.$on('resumeApp',function(){if(transition){return;}
refreshTickerData(scope);});function updateTickerData(scope,tab){if(!scope.tabs[tab.self]){$http.get(tab.self).then(function(response){var data=response.data;scope.tabs[tab.self]=data.stocks||data.markets;updateTicker();});}else{updateTicker();}
blockUI($(element));scope.selectedTab=tab;scope.$applyAsync(function(){scope.selectedTab=tab;});$('#businessTickerContainer').css("visibility","hidden");$('#businessTickerDiv.slick-initialized').length&&$('#businessTickerDiv').slick('unslick');}
function updateTicker(){$timeout(function(){var expectedLength=$('#tickerDataDiv .ticker-slider').length;if(expectedLength<scope.tabs[scope.selectedTab.self].length){updateTicker();return;}
$('#businessTickerDiv').html($('#tickerDataDiv').html());$('#businessTickerDiv').slick({rtl:true,dots:false,autoplay:true,autoplaySpeed:2000,mobileFirst:true,slidesToShow:itemsToShow,slidesToScroll:1,infinite:true,pauseOnHover:false});unblockUI($(element));$(window).trigger('resize');$('.business-ticker').fadeTo('fast',1,function(){transition=false;$('.bus-tabs-ticker').height($('.bus-tabs-ticker').height());});$('#businessTickerContainer').css("visibility","visible");},1000);}
function refreshTickerData(scope){if(!scope.selectedTab||transition){return;}
transition=true;$http.get(scope.selectedTab.self).then(function(response){var data=response.data;var securities=data.stocks||data.markets;if(!securities||securities.length==0){return;}
scope.tabs[scope.selectedTab.self]=securities;$timeout(function(){for(var i=0;i<securities.length;i++){$("#businessTickerDiv [data-symbol='security_"+securities[i].symbol+"']").html($("#tickerDataDiv [data-symbol='security_"+securities[i].symbol+"']").html());}
transition=false;},1000)});}}
return{restrict:'E',link:link,scope:{tabs:'=tabs'},templateUrl:$rootScope.templateBaseUrl+"/html/template/businessTicker.html"}}]);snaApp.directive("snaMatchCenter",['$rootScope','$interval','$timeout','$http','appConfig','$sce','$location',function($rootScope,$interval,$timeout,$http,appConfig,$sce,$location){var speed=Math.round($(window).width()*0.15),settings,transition=false,sortedTabs=[],storeTabs=[];var itemsToShow=4;if($rootScope.deviceType=='DESKTOP'){itemsToShow=3;}else if($rootScope.deviceType=='TABLET'){itemsToShow=1;}else{itemsToShow=1;}
function link(scope,element,attrs){scope.locationUrl=$location.absUrl();scope.showTickerTab=function(tab,event,checkNext){event&&event.preventDefault();if(transition){return;}
if(scope.selectedTab&&tab.type==scope.selectedTab.type){return false;}
if(!checkNext){blockUI($('.match-center-ticker'),true);}
transition=true;updateTickerData(scope,tab,checkNext);}
scope.trackGAEvent=function(category,label){ga('send','event',category,'click',label);if(window.secondAnalyticsPropertyEnabled){ga('b.send','event',category,'click',label);}};scope.$watch('tabs',function(tickerTabs){if(tickerTabs&&tickerTabs.length>0){angular.copy(scope.tabs,storeTabs);for(var i=0;i<scope.tabs.length;i++){sortedTabs[scope.tabs[i].type]=scope.tabs[i];}
scope.showTickerTab(sortedTabs.LIVE||sortedTabs.TODAY||sortedTabs.TOMORROW||sortedTabs.YESTERDAY,null,true);}});scope.carouselPause=function(){if($rootScope.device!='DESKTOP'){return;}
if($('#matchCenterDiv').slick){$('#matchCenterDiv').slick('slickPause');}}
scope.carouselResume=function(){if($rootScope.device!='DESKTOP'){return;}
if($('#matchCenterDiv').slick){$('#matchCenterDiv').slick('slickPlay');}}
$rootScope.$watch('deviceType',function(value){var deviceType=getDeviceType();if(deviceType=='DESKTOP'){itemsToShow=2;}else if(deviceType=='TABLET'){itemsToShow=1;}else{itemsToShow=1;}
if(scope.selectedTab){updateTickerData(scope,scope.selectedTab);}});$interval(function(){refreshTickerData(scope);},30000);$rootScope.$on('resumeApp',function(){if(transition){return;}
transition=true;updateTickerData(scope,scope.selectedTab||sortedTabs.LIVE||sortedTabs.TODAY||sortedTabs.TOMORROW||sortedTabs.YESTERDAY,!scope.selectedTab||scope.selectedTab.type=='LIVE');});}
function updateTickerData(scope,tab,checkNext){var date=new Date();if(tab.type=='TODAY'){}else if(tab.type=='YESTERDAY'){date.setDate(date.getDate()-1);}else if(tab.type=='TOMORROW'){date.setDate(date.getDate()+1);}
$http.get(appConfig.apiBaseURL+'/rest/v2/matchcenter/matches.json',{cache:false,params:{timeZoneOffset:date.getTimezoneOffset(),date:tab.type=='LIVE'?'':date.getDate()+"-"+(date.getMonth()+1)+"-"+date.getFullYear()}}).then(function(response){var data=response.data;scope.tabs[tab.type]=data.matches;if((!data.matches||data.matches.length==0)&&checkNext){if(tab.type=='LIVE'&&(sortedTabs.TODAY||sortedTabs.TOMORROW||sortedTabs.YESTERDAY)){updateTickerData(scope,sortedTabs.TODAY||sortedTabs.TOMORROW||sortedTabs.YESTERDAY,checkNext);}else if(tab.type=='TODAY'&&(sortedTabs.TOMORROW||sortedTabs.YESTERDAY)){updateTickerData(scope,sortedTabs.TOMORROW||sortedTabs.YESTERDAY,checkNext);}else if(tab.type=='YESTERDAY'){scope.tabs=[];transition=false;}else if(tab.type=='TOMORROW'&&sortedTabs.YESTERDAY){updateTickerData(scope,sortedTabs.YESTERDAY,checkNext);}else{scope.tabs=[];transition=false;}}else{$('#matchCenterHolderDiv').fadeTo('fast',0,function(){$('#matchCenterDiv.slick-initialized').length&&$('#matchCenterDiv').slick('unslick');scope.$applyAsync(function(){scope.selectedTab=tab;})
updateTicker(scope);});}},function(){transition=false;});}
function updateTicker(scope){$timeout(function(){if(!scope.tabs[scope.selectedTab.type]||scope.tabs[scope.selectedTab.type].length==0){if(scope.selectedTab.type=='LIVE'){$('#matchCenterDiv').html('<div class="row collapse div-table no-record"><div class="small-12 columns div-table-cell">    </div>');}else{$('#matchCenterDiv').html('<div class="row collapse div-table no-record"><div class="small-12 columns div-table-cell">     </div>');}}else{$('#matchCenterDiv').html($('#matchCenterDataDiv').html());$('#matchCenterDiv').slick({rtl:true,dots:false,autoplay:true,autoplaySpeed:2500,mobileFirst:true,slidesToShow:itemsToShow,slidesToScroll:1,infinite:true,pauseOnHover:false,fade:$rootScope.deviceType!='DESKTOP'?true:false});}
$('#matchCenterDiv .teamImage').on("error",function(){$(this).attr("src",$rootScope.webHost+$rootScope.webContext+'/images/team/default.png');})
$('#matchCenterHolderDiv').fadeTo('fast',1,function(){transition=false;$('.bus-tabs-ticker').height($('.bus-tabs-ticker').height());});unblockUI($('.match-center-ticker'));$('#matchCenterContainer').css("visibility","visible");},1000);}
function refreshTickerData(scope){if(!scope.selectedTab||scope.selectedTab.type!='LIVE'||transition){return;}
transition=true;$http.get(appConfig.apiBaseURL+'/rest/v2/matchcenter/matches.json',{cache:false,params:{timeZoneOffset:new Date().getTimezoneOffset()}}).then(function(response){var data=response.data;var matches=data.matches;if(!matches||matches.length==0){transition=false;return;}
scope.tabs[scope.selectedTab.type]=matches;$timeout(function(){for(var i=0;i<matches.length;i++){$("#matchCenterDiv [data-sna-match='match_"+matches[i].matchId+"']").html($("#matchCenterDataDiv [data-sna-match='match_"+matches[i].matchId+"']").html());}
transition=false;},1000)});}
return{restrict:'E',link:link,scope:{tabs:'=tabs'},templateUrl:$rootScope.templateBaseUrl+"/html/template/snaMatchCenter.html"}}]);var chartsReady=false;snaApp.directive("snaBusinessGraph",['$rootScope','$interval','$timeout','$http','appConfig','$log','$sce','$location',function($rootScope,$interval,$timeout,$http,appConfig,$log,$sce,$location){var charts=[];function link($scope,element,attrs){var chartId=new Date().getTime();var chart;var chartData=[];var drawn=false,refreshing=false;$scope.chartId=chartId;$scope.dayLabel="";$scope.$watch('symbol',function(symbol){if(!symbol){return;}
$scope.dateRange='DAY';$scope.dayLabel="TODAY";$log.log("symbol",chartId);refreshGraph($scope);});$scope.$watch('dateRange',function(dateRange){if(!dateRange||!$scope.symbol){return;}
$log.log("dateRange",chartId);refreshGraph($scope);});$scope.setDateRange=function(dateRange){$scope.dateRange=dateRange;}
function generateChartData(points){if(!points){chartData.splice(0,chartData.length);chart.validateData();return;}
$log.log("chart data",chartData.length);$log.log('generate data',points.length);chartData.splice(0,chartData.length);chart.validateData();for(var i=0;points&&i<points.length;i++){chartData.push({date:new Date(points[i].time),closeValue:points[i].closeValue});}
$log.log("chart data",chartData.length);if($scope.dateRange=='DAY'){}else if($scope.dateRange=='WEEK'){chart.categoryAxis.dateFormats=[{period:'mm',format:'JJ:NN'},{period:'hh',format:'JJ:NN'},{period:'DD',format:'EEE'},{period:'WW',format:'MMM DD'},{period:'MM',format:'MMM'},{period:'YYYY',format:'YYYY'}]}else{chart.categoryAxis.dateFormats=[{period:'mm',format:'JJ:NN'},{period:'hh',format:'JJ:NN'},{period:'DD',format:'DD'},{period:'WW',format:'MMM DD'},{period:'MM',format:'MMM'},{period:'YYYY',format:'YYYY'}]}
if(chart.chartCursor){if($scope.dateRange=='LAST_BUSINESS_DAY'||$scope.dateRange=='DAY'||$scope.dateRange=='WEEK'){chart.chartCursor.categoryBalloonDateFormat="JJ:NN, DD MMMM YYYY";}else{chart.chartCursor.categoryBalloonDateFormat="DD MMMM YYYY";}}
chart.validateData();}
function drawChart(data,chartId){refreshing=false;if(chart){$log.log("draw chart");generateChartData(data.points);unblockUI($(element).find("#chartdiv"+chartId));return;}
$log.log("draw chart");chart=AmCharts.makeChart($(element).find("#chartdiv"+chartId)[0],{type:"serial",dataProvider:chartData,categoryField:"date",panEventsEnabled:$rootScope.device=='DESKTOP'?true:false,autoMargins:true});charts.push(chart);$timeout(function(){generateChartData(data.points);var categoryAxis=chart.categoryAxis;categoryAxis.parseDates=true;categoryAxis.autoGridCount=false;chart.categoryAxis.gridCount=$rootScope.deviceType=='DESKTOP'?8:6;categoryAxis.autoWrap=true;categoryAxis.labelRotation=45;categoryAxis.equalSpacing=false;categoryAxis.minPeriod="mm";categoryAxis.gridAlpha=0.07;categoryAxis.axisColor="#838587";categoryAxis.firstDayOfWeek=0;categoryAxis.dateFormats=[{period:'mm',format:'JJ:NN'},{period:'hh',format:'JJ:NN'},{period:'DD',format:'EEE'},{period:'WW',format:'MMM DD'},{period:'MM',format:'MMM'},{period:'YYYY',format:'YYYY'}]
var valueAxis=new AmCharts.ValueAxis();valueAxis.gridAlpha=0.07;valueAxis.axisColor='#838587';chart.addValueAxis(valueAxis);chart.backgroundColor='#e4e4e5';chart.backgroundAlpha=1;chart.plotAreaBorderAlpha=1;chart.plotAreaBorderColor='#838587';chart.plotAreaFillAlphas=1;var graph=new AmCharts.AmGraph();graph.type="line";graph.title="red line";graph.valueField="closeValue";graph.lineAlpha=1;graph.lineColor="#728ca5";graph.fillAlphas=0.7;graph.fillColors="#acc6df";graph.connect=true;graph.pointPosition="start";graph.showBalloonAt="close";chart.addGraph(graph);var chartCursor=new AmCharts.ChartCursor();chartCursor.cursorPosition="mouse";chartCursor.categoryBalloonDateFormat="JJ:NN, DD MMMM YYYY";chartCursor.cursorColor="#217dcb";chart.chartCursor=$rootScope.device=='DESKTOP'?chartCursor:null;chart.write($(element).find("#chartdiv"+chartId)[0]);});}
function refreshGraph($scope){if(refreshing){return;}
if(!chartsReady){$timeout(function(){refreshGraph($scope);},500,false);}
$log.log("refresh graph");refreshing=true;var from,to,date=new Date();to=date.getDate()+"-"+(date.getMonth()+1)+"-"+date.getFullYear();switch($scope.dateRange){case'DAY':if(chart){chart.categoryAxis.gridCount=$rootScope.deviceType=='DESKTOP'?8:6;chart.categoryAxis.equalSpacing=false;chart.graphs[0].connect=true;}
from=to;break;case'LAST_BUSINESS_DAY':if(chart){chart.categoryAxis.gridCount=$rootScope.deviceType=='DESKTOP'?8:6;chart.categoryAxis.equalSpacing=false;chart.graphs[0].connect=true;}
date.setDate(date.getDate()-1);to=date.getDate()+"-"+(date.getMonth()+1)+"-"+date.getFullYear();break;case'WEEK':if(chart){chart.categoryAxis.gridCount=7;chart.categoryAxis.equalSpacing=false;chart.graphs[0].connect=true;}
date.setDate(date.getDate()-6);break;case'MONTH':if(chart){chart.categoryAxis.gridCount=$rootScope.deviceType=='DESKTOP'?12:8;chart.categoryAxis.equalSpacing=false;chart.graphs[0].connect=true;}
date.setMonth(date.getMonth()-1);break;case'THREE_MONTH':if(chart){chart.categoryAxis.gridCount=$rootScope.deviceType=='DESKTOP'?12:8;chart.categoryAxis.equalSpacing=false;chart.graphs[0].connect=true;}
date.setMonth(date.getMonth()-3);break;case'SIX_MONTH':if(chart){chart.categoryAxis.gridCount=$rootScope.deviceType=='DESKTOP'?12:8;chart.categoryAxis.equalSpacing=false;chart.graphs[0].connect=true;}
date.setMonth(date.getMonth()-6);break;case'YEAR':if(chart){chart.categoryAxis.gridCount=$rootScope.deviceType=='DESKTOP'?12:8;chart.categoryAxis.equalSpacing=false;chart.graphs[0].connect=true;}
date.setFullYear(date.getFullYear()-1);break;case'THREE_YEAR':if(chart){chart.categoryAxis.gridCount=$rootScope.deviceType=='DESKTOP'?12:8;chart.categoryAxis.equalSpacing=false;chart.graphs[0].connect=true;}
date.setFullYear(date.getFullYear()-3);break;}
from=date.getDate()+"-"+(date.getMonth()+1)+"-"+date.getFullYear();var timeout=chart?0:500;$timeout(function(){blockUI($(element).find("#chartdiv"+$scope.chartId));$http.get(appConfig.apiBaseURL+'/rest/v2/security/'+$scope.symbol+'/graph.json',{cache:false,params:{from:from,to:to}}).then(function(response){var data=response.data;$log.log("chart data",data)
if($scope.dateRange=='DAY'){date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);if(data.points&&data.points.length>0&&date.getTime()>new Date(data.maxTime).getTime()){$scope.dayLabel="1 D";}else{$scope.dayLabel="TODAY";}}
$timeout(function(){drawChart(data,$scope.chartId)},500);});},timeout);}}
return{restrict:'E',link:link,scope:{symbol:'=symbol',dateRange:'=dateRange'},templateUrl:$rootScope.templateBaseUrl+"/html/template/snaBusinessGraph.html"}}]);AmCharts.ready(function(){chartsReady=true;});snaApp.directive("snaImageGallery",['$rootScope','$interval','$timeout','$http','appConfig','$log','$filter','$compile',function($rootScope,$interval,$timeout,$http,appConfig,$log,$filter,$compile){function link(scope,element,attrs){var imageCount=6,subElementId,showBullets=false,elementId,afterChangeHandler,currentSlideElement,currentSlideHref,currentSlideImageId,snaImageGalleryContElem;snaImageGalleryContElem=element;scope.deviceType=$rootScope.deviceType;scope.webContext=appConfig.webContext;if(scope.$parent.imageCount){imageCount=scope.$parent.imageCount;}else if($rootScope.deviceType=='TABLET'){imageCount=4;}else if($rootScope.deviceType=='MOBILE'){imageCount=1;}
if($rootScope.deviceType=='MOBILE'){showBullets=true;}
afterChangeHandler=function(slick,currentSlide){if(typeof scope.content.type==='undefined'||scope.content.type===''){return;}
currentSlideElement=snaImageGalleryContElem.find(elementId).find("[data-slick-index='"+currentSlide.slickCurrentSlide()+"']");currentSlideHref=snaImageGalleryContElem.find(currentSlideElement).find('[data-ng-href]').attr('data-ng-href');currentSlideImageId=currentSlideHref.split("/").pop();if(!scope.content.mainMediaImageGallery){sendGAPageView(appConfig.webContext,'Image',scope.content.id,currentSlideImageId,scope.content.headline);sendFBPixelPageView();}}
scope.$watch('content',function(value){if(!scope.content){return}
blockUI($(element),true);elementId='#imageGalleryCarouselDiv'+(scope.content.id?scope.content.id:'');subElementId='#imageGalleryCarouselSyncDiv'+(scope.content.id?scope.content.id:'');$timeout(function(){snaImageGalleryContElem.find(subElementId).show();if(!snaImageGalleryContElem.find(subElementId+'.slick-initialized').length){snaImageGalleryContElem.find(subElementId).slick({rtl:true,slidesToShow:1,slidesToScroll:1,asNavFor:elementId,arrows:false,fade:true})}
if(!snaImageGalleryContElem.find(elementId+'.slick-initialized').length){snaImageGalleryContElem.find(elementId).slick({rtl:true,dots:showBullets,autoplay:false,mobileFirst:true,slidesToShow:imageCount,slidesToScroll:1,infinite:true,asNavFor:subElementId,focusOnSelect:true,centerMode:false});}
if(scope.index){snaImageGalleryContElem.find(elementId).slick('slickGoTo',parseInt(scope.index),true);snaImageGalleryContElem.find(subElementId).slick('slickGoTo',parseInt(scope.index),true);}
processDataForFullScreenViewer(scope.content,scope.content.id);$timeout(function(){snaImageGalleryContElem.children("#imageGalleryContainerDiv").css("visibility","visible");snaImageGalleryContElem.addClass("sna-initialized");$(window).trigger('resize');unblockUI($(element));},2000,false);},100,false);if(scope.index){scope.featuredImage=scope.content.images[scope.index];scope.currentImage=scope.index+1;}else{scope.featuredImage=scope.content.images[0];scope.currentImage=1;}
scope.imageCount=scope.content.images.length;});$rootScope.$watch('deviceType',function(newValue,oldValue){var deviceType=getDeviceType();scope.deviceType=deviceType;if(scope.$parent.imageCount){imageCount=scope.$parent.imageCount;}else if(deviceType=='DESKTOP'){imageCount=6;}else if(deviceType=='TABLET'){imageCount=4;}else if(deviceType=='MOBILE'){imageCount=1;}
if($rootScope.deviceType=='MOBILE'){showBullets=true;}
$timeout(function(){snaImageGalleryContElem.find(elementId+'.slick-initialized').length&&snaImageGalleryContElem.find(elementId).slick('unslick');if(!snaImageGalleryContElem.find(subElementId+'.slick-initialized').length){snaImageGalleryContElem.find(subElementId).slick({rtl:true,slidesToShow:1,slidesToScroll:1,asNavFor:elementId,arrows:false,fade:true});}
snaImageGalleryContElem.find(elementId).slick({rtl:true,dots:showBullets,autoplay:false,mobileFirst:true,slidesToShow:imageCount,slidesToScroll:1,infinite:true,asNavFor:subElementId,focusOnSelect:true,centerMode:false});if(deviceType=='MOBILE'){snaImageGalleryContElem.find(elementId).off('afterChange');snaImageGalleryContElem.find(subElementId).off('afterChange');snaImageGalleryContElem.find(elementId).on('afterChange',afterChangeHandler);}else{snaImageGalleryContElem.find(elementId).off('afterChange');snaImageGalleryContElem.find(subElementId).off('afterChange');snaImageGalleryContElem.find(subElementId).on('afterChange',afterChangeHandler);}},500);});scope.viewImage=function(image,index){scope.featuredImage=image;scope.currentImage=index+1;}
scope.goToLink=function(event,element,noFullScreenModal){var index;var onCloseFullScreenImageViewer;var onChangeScreenImageViewer;var callBacksForFullScreenImageViewer={};if((!!scope.triggerFullScreenSlideShowOnClick&&!noFullScreenModal)||(!!scope.triggerFullScreenSlideShowOnClick&&!!noFullScreenModal&&$rootScope.deviceType=='MOBILE')){index=$(event.currentTarget).data("image-index")||0;onCloseFullScreenImageViewer=function(callbackName,index,id){$rootScope[callbackName]=null;$("#imageGalleryCarouselDiv"+id+".slick-initialized").slick("slickGoTo",index,true);$("#imageGalleryCarouselSyncDiv"+id+".slick-initialized").slick("slickGoTo",index,true);}
onChangeScreenImageViewer=function(callbackName,galleryId,imageId,title){sendGAPageView(appConfig.webContext,'Image',galleryId,imageId,title);}
callBacksForFullScreenImageViewer={"onClose":onCloseFullScreenImageViewer,"onChange":onChangeScreenImageViewer};createFullScreenViewer({index:index},callBacksForFullScreenImageViewer);event&&event.preventDefault();return false;}
if(attrs.articleModal=='true'){$(event.currentTarget).attr('target','_blank');}
if($rootScope.deviceType!='MOBILE'&&element=='CAROUSEL'){event&&event.preventDefault();}
if(!scope.link&&(!scope.content||!scope.content.id||scope.content.mainMediaImageGallery)){event&&event.preventDefault();return;}else if(!scope.link){return;}
event&&event.preventDefault();if($rootScope.deviceType=='MOBILE'&&element=='CAROUSEL'){window.location.href=scope.link;}else if($rootScope.deviceType!='MOBILE'&&element=='FEATURED'){window.location.href=scope.link;}}
function processDataForFullScreenViewer(data,galleryId){var imageData=data.images;scope.fullScreenImageViewerData=[];scope.fullScreenImageViewerData=imageData.slice();galleryId=galleryId||1;var sharingBaseUrl='http://'+appConfig.sharingHost+'/image_gallery';for(var i=0;i<scope.fullScreenImageViewerData.length;i++){scope.fullScreenImageViewerData[i].w=imageWidthfoFullScreenViewer();scope.fullScreenImageViewerData[i].h=Math.round(imageWidthfoFullScreenViewer()*.5625);scope.fullScreenImageViewerData[i].title=scope.fullScreenImageViewerData[i].caption;scope.fullScreenImageViewerData[i].src=$rootScope.webHost+$rootScope.webContext+'/images'+$filter('imagefilter')(scope.fullScreenImageViewerData[i].imageUrl,scope.fullScreenImageViewerData[i].w,.5625);scope.fullScreenImageViewerData[i].pid=scope.fullScreenImageViewerData[i].id;scope.fullScreenImageViewerData[i].shortUrl=!!scope.fullScreenImageViewerData[i]&&!!scope.fullScreenImageViewerData[i].shareUrl&&encodeURI(scope.fullScreenImageViewerData[i].shareUrl);;scope.fullScreenImageViewerData[i].shareUrl=sharingBaseUrl+"/"+data.id+'/'+scope.fullScreenImageViewerData[i].id;scope.fullScreenImageViewerData[i].shareHeadline=data.headline;scope.fullScreenImageViewerData[i].shareSummary=scope.fullScreenImageViewerData[i].caption;}
scope.fullScreenImageViewerOptions=optionsForFullScreenViewer({"galleryUID":galleryId,"shareEl":(scope.content.mainMediaImageGallery?false:true)});}
function optionsForFullScreenViewer(options){var defaultOpt=scope.fullScreenImageViewerOptions||{index:0};options=options||{};options=$.extend({},defaultOpt,options);return options;}
function imageWidthfoFullScreenViewer(arguments){var width
switch(deviceType){case'DESKTOP':width=2000;break;case'TABLET':width=1600;break;case'MOBILE':width=1600;break;}
return width;}
function createFullScreenViewer(options,callBacks){scope.fullScreenImageViewerOptions=optionsForFullScreenViewer(options);var onCloseCallBack;var onChangeCallBack;$("sna-full-screen-image-viewer").each(function(index,el){$(this).remove();});onCloseCallBack=bindOnCloseEvent(scope.fullScreenImageViewerOptions,callBacks);onChangeCallBack=bindOnChangeEvent(scope.fullScreenImageViewerOptions,callBacks,scope.fullScreenImageViewerData[0]);var fullScreenImageViewerElem=angular.element('<sna-full-screen-image-viewer image-data=\''+JSON.stringify(scope.fullScreenImageViewerData)+'\' options=\''+JSON.stringify(scope.fullScreenImageViewerOptions)+'\'  on-close-callback=\''+onCloseCallBack+'\'  on-change-callback=\''+onChangeCallBack+'\'></sna-full-screen-image-viewer>');jQuery("body").append(fullScreenImageViewerElem);$compile(fullScreenImageViewerElem)($rootScope);}
function bindOnCloseEvent(options,callBacks){var onCloseCallBack;if((typeof options!='undefined')&&(typeof options.galleryUID!='undefined')&&(typeof callBacks.onClose!='undefined')){onCloseCallBack="onCloseFullScreenImageViewer"+options.galleryUID;$rootScope[onCloseCallBack]=null;$rootScope[onCloseCallBack]=callBacks.onClose;return onCloseCallBack;}else{return null;}}
function bindOnChangeEvent(options,callBacks,firstImageData){var onChangeCallBack;if((typeof options!='undefined')&&(typeof options.galleryUID!='undefined')&&(typeof callBacks.onChange!='undefined')){onChangeCallBack="onChangeFullScreenImageViewer"+options.galleryUID;$rootScope[onChangeCallBack]=null;$rootScope[onChangeCallBack]=callBacks.onChange;callBacks.onChange(onChangeCallBack,options.galleryUID,firstImageData.id,firstImageData.shareHeadline)
return onChangeCallBack;}else{return null;}}}
return{restrict:'E',transclude:true,scope:{content:'=content',isImageGallery:'=imageGallery',index:'=index',link:'=href',headline:'=headline',category:"=category",date:"=date",mode:"=mode",articleModal:'=',mainMediaImageGallery:'=',triggerFullScreenSlideShowOnClick:'@',viewportWidth:'@',bottomImgViewportWidth:'@',imageGalleryOnFullPage:'@'},link:link,templateUrl:$rootScope.templateBaseUrl+"/html/template/snaImageGallery.html"}}]);'use strict';snaApp.directive("snaCountDown",['$log',function($log){function link($scope,element,attrs){var countDownDate,countDownId,month=element.find('#month'),day=element.find('#day'),hour=element.find('#hour'),minute=element.find('#minute'),second=element.find('#second');var observer=attrs.$observe('date',function(date){if(typeof date=='undefined'){return;}
observer();console.log("date",date);countDownDate=new Date(attrs.date);countDownId=countdown(countDownDate,function(ts){day.text(ts.days>9?ts.days:"0"+ts.days);hour.text(ts.hours>9?ts.hours:"0"+ts.hours);minute.text(ts.minutes>9?ts.minutes:"0"+ts.minutes);second.text(ts.seconds>9?ts.seconds:"0"+ts.seconds);},countdown.DAYS|countdown.HOURS|countdown.MINUTES|countdown.SECONDS);});$scope.$on('$destroy',function(){console.log("destroy");window.clearInterval(countDownId);});}
return{restrict:'E',scope:{refid:"=refid"},link:link,templateUrl:$rootScope.templateBaseUrl+"/html/template/snaCountDown.html"}}]);snaApp.controller("sectionController",["$scope","$http","appConfig","$log","$location","$rootScope","$timeout",function($scope,$http,appConfig,$log,$location,$rootScope,$timeout){var selectedSection,location=$location.absUrl(),selectedTab="EDITOR_PICK_TAB";var showCategoryTab=false;$rootScope.showImageTeaserOnPage=true;$scope.selectedSections=["","","","","","","","",""];$scope.hideTabs=true;if(!$scope.initData||!$scope.initData.components){alert("no initialization data");}
$rootScope.menuLocationUrl=window.location.protocol+"//"+window.location.host+window.location.pathname;function removeSlashAtUrlEnd(url){while(/\/$/.test(url)){url=url.replace(/\/$/,"");}
return url;}
$rootScope.menuLocationUrl=removeSlashAtUrlEnd($rootScope.menuLocationUrl);if($rootScope.initData&&$rootScope.initData.topSectionUrl){$rootScope.menuLocationUrl=$rootScope.menuLocationUrl.substring(0,$rootScope.menuLocationUrl.lastIndexOf('/'))+$rootScope.initData.topSectionUrl;}
if(window.location.pathname=="/"){$rootScope.menuLocationUrl=window.location.protocol+"//"+window.location.host+window.location.pathname+"web/home"}
$rootScope.locationUrl=location;$scope.selectedTab=selectedTab=='BY_CATEGORY_TAB'?"EDITOR_PICK_TAB":selectedTab;$scope.selectedSection=selectedSection=$scope.initData.url;$scope.sectionUrl=$scope.initData.url.substring(1);$scope.isMainSection=!$scope.initData.subSection&&$scope.initData.sectionType!='HOME_SECTION';$scope.topstoriesEven=false;$scope.topstoriesOdd=true;$scope.sidebarVisibility={"visibility":"hidden"};var sidebarHasVideoWidget=function(sidebarComponents){var hasVideoWidget=null;sidebarComponents.forEach(function(component){if(component.componentType==="VIDEO_WIDGET"){hasVideoWidget=component;}});return hasVideoWidget;};blockUI($(window));$http.get(appConfig.apiBaseURL+'/rest/v2'+selectedSection+'/components.json',{cache:false,params:{deviceType:$rootScope.deviceType,fetchContents:true}}).then(function(response){var data=response.data;$scope.sidebarComponents=data.sideBarComponents;var components=data.sectionComponents;var videoWidgetComponent=sidebarHasVideoWidget(data.sideBarComponents);if(typeof videoWidgetComponent!=='undefined'&&videoWidgetComponent!==null){if(components.length<1){console.log('it is less than 2');components.splice(components.length,0,videoWidgetComponent);}else{if(components.length>1&&typeof components[1]!=='undefined'&&typeof components[1].componentType!=='undefined'&&components[1].componentType=='HYBRID'){components.splice(2,0,videoWidgetComponent);}else{components.splice(1,0,videoWidgetComponent);}}}
$scope.components=components;$rootScope.pageDescription=data.description;$rootScope.pageKeywords=data.keywords;unblockUI($(window));if(!data.hasMore){$scope.maxOffset=true;}
$timeout(function(){$scope.hideTabs=false;$scope.tabsContentLoaded=true;$scope.sidebarVisibility={};},500);},function(){unblockUI($(window));});$scope.filterComponents=function(value,index){if(value.componentType=='FEATURED'||value.componentType=='TOPSTORIES'||value.componentType=='HYBRID'||value.componentType=='VIDEO_BULLETIN'||value.componentType=='COMPACT'||value.componentType=='CURRENCY'||value.componentType=='COMMODITY'||value.componentType=='COMMODITY_SELECTOR'||value.componentType=='MARKET_LISTING'||value.componentType=='TOPICS'||value.componentType=='CURRENCY_CONVERTER'||value.componentType=='LEAGUE_LISTING'||value.componentType=='LEAGUE_STANDINGS'||value.componentType=='MATCH_LISTING'||value.componentType=='SPORTS_FEATURED'||value.componentType=='CUSTOMHTML_MAIN'||value.componentType=='VIDEO_WIDGET'){return true;}else{return false;}}
$('html').click(function(evt){var dropdownText=$('.tab-title.dropdown a').text();if(evt.target.innerHTML!=dropdownText&&evt.target.innerHTML!=""){$(".tab-sections").fadeOut('fast',function(){$scope.$applyAsync(function(){$scope.dropDown=false;})});return true;}});$scope.filterMegaComponents=function(value,index){if(value.componentType=='MEGANEWS'||value.componentType=='HYBRID'||value.componentType=='FEATURED'||value.componentType=='SPORTS_FEATURED'){return true;}else{return false;}}
$scope.selectTab=function(selectedTab,event){if(selectedTab.sections&&selectedTab.sections.length>0){$scope.selectedTab=selectedTab.type+'_TAB';if(!$('.dropdown').hasClass('selected')){$scope.filterStoriesByCategory(selectedTab);}}else{$scope.selectedTab=selectedTab.type+'_TAB';}
if(event){if($(event.currentTarget).siblings(".tab-sections").is(":visible")){$(event.currentTarget).siblings(".tab-sections").stop()
$(event.currentTarget).siblings(".tab-sections").fadeOut('fast',function(){$scope.$applyAsync(function(){$scope.dropDown=false;})});return;}else{$(event.currentTarget).siblings(".tab-sections").stop();$(event.currentTarget).siblings(".tab-sections").fadeIn('fast',function(){$scope.$applyAsync(function(){$scope.dropDown=true;})});}}}
$scope.showSectionFilter=function(event,tab){event&&event.preventDefault();var sectionList=$(event.currentTarget).siblings(".tab-sections");$scope.selectTab(tab,event);if(sectionList.length==0){$(event.currentTarget).siblings(".tab-sections").stop();$(".tab-sections").fadeOut('fast',function(){$scope.$applyAsync(function(){$scope.dropDown=false;})});$scope.dropDown=false;return true;}
return true;}
$scope.updateSelection=function(event){if($.grep($scope.selectedSections,function(value){return value!=""}).join(",").length>0){$scope.activeFilter=true;}else{$scope.activeFilter=false;}
$rootScope.refreshCategoryTab=true;event&&event.stopPropagation();}
$scope.expandTabs=function(event){$("#mobileTabDiv").slideToggle("slow",function(){if($("#mobileTabDiv").is(":visible")){$(event.currentTarget).addClass("icon-arrow-up");$(event.currentTarget).removeClass("icon-arrow-down");}else{$(event.currentTarget).removeClass("icon-arrow-up");$(event.currentTarget).addClass("icon-arrow-down");}});}
$scope.selectMobileTab=function(tab,event){event&&event.preventDefault();$scope.activeFilter=true;if(tab.sections&&tab.sections.length>0){$scope.selectedTab=tab.type+'_TAB';$scope.filterStoriesByCategory(tab,true);}else{$scope.selectedTab=tab.type+'_TAB';}
if(tab.sections){$("#mobileSectionList").slideToggle("slow",function(){if($("#mobileSectionList").is(":visible")){$scope.$applyAsync(function(){$scope.dropDown=true;});}else{$scope.$applyAsync(function(){$scope.dropDown=false;});}});$scope.sectionFilters=tab.sections;}else{$("#mobileTabDiv").toggle("slow");$("#mobileSectionList").hide();}}
$scope.hideSectionFilter=function(event){$(event.currentTarget).children(".tab-sections").fadeOut();}
$scope.filterStoriesByCategory=function(tab,disableScroll){$timeout(function(){$rootScope.showCategoryTab=true;$scope.selectedTab='BY_CATEGORY_TAB';},500);if(!disableScroll){window.scrollTo(0,0);}
showCategoryTab=true;}
if($scope.initData.name.toLowerCase()=='business'){$scope.initData.displayName=" ";}
$scope.subSections=$rootScope.initData.subSections;if($scope.subSections){for(var i=0;i<$scope.subSections.length;i++){if($rootScope.locationUrl.toLowerCase().indexOf($scope.subSections[i].url.toLowerCase())>-1){$scope.initData.displayName=$scope.subSections[i].displayName;}}}
$scope.toggleMobileBusinessTabs=function(){$('#mobileBusinessTabDiv').slideToggle(function(){$scope.$applyAsync(function(){$scope.businessDropDown=!$scope.businessDropDown});});}
if($scope.initData.dataTicker&&$scope.initData.dataTicker.type=='BUSINESS_TICKER'){$scope.tickerTabs=$scope.initData.dataTicker.tickerTabs;}else if($scope.initData.dataTicker&&$scope.initData.dataTicker.type=='MATCH_CENTER_TICKER'){$scope.matchCenterTabs=$scope.initData.dataTicker.tickerTabs;}
$(".content").css("display","block");$(".widgets").css("display","block");}]);snaApp.controller("sidebarController",["$scope","$http","appConfig","$window","$log","$location","$rootScope",function($scope,$http,appConfig,$window,$log,$location,$rootScope){$rootScope.hideImage=false;$scope.filterComponents=function(value,index){if(value.componentType=='VIDEO_BULLETIN'||value.componentType=='PROGRAM_CAROUSEL'||(value.componentType=='EPISODES'&&$rootScope.deviceType!='MOBILE')||value.componentType=='BLOGS'||value.componentType=='CARTOONGALLERY'||value.componentType=='POLLS'||value.componentType=='TOP_CONTRIBUTORS'||(value.componentType=='CUSTOMHTML'&&($rootScope.deviceType!='MOBILE'||(value.title.indexOf('')==-1&&value.title.toLowerCase().indexOf('twitter')==-1)))||value.componentType=='IFRAME'||value.componentType=='COMMODITY_CURRENCIES_TAB'||value.componentType=='MARKETS'||value.componentType=='POPULAR_LEAGUES'||value.componentType=='STOCKS'||value.componentType=='LATEST_NEWS'||value.componentType=='TOP_SCORERS'||value.componentType=='MATCH_RESULTS'||value.componentType=='RANKINGS_TENNIS'||value.componentType=='RANKINGS_MOTORSPORTS'||value.componentType=='RANKINGS_BASKETBALL'||value.componentType=='POPULAR_STORIES'||value.componentType=='VIDEO_WIDGET'){return true;}else{return false;}};}]);snaApp.controller("topStoriesController",["$scope","appConfig","$log","$timeout","timeDifference","$rootScope",'$window',function($scope,appConfig,$log,$timeout,timeDifference,$rootScope,$window){var contents=$scope.component.contents;var topStoriesCount=-1;var countIndex=$scope.$index;if($scope.components[0].componentType=="MEGANEWS"){var countIndex=$scope.$index+1;}
for(var i=0;i<=countIndex;i++){if($scope.components[i].name=="TOPSTORIES"){topStoriesCount++;}}
if($scope.startOdd){topStoriesCount++;}
if(topStoriesCount%2==0){$scope.topstoriesEven=true;$scope.topstoriesOdd=false;$scope.components[$scope.$index].isEven=true;}else{$scope.topstoriesEven=false;$scope.topstoriesOdd=true;$scope.components[$scope.$index].isEven=false;}
var width=800;var height=width*9/16;if($scope.component.adEnabled){if($rootScope.firstSectionTopStoriesAdShownRoot){$scope.firstSectionTopStoriesAdShown=true;}
$rootScope.firstSectionTopStoriesAdShownRoot=true;$scope.stories=[contents[0],contents[1],null,contents[2],contents[3]];}else{if($scope.component.auto){if($scope.topstoriesEven){if($scope.deviceType!='MOBILE'){$scope.stories=[contents[1],contents[2],contents[0],contents[3],contents[4]];}else{$scope.stories=[contents[0],contents[1],contents[2],contents[3],contents[4]];}}else{$scope.stories=[contents[0],contents[1],contents[4],contents[2],contents[3]];}}else{$scope.stories=[contents[1],contents[2],contents[0],contents[3],contents[4]];}}
$timeout(function(){$(document).foundation('equalizer','reflow');},500,false);$scope.clickOnSNADefaultAdBanner=function($event){if(!$($event.currentTarget).hasClass('inside-content-dfp-default-bg')){return;}
$window.location.href="https://www.skynewsarabia.com/web/staticpage/18991";}}]);'use strict'
snaApp.directive("snaImageTeaser",['$rootScope','$interval','$timeout','$http','appConfig','$log','$window','videoPlayer','$filter',function($rootScope,$interval,$timeout,$http,appConfig,$log,$window,videoPlayer,$filter){function link(scope,element){scope.imageTeaserSupported=true;if(isIEBrowser()){scope.imageTeaserSupported=false;return;}
scope.aspectRatio=scope.aspectRatio||0.5625;scope.imageData=(typeof scope.imagesData!='undefined'&&JSON.parse(scope.imagesData))||'';scope.imageData=scope.imageData;scope.imageData.reverse();for(var i=0;i<scope.imageData.length;i++){scope.imageData[i].imageUrl=formImgUrl(scope.imageData[i].imageUrl);}
if(element.prev('img').length>0){element.prev('img').one("load",function(){$(this).addClass("no-transform hide").prev('img').css('visibility','hidden');element.parent().addClass('image-teaser-on');}).each(function(){if(this.complete)$(this).load();});}
addAnimCss(4.4,1.6,scope.imageData.length,scope.contentId);function formImgUrl(imageUrl){if(scope.viewportWidth){return $filter('imageAdvFilter')(imageUrl,JSON.parse(scope.viewportWidth),scope.aspectRatio);}else{return $filter('imagefilter')(imageUrl,400,scope.aspectRatio);}}}
return{restrict:'E',scope:{imagesData:'@',aspectRatio:'@',contentId:'@',viewportWidth:'@'},link:link,templateUrl:$rootScope.templateBaseUrl+"/html/template/snaImageTeaser.html"}
function addAnimCss(a,b,n,contentId){var a_val=parseFloat(a);var b_val=parseFloat(b);var n_val=parseInt(n);var single_time=a_val+b_val;var total_time=single_time*n_val;var keyframes_percent=["0%",null,null,null,"100%"];keyframes_percent[1]=(a_val/total_time*100);keyframes_percent[2]=((a_val+b_val)/total_time*100);keyframes_percent[3]=(100-(b_val/total_time*100));keyframes_percent[1]=keyframes_percent[1]+"%";keyframes_percent[2]=keyframes_percent[2]+"%";keyframes_percent[3]=keyframes_percent[3]+"%";var animDelaySingleTmpl;var animDelayCssTmpl='';var animName="FadeInOut"+contentId;var cssRulesToBeAdded='';var scaleFactor=1.3;if($rootScope.device=='MOBILE'){scaleFactor=1.5;}
var animOnCssTmpl=".image-teaser-on #img-teaser-"+contentId+" .single-img-preview {-webkit-animation-name: "+animName+"; animation-name: "+animName+"; -webkit-animation-duration: "+(total_time)+"s; animation-duration: "+(total_time)+"s; }"
var keyframeCssTmpl="@-webkit-keyframes "+animName+" {"+keyframes_percent[0]+" {opacity: 1; -webkit-transform: scale(1); transform: scale(1); } "+keyframes_percent[1]+" {opacity: 1; -webkit-transform: scale("+(1+((scaleFactor-1)/2))+"); transform: scale("+(1+((scaleFactor-1)/2))+"); } "+keyframes_percent[2]+" {opacity: 0; -webkit-transform: scale("+(scaleFactor)+"); transform: scale("+(scaleFactor)+"); } "+keyframes_percent[3]+" {opacity: 0; -webkit-transform: scale(1); transform: scale(1); } "+keyframes_percent[4]+" {opacity: 1; -webkit-transform: scale(1); transform: scale(1); } } @keyframes  "+animName+"  {"+keyframes_percent[0]+" {opacity: 1; -webkit-transform: scale(1); transform: scale(1); } "+keyframes_percent[1]+" {opacity: 1; -webkit-transform: scale("+(1+((scaleFactor-1)/2))+"); transform: scale("+(1+((scaleFactor-1)/2))+"); } "+keyframes_percent[2]+" {opacity: 0; -webkit-transform: scale("+(scaleFactor)+"); transform: scale("+(scaleFactor)+"); } "+keyframes_percent[3]+" {opacity: 0; -webkit-transform: scale(1); transform: scale(1); } "+keyframes_percent[4]+" {opacity: 1; -webkit-transform: scale(1); transform: scale(1); } }";var startDelay;if(isSafari()){startDelay=3;}else{startDelay=0;}
for(var i=0;i<n_val;i++){animDelaySingleTmpl='';animDelaySingleTmpl=".image-teaser-on #img-teaser-"+contentId+" .single-img-preview:nth-of-type("+(i+1)+") { -webkit-animation-delay: "+(total_time-((i+1)*single_time)+startDelay)+"s; animation-delay: "+(total_time-((i+1)*single_time)+startDelay)+"s; }"
animDelayCssTmpl+=animDelaySingleTmpl;}
cssRulesToBeAdded=" "+keyframeCssTmpl+animOnCssTmpl+animDelayCssTmpl;injectStyles(cssRulesToBeAdded);}
function injectStyles(rule){var div=$("<div />",{html:'&shy;<style>'+rule+'</style>'}).appendTo("body");if(isIEBrowser()){div.hide();}}
function greenSockAnim(a,b,element){var imgs=$.makeArray(element.find('.single-img-preview'))
var scaleFactor=1.3;if($rootScope.device=='MOBILE'){scaleFactor=1.5;}
var tl=new TimelineMax({repeat:-1});var crossfade=function(){tl.add("lab")
tl.to(imgs[0],1.6,{autoAlpha:0,scale:1,ease:Power0.easeNone},"lab")
tl.to(imgs[1],1.6,{autoAlpha:1,scale:1,ease:Power0.easeNone},"lab")
tl.to(imgs[1],4.4,{scale:scaleFactor,ease:Power0.easeNone})
imgs.push(imgs.shift())}
crossfade();var cycle=setInterval(crossfade,6000);}}]);snaApp.controller("featuredController",["$scope","$http","appConfig","$window","$log","$location",'timeDifference','$sce',function($scope,$http,appConfig,$window,$log,$location,timeDifference,$sce){$scope.stories=$scope.component.contents;var width=1600;var height=Math.round(width*9/16);$scope.isBreaking=$scope.stories[0].isBreaking;$scope.filterfeaturedAssets=function(value,index){if(value.type=='IMAGE_SET'||value.type=='VIDEO'||value.type=='IMAGE_GALLERY'||value.type=='POLL'){return true;}else{return false;}};var delay=300,setTimeoutConst;$scope.teaserOnHover=function(event){var targetElement=$(event.target).closest('.main-hero-side-content');var currentTeaserId=$(targetElement).find('video').attr('id');if(!currentTeaserId||currentTeaserId==''){return;}
$(targetElement).parent().find('video').each(function(index,video){if(currentTeaserId!=$(video).attr('id')){video.pause();}else{video.play();}});if($(targetElement).find('video').hasClass('teaser-video-2')){$('.hero-related').animate({'marginTop':'-80px'});}
setTimeoutConst=setTimeout(function(){$(targetElement).find('video:first').prop('muted',false);},delay);};$scope.teaserOnLeave=function(event){var targetElement=$(event.target).closest('.main-hero-side-content');var currentTeaserId=$(targetElement).find('video').attr('id');if(!currentTeaserId||currentTeaserId==''){return;}
$('.hero-related').animate({'marginTop':'0'});$(targetElement).find('video:first').prop('muted',true);$(targetElement).parent().find('video').each(function(index,video){video.play();});clearTimeout(setTimeoutConst);};$scope.videoTeaserLoaded=function(index){var vteasers=document.querySelectorAll('#main-hero-side-content video');for(i=0;i<vteasers.length;i++){$(vteasers[i]).prop('muted',true);$(vteasers[i]).on('loadeddata',function(e){$(this).css('background','#000');});}};if($scope.stories[0].associatedAssets!=undefined){$scope.featuredAssets=$scope.stories[0].associatedAssets;angular.forEach($scope.featuredAssets,function(fa,key){if(fa.autoPlay){fa.teaserUrlSafe=$sce.trustAsResourceUrl(fa.teaserUrl);}});}else{$scope.featuredAssets=[];}}]);snaApp.controller("videoBulletinController",["$scope","$http","appConfig","$window","$log","$location","$filter",function($scope,$http,appConfig,$window,$log,$location,$filter){if(!$scope.component){alert("no initialization data");}
var width=1600;var height=Math.round(width*9/16);$scope.videoBulletinResult=$scope.component.contents;$scope.videoBulletinImageUrlSmall=$scope.videoBulletinResult[0].mediaAsset.imageUrl.replace("{width}",Math.round(width/3)).replace("{height}",Math.round(height/3));$scope.videoBulletinImageUrlMedium=$scope.videoBulletinResult[0].mediaAsset.imageUrl.replace("{width}",Math.round(width/2)).replace("{height}",Math.round(height/2));$scope.videoBulletinImageUrlLarge=$scope.videoBulletinResult[0].mediaAsset.imageUrl.replace("{width}",Math.round(width)).replace("{height}",Math.round(height));}]);snaApp.controller("megaNewsController",["$scope","$http","appConfig","$window","$log","$location","timeDifference","$sce",function($scope,$http,appConfig,$window,$log,$location,timeDifference,$sce){$scope.meganews=$scope.component.contents;$scope.isBreaking=$scope.meganews[0].isBreaking;$scope.filterMegaAssets=function(value,index){if(value.type=='IMAGE_SET'||value.type=='VIDEO'||value.type=='IMAGE_GALLERY'||value.type=='POLL'){return true;}else{return false;}};var delay=300,setTimeoutConst;$scope.teaserOnHover=function(event){var targetElement=$(event.target).closest('.main-hero-side-content');var currentTeaserId=$(targetElement).find('video').attr('id');if(!currentTeaserId||currentTeaserId==''){return;}
$(targetElement).parent().find('video').each(function(index,video){if(currentTeaserId!=$(video).attr('id')){video.pause();}else{video.play();}});if($(targetElement).find('video').hasClass('teaser-video-2')){$('.hero-related').animate({'marginTop':'-80px'});}
setTimeoutConst=setTimeout(function(){$(targetElement).find('video:first').prop('muted',false);},delay);};$scope.teaserOnLeave=function(event){var targetElement=$(event.target).closest('.main-hero-side-content');var currentTeaserId=$(targetElement).find('video').attr('id');if(!currentTeaserId||currentTeaserId==''){return;}
$('.hero-related').animate({'marginTop':'0'});$(targetElement).find('video:first').prop('muted',true);$(targetElement).parent().find('video').each(function(index,video){video.play();});clearTimeout(setTimeoutConst);};$scope.videoTeaserLoaded=function(index){var vteasers=document.querySelectorAll('#main-hero-side-content video');for(i=0;i<vteasers.length;i++){$(vteasers[i]).prop('muted',true);}};if($scope.meganews[0].associatedAssets!=undefined){$scope.megaNewsAssets=$scope.meganews[0].associatedAssets;angular.forEach($scope.megaNewsAssets,function(fa,key){if(fa.autoPlay){fa.teaserUrlSafe=$sce.trustAsResourceUrl(fa.teaserUrl);}});}else{$scope.megaNewsAssets=[];}}]);snaApp.controller("hybridController",["$scope","$http","appConfig","$window","$log","$timeout","$location",'timeDifference',function($scope,$http,appConfig,$window,$log,$timeout,$location,timeDifference){$scope.hybrid=$scope.component.contents;$scope.filterHybridArticle=function(value,index){if(value.type=='ARTICLE'){return true;}else{return false;}};$scope.filterHybridImageVideo=function(value,index){if(value.type=='VIDEO'||value.type=='IMAGE_GALLERY'){return true;}else{return false;}};$scope.hybridImageUrlSmall=[];$scope.hybridImageUrlMedium=[];$scope.hybridImageUrlLarge=[];$scope.hybridImagecounts=[];$scope.hybridVideoDuration=[];$scope.hybridRevisionDate=[];$scope.publishedDate=[];$scope.articlesList=[];$scope.multiMediaList=[];var articleIndex=0;var multiMediaIndex=0;for(var i=0;i<$scope.hybrid.length;i++){var obj=$scope.hybrid[i];if(obj.type=='ARTICLE'){$scope.articlesList[articleIndex]=obj;articleIndex++;}else if(obj.type=='VIDEO'||obj.type=='IMAGE_GALLERY'){if(obj.runTime!=undefined){if(obj.runTime.slice(0,2)=="00"){obj.runTime=obj.runTime.slice(3,8);}else if(obj.runTime.slice(0,2)!="00"){obj.runTime=obj.runTime.slice(0,8);}}
$scope.multiMediaList[multiMediaIndex]=obj;multiMediaIndex++;}}
$timeout(function(){$(document).foundation('equalizer','reflow');},500,false);}]);snaApp.controller("programCarouselController",["$scope","$http","appConfig","$window","$log","$location","$filter",function($scope,$http,appConfig,$window,$log,$location,$filter){$scope.programCarousel=$scope.component.sectionContents;var width=1600;var height=Math.round(width*5/17);$scope.programCarouselImages=[];$scope.programUrl=[];for(var i=0;i<$scope.programCarousel.length;i++){var obj=$scope.programCarousel[i];$scope.programCarouselSet=obj.web_listing_page_image.imageUrl;if($scope.programCarouselSet){$scope.programCarouselImages[i]=$filter('imageAdvFilter')($scope.programCarouselSet,[[.25],[.33],[1]],.294);}
$scope.programUrl[i]='program'+obj.url+'-'+obj.urlFriendlySuffix;}
$scope.$applyAsync(function(){$('.program_carousel').slick({rtl:true,dots:true,arrows:false,autoplay:true,autoplaySpeed:5000,mobileFirst:true})});}]);'user strict'
snaApp.controller("episodesController",["$scope","appConfig","$log","timeDifference","youtubeApi",function($scope,appConfig,$log,timeDifference,youtubeApi){var contents=$scope.component.sectionContents;var videos=[];var index=0;var videoIndex=0;var successCallback=function(data){if(data.items&&data.items.length>0){videos[videoIndex]=data.items[0];videoIndex++;}
if(++index<contents.length){youtubeApi.listPlaylistItems(contents[index].youtubePlayListId,1).success(successCallback);}else{$scope.videos=videos;$scope.requestsCompoleted=true;}}
youtubeApi.listPlaylistItems(contents[index].youtubePlayListId,1).success(successCallback);}]);'use strict';if(!!Modernizr.history&&'scrollRestoration'in history){history.scrollRestoration='manual';}
snaApp.controller("videoWidgetController",["$scope","appConfig","$log","timeDifference","$sce","$timeout","getDeviceOSService","$q","$rootScope",'$compile','$templateRequest',function($scope,appConfig,$log,timeDifference,$sce,$timeout,deviceOSService,$q,$rootScope,$compile,$templateRequest){$scope.videos=[];angular.forEach($scope.component.contents,function(value,key){value.isTeaser=key==0&&value.type=='VIDEO'&&value.autoPlay&&$scope.device=='DESKTOP'?true:false;if(value.isTeaser){value.teaserUrlSafe=$sce.trustAsResourceUrl(value.teaserUrl);}
$scope.videos.push(value);});var delay=300,setTimeoutConst,outsideWidget=false;$scope.teaserOnHover=function(event){outsideWidget=false;if($(event.target).parents(".video_widget_dfp_ad_bg").length>0||$(event.target).hasClass(".video_widget_dfp_ad_bg")){return;}
var targetElement=event.currentTarget;var currentTeaserId=$(targetElement).find('video').attr('id');if($(targetElement).find('video:first').hasClass('sna-video-teaser')){return;}
if(!currentTeaserId||currentTeaserId==''){$scope.videoTeaserLoaded();return;}
setTimeoutConst=$timeout(function(){if(outsideWidget){return;}
if(!window.isSafari()){$(targetElement).find('video:first').prop('muted',false);}else{$(targetElement).find('video:first').prop('muted',false);}},delay);};$scope.teaserOnLeave=function(event){if($(event.target).parents(".video_widget_dfp_ad_bg").length>0||$(event.target).hasClass(".video_widget_dfp_ad_bg")){return;}
outsideWidget=true;var targetElement=event.currentTarget;var currentTeaserId=$(targetElement).find('video').attr('id');if(!currentTeaserId||currentTeaserId==''){return;}
$(targetElement).find('video:first').prop('muted',true);clearTimeout(setTimeoutConst);};$scope.videoTeaserLoaded=function(){var vteasers=document.querySelectorAll('#video-widget-teaser-holder video');for(var i=0;i<vteasers.length;i++){$(vteasers[i]).prop('muted',true);}};$scope.openVideo=function(event,video,index){if($(event.target).parents(".video_widget_dfp_ad_bg").length>0||$(event.target).hasClass(".video_widget_dfp_ad_bg")){return;}
if(index==0&&!!video.isTeaser){var vteasers=document.querySelectorAll('#video-widget-teaser-holder video');if(!!vteasers.length&&vteasers.length>0){$(vteasers[0]).prop('muted',true);}}
$rootScope.trackGAEvent('VIDEO_WIDGET','OPEN_VIDEO_'+parseInt(index+1));$rootScope.openVideoModalFromDOM(event,video,index,true);}
$scope.openMore=function(event){$rootScope.trackGAEvent('VIDEO_WIDGET','OPEN_MORE');$rootScope.openVideoModalFromDOM(event,null,0,false);}
var videoWidgetModalTemplateUrl=$sce.getTrustedResourceUrl('/static/web-rev/html/components/videoWidgetModal.html');if($("body > #videoWidgetModal").length==0){$rootScope.videoWidgetVideosDeferredObj=$q.defer();$templateRequest(videoWidgetModalTemplateUrl).then(function(videoWidgetModalTemplate){var videoWidgetModalElem=angular.element(videoWidgetModalTemplate);$compile(videoWidgetModalElem)($rootScope);$("body").append(videoWidgetModalElem);if(!!$scope.component&&!!$scope.component.contents&&$scope.component.contents.length>0){$rootScope.videoWidgetVideosDeferredObj.resolve($scope.component.contents);}},function(){});}}]);snaApp.controller("blogsController",["$rootScope","$scope","appConfig","$log","timeDifference",function($rootScope,$scope,appConfig,$log,timeDifference){$scope.contents=$scope.component.contents;}]);snaApp.controller("cartoonController",["$scope","$http","appConfig","$window","$log","$location","$filter",function($scope,$http,appConfig,$window,$log,$location,$filter){$scope.cartoonGallery=$scope.component.contents;$scope.cartoonId=$scope.component.contents[0].id;$scope.cartoonImagesContainer=$scope.cartoonGallery[0].cartoonImages;}]);'use strict'
snaApp.controller("pollsController",["$rootScope","$scope",'$element','$sce',function($rootScope,$scope,$element,$sce){$scope.polls=$scope.component.contents;if($scope.polls[0]!=='undefined'&&$scope.polls[0].type!=='undefined'){$scope.pollType=$scope.polls[0].type;}
if($scope.pollType=='POLL_APESTER'){$scope.pollEmbedCode=$sce.trustAsHtml($scope.polls[0].freeText);return;}
var pollWidgetDom=$element;if($scope.polls[0].freeText!=null&&$scope.polls[0].freeText!=''){var poll=$('<iframe name="poll_iframe" class="poll_frame" width="100%" scrolling="no" style="overflow:hidden;border-top: 0;"></iframe>');pollWidgetDom.find('#poll_wrapper').append(poll);var initScript='<script>';initScript+='setTimeout(function() {setHeight(document.getElementsByClassName("PDS_Poll")[0].offsetHeight + 25);';initScript+='setHeight(document.getElementsByClassName("PDS_Poll")[0].offsetHeight + 25);}, 500);window.stop && window.stop();';initScript+='if (navigator.userAgent && navigator.userAgent.match(/Windows Phone/i) || true) {'
initScript+='window.addEventListener("resize", function (event) {';initScript+='setHeight(document.getElementsByClassName("PDS_Poll")[0].offsetHeight + 25)';initScript+='});}';initScript+='var insertListener = function(event){';initScript+='if (event.animationName == "nodeInserted") {';initScript+='setTimeout(function() { setHeight(document.getElementsByClassName("PDS_Poll")[0].offsetHeight + 50); }, 100);';initScript+='}};';initScript+='document.addEventListener("animationstart", insertListener, false); ';initScript+='document.addEventListener("MSAnimationStart", insertListener, false); ';initScript+='document.addEventListener("webkitAnimationStart", insertListener, false); ';initScript+='</script>';pollWidgetDom.find('#poll_wrapper iframe')[0].contentWindow.document.write('<body id="sna-poll" style="margin: 0;">'
+'<script src="'+$rootScope.appAssetsUrl+'/js/pollTheme/pollAnimation.js"></script>'
+$scope.polls[0].freeText+initScript+"</body>");pollWidgetDom.find('#poll_wrapper iframe')[0].contentWindow.setHeight=function(pollHeight){pollWidgetDom.find('#poll_wrapper iframe')[0].height=pollHeight;if(!(pollWidgetDom.find('#poll_wrapper iframe').contents().find('#pollStyle').length>0)){pollWidgetDom.find('#poll_wrapper iframe').contents().find('head').append('<style id="pollStyle"></style>');}
if(!(pollWidgetDom.find('#poll_wrapper iframe').contents().find('#pollIFrameHeight').length>0)){pollWidgetDom.find('#poll_wrapper iframe').contents().find('head').append("<style id='pollIFrameHeight'> @keyframes nodeInserted {from { opacity: 0.99; } to { opacity: 1; } }   "
+"@-webkit-keyframes nodeInserted {from { opacity: 0.99; } to { opacity: 1; } }  "
+"@-ms-keyframes nodeInserted {from { opacity: 0.99; } to { opacity: 1; } }"
+".PDS_Poll  div.pds-question, .PDS_Poll  div.pds-answer, .PDS_Poll  "
+"div.pds-vote {animation-duration: 0.001s; animation-name: nodeInserted; -webkit-animation-duration: 0.001s; "
+"-webkit-animation-name: nodeInserted; -ms-animation-duration: 0.001s; -webkit-ms-name: nodeInserted;}</style>");}
resetPollStyle();}
window.addEventListener('orientationchange',function(){resetPollStyle();});if(navigator.userAgent&&navigator.userAgent.match(/Windows Phone/i)){$(window).on('resize',function(){resetPollStyle();});}
pollWidgetDom.find('#poll_wrapper iframe').contents().find('head').append('<style>body { font-family: HelveticaNeue, Helvetica, Arial, sans-serif;}</style>');var font='<style>\n@font-face {\n'
font+='font-family: "HelveticaNeue";\n';font+='src:    url("'+$rootScope.appAssetsUrl+'/styles/sna-font/HelveticaNeueW23forSKY-Reg_T02.woff2")  format("woff2"),\n';font+='        url("'+$rootScope.appAssetsUrl+'/styles/sna-font/HelveticaNeueW23forSKY-Reg_T02.woff")   format("woff");\n';font+='font-weight: 400;\n';font+='font-style: normal;\n';font+='}\n</style>'
pollWidgetDom.find('#poll_wrapper iframe').contents().find('head').append(font);}
function resetPollStyle(){var h3FontSize=$(".poll-widget .poll-headline").css("font-size");var h4FontSize=$(".poll-widget .poll-answer").css("font-size");var style='.pds-question-top { font-size:'+h3FontSize+' !important;}\n';style+='.pds-input-label { font-size:'+h4FontSize+' !important;}\n';style+='.pds-answer-text { font-size:'+h4FontSize+' !important;}\n';style+='.pds-vote-button { font-size:'+h4FontSize+' !important;}\n';style+='.pds-return-poll { font-size:'+h4FontSize+' !important;}\n';style+='.pds-return-poll {margin-top: 0 !important;}\n';style+='.pds-vote {margin-top: 10px !important;}\n'
pollWidgetDom.find('#poll_wrapper iframe').contents().find('#pollStyle').html(style);}}]);snaApp.controller("customHtmlController",["$scope","$sce",function($scope,$sce){$scope.customHtml=$sce.trustAsHtml($scope.component.contents[0].freeText);$scope.openLink=function($event){if(typeof(cordova)=='undefined'){return true;}
$event.preventDefault();if($event&&$($event.target).attr('href')){window.open($($event.target).attr('href'),'_system')}}}]);snaApp.controller("topContributorsController",["$scope","$http","appConfig","$window","$log","$location",'timeDifference',function($scope,$http,appConfig,$window,$log,$location,timeDifference){var width=800;var height=Math.round(width*1/1);$scope.topContributorsList=[];$scope.topContributorsImages=[];var topContributors=0;for(var i=0;i<$scope.component.contents.length;i++){$scope.topContributorsList[topContributors]=$scope.component.contents[i];$scope.topContributorsImages[topContributors]=$scope.component.contents[i].mediaAsset.imageUrl.replace("{width}",Math.round(width/3)).replace("{height}",Math.round(height/3));topContributors++;}}]);snaApp.controller("iframeController",["$scope","$sce",function($scope,$sce){$scope.iframeSrc=$sce.trustAsResourceUrl($scope.component.contents[0].sourceUrl);$scope.iframeHeight=$scope.component.contents[0].height;}]);'use strict';snaApp.controller("moreStoriesController",["$rootScope","$scope","appConfig","$log","$http","$timeout",function($rootScope,$scope,appConfig,$log,$http,$timeout){var offset=0,loadMoreFlag=false,pageSize=5,isEditorChoice=true,even=true,index=0;isEditorChoice=$scope.selectedTab==="EDITOR_PICK_TAB";$scope.stories=[];$scope.topstoriesEven=[];$scope.topstoriesOdd=[];$scope.loadMore=false;$scope.loadMoreStories=function(obj1){if(typeof obj1!=='undefined'&&typeof obj1.preventDefault!=='undefined'){obj1.preventDefault();}
$rootScope.trackGAEvent("LOAD_MORE",$scope.selectedSection);if(!loadMoreFlag){if(index==0){if($scope.components&&$scope.components.length>0&&$scope.components[$scope.components.length-1].name=="TOPSTORIES"){$scope.startOdd=false;if($scope.components[$scope.components.length-1].isEven){even=false;$scope.startOdd=true;}}
$scope.components=[];$scope.loadMore=true;}
loadMoreFlag=true;$http.get(appConfig.apiBaseURL+'/rest/v2/'+$scope.selectedSection+"/latest-stories.json?editorChoice="
+isEditorChoice+"&offset="+offset+"&pageSize="+pageSize).then(function(response){var data=response.data;var contents=data.stories;if(!data||!data.stories||data.stories.length==0){$scope.maxOffset=true;return;}
if(data.hasMore==false){$scope.maxOffset=true;}
$scope.topstoriesEven[index]=even;$scope.topstoriesOdd[index]=!even;even=!even;$scope.stories[index]=[contents[1],contents[2],contents[0],contents[3],contents[4]];$scope.components.push({"contents":[contents[0],contents[1],contents[2],contents[3],contents[4]],"name":"TOPSTORIES","auto":true});index++;$timeout(function(){$(document).foundation('equalizer','reflow');},500,false);offset+=5;loadMoreFlag=false;},function(){loadMoreFlag=false;});}}}]);snaApp.controller("compactController",["$scope","$rootScope","appConfig","$log","timeDifference",function($scope,$rootScope,appConfig,$log,timeDifference){var contents=$scope.component.contents,groupSize=3;var width=800;var height=width*9/16;$scope.compactEven=contents.length%2==0;var contentType=contents[0].type;for(var i=0;i<contents.length;i++){if(!contents[i]){continue;}
if(contentType==null||contentType!=contents[i].type||contentType.toLowerCase()=='article'){contentType=null;}}
$scope.contentType=contentType;$scope.storyGroups=[];if($scope.groupSize){groupSize=$scope.groupSize;}else if($scope.perDevice){if($rootScope.deviceType=='DESKTOP'){groupSize=3;}else if($rootScope.deviceType=='TABLET'){groupSize=2;}else{groupSize=1;}}else if(contents[0].type.toLowerCase()=='article'&&$rootScope.deviceType=='MOBILE'){groupSize=1;}
for(var i=0;i<contents.length;i+=groupSize){var group=[];for(var j=0;j<groupSize;j++){if(!contents[j+i]){continue;}
group[j]=contents[j+i];}
$scope.storyGroups.push(group);}}]);snaApp.controller("sportFeaturedController",["$scope","$log","$rootScope",function($scope,$log,$rootScope){if(!$scope.component||!$scope.component.contents||$scope.component.contents.length==0){return;}
var article=$scope.component.contents[0];$scope.sportFeaturedContent={id:$scope.component.id,headline:article.headline,category:article.category,images:article.mediaAssets,articleId:article.id,date:article.date,sectionUrl:article.sectionUrl,urlFriendlySuffix:article.urlFriendlySuffix};$scope.imageCount=6;$rootScope.$watch('deviceType',function(newValue,oldValue){if(deviceType=='DESKTOP'){$scope.imageCount=6;}else if(deviceType=='TABLET'){$scope.imageCount=6;}else if(deviceType=='MOBILE'){$scope.imageCount=1;}})}]);snaApp.controller("latestStoriesController",["$scope","$rootScope","appConfig","$log","$http","$timeout","timeDifference",function($scope,$rootScope,appConfig,$log,$http,$timeout,timeDifference){var offset=0,pageSize=6,isEditorChoice=false,even=true,index=0,loadMore=false;$scope.storyGroups=[];$scope.topstoriesEven=[];$scope.topstoriesOdd=[];$scope.perDevice=true;if($rootScope.selectedTab==="LATEST_TAB"){offset+=28;}
$scope.$watch('selectedTab',function(selectedTab){if(selectedTab=='LATEST_TAB'&&!$scope.component){loadStories(offset,28);offset+=28;}});$scope.maxOffset=true;$scope.loadMoreStories=function(event){$rootScope.trackGAEvent("LOAD_MORE",$scope.selectedSection);loadStories(offset,pageSize);offset+=6;if(offset>=500){$scope.maxOffset=true;}
return false;}
function loadStories(offset,pageSize){if(loadMore){return;}
loadMore=true;blockUI($(window));$http.get(appConfig.apiBaseURL+'/rest/v2/'+$scope.selectedSection+"/latest-stories.json?editorChoice=false&offset="+offset+"&pageSize="+pageSize).then(function(response){var data=response.data;if($scope.storyGroups.length==0){$scope.component={"contents":[data.stories[0]]};$scope.subFeatured=data.stories.slice(1,4);for(var i=4,j=0;i<data.stories.length;i+=6,j++){$scope.storyGroups[j]={"contents":[data.stories[i],data.stories[i+1],data.stories[i+2],data.stories[i+3],data.stories[i+4],data.stories[i+5]]};}}else{$scope.storyGroups.push({"contents":data.stories});}
$log.log("latest stories groups",$scope.storyGroups);loadMore=false;if(data.stories.length<pageSize||!data.hasMore){$scope.maxOffset=true;}else{$scope.maxOffset=false;}
unblockUI($(window));$scope.tabsContentLoaded=true;},function(data,status,headers,config){unblockUI($(window));});}}]);snaApp.controller("popularStoriesController",["$scope","$rootScope","appConfig","$log","$http","$timeout","timeDifference",function($scope,$rootScope,appConfig,$log,$http,$timeout,timeDifference){var offset=0,pageSize=6,isEditorChoice=false,even=true,index=0,loadMore=false;$scope.storyGroups=[];$scope.topstoriesEven=[];$scope.topstoriesOdd=[];$scope.perDevice=true;if($rootScope.selectedTab==="MOST_POPULAR_TAB"){offset+=28;}else{}
$scope.$watch('selectedTab',function(selectedTab){if(selectedTab=='MOST_POPULAR_TAB'&&!$scope.component){loadStories(offset,28);offset+=28;}});$scope.maxOffset=true;$scope.loadMoreStories=function(event){$rootScope.trackGAEvent("LOAD_MORE",$scope.selectedSection);loadStories(offset,pageSize);offset+=6;if(offset>=500){$scope.maxOffset=true;}
return false;}
function loadStories(offset,pageSize){if(loadMore){return;}
loadMore=true;blockUI($(window));$http.get(appConfig.apiBaseURL+'/rest/v2/mostpopular.json',{cache:false,params:{interval:$scope.initData.name.toLowerCase()=='home'?1:2,offset:offset,pageSize:pageSize,sectionNames:$scope.initData.name.toLowerCase()=='home'?'':$scope.initData.name}}).then(function(response){var data=response.data;if($scope.storyGroups.length==0){$scope.component={"contents":[data.contentItems[0]]};$scope.subFeatured=data.contentItems.slice(1,4);for(var i=4,j=0;i<data.contentItems.length;i+=6,j++){$scope.storyGroups[j]={"contents":[data.contentItems[i],data.contentItems[i+1],data.contentItems[i+2],data.contentItems[i+3],data.contentItems[i+4],data.contentItems[i+5]]};}}else{$scope.storyGroups.push({"contents":data.contentItems});}
$log.log("latest stories groups",$scope.storyGroups);loadMore=false;if(data.contentItems.length<pageSize||!data.hasMore){$scope.maxOffset=true;}else{$scope.maxOffset=false;}
unblockUI($(window));$scope.tabsContentLoaded=true;},function(){unblockUI($(window));});}}]);snaApp.controller("storiesByCategoryController",["$scope","$rootScope","appConfig","$log","$http","$timeout","timeDifference",function($scope,$rootScope,appConfig,$log,$http,$timeout,timeDifference){var offset=0,pageSize=6,isEditorChoice=true,even=true,index=0,sectionNames="";isEditorChoice=$scope.selectedTab==="editors-choice";$scope.storyGroups=[];$scope.showTab=true;$scope.perDevice=true;$scope.loadMoreStories=function(){$rootScope.trackGAEvent("LOAD_MORE",$scope.selectedSection);if(offset==0){loadStories(0,28);offset=28;}else{loadStories(offset,pageSize);}
offset+=6;return false;}
$scope.$watch(function(){return $rootScope.refreshCategoryTab;},function(newValue,oldValue){if($rootScope.refreshCategoryTab){$scope.showTab=false;$rootScope.refreshCategoryTab=false;$scope.maxOffset=false;$scope.storyGroups=[];loadStories(0,28);offset=28;}});$scope.$watch("showCategoryTab",function(showCategoryTab){if(showCategoryTab&&(!$scope.storyGroups||$scope.storyGroups.length==0)){$scope.showTab=false;$rootScope.refreshCategoryTab=false;$scope.maxOffset=false;$scope.storyGroups=[];loadStories(0,28);offset=28;}});function loadStories(offset,pageSize){blockUI($(window));if($scope.selectedSections.length>0){sectionNames=$.grep($scope.selectedSections,function(value){return value!=""}).join(",");console.log("SectionNames",sectionNames);}
$http.get(appConfig.apiBaseURL+'/rest/v2/'+$scope.selectedSection+"/latest-stories.json?editorChoice=false&offset="+offset+"&pageSize="+pageSize+"&sectionNames="+sectionNames).then(function(response){var data=response.data;if(!data.hasMore){$scope.maxOffset=true;}
if($scope.storyGroups.length==0){$scope.component={"contents":[data.stories[0]]};$scope.subFeatured=data.stories.slice(1,4);for(var i=4,j=0;i<data.stories.length;i+=6,j++){$scope.storyGroups[j]={"contents":[data.stories[i],data.stories[i+1],data.stories[i+2],data.stories[i+3],data.stories[i+4],data.stories[i+5]]};}}else{$scope.storyGroups.push({"contents":data.stories});}
$scope.showTab=true;unblockUI($(window));$scope.tabsContentLoaded=true;},function(data,stauts,headers,config){unblockUI($(window));});}}]);snaApp.controller("videoListController",["$scope","$rootScope","$http","appConfig","$window","$log","$timeout","$interval","$location","$filter",function($scope,$rootScope,$http,appConfig,$window,$log,$timeout,$interval,$location,$filter){var offset=0,pageSize=14,evenLoad=true,loadMore=true,contentWindow=$(window),stories=[];$rootScope.contentTheme="darker-theme";$rootScope.menuLocationUrl=window.location.protocol+"//"+window.location.host+window.location.pathname;function removeSlashAtUrlEnd(url){while(/\/$/.test(url)){url=url.replace(/\/$/,"");}
return url;}
$rootScope.menuLocationUrl=removeSlashAtUrlEnd($rootScope.menuLocationUrl);$rootScope.pageDescription='                              ';$rootScope.pageKeywords=' ,  ,  ,   ';var groups=[{},{},{}];if($rootScope.deviceType=='TABLET'){pageSize=12;}else if($rootScope.deviceType=='MOBILE'){pageSize=11;}
blockUI(contentWindow);var sectionNames=$scope.initData.sectionUrl?[$scope.initData.sectionUrl]:[];$scope.sectionUrl=$scope.initData.sectionUrl;$http.get(appConfig.apiBaseURL+'/rest/v2/video-list.json',{cache:false,params:{pageSize:pageSize,offset:offset,deviceType:$rootScope.deviceType,sectionNames:sectionNames}}).then(function(response){var data=response.data;if(data.contentItems){for(var i=0;i<data.contentItems.length;i++){stories.push(data.contentItems[i]);}}
loadInitialData(data);$timeout(function(){$scope.contentLoaded=true;},500);unblockUI(contentWindow);},function(){$log.error("Error Fetching videos");unblockUI(contentWindow);});$('html').click(function(evt){if(evt.target.innerHTML!=" "&&evt.target.innerHTML!=""){$(".tab-sections").fadeOut('fast',function(){$scope.$applyAsync(function(){$scope.dropDown=false;})});return true;}});$scope.loadMoreContent=function(event){event&&event.preventDefault();if(!loadMore){return;}
loadMore=false;var sectionNames=$.grep($scope.selectedSections,function(value){return value!=""}).join(","),url;if($scope.selectedSort=='DATE'){url='/rest/v2/video-list.json';}else{url='/rest/v2/mostpopular.json?contentType=VIDEO';}
$http.get(appConfig.apiBaseURL+url,{cache:false,params:{deviceType:$rootScope.deviceType,sectionNames:sectionNames,offset:stories.length,pageSize:pageSize}}).then(function(response){var data=response.data;if(data.contentItems){for(var i=0;i<data.contentItems.length;i++){stories.push(data.contentItems[i]);}}else{loadMore=true;return;}
var items;switch($rootScope.deviceType){case'DESKTOP':if(pageSize!=5){pageSize=5;groups[2].rows.pop();}
items=stories.slice(stories.length-pageSize);if(evenLoad){groups[2].rows.push({"columns":[{"showSummary":true,"width":6,items:[items[0]]},{"width":6,"rows":[{"columns":[{"width":6,items:[items[1]]},{"width":6,items:[items[2]]}]},{"columns":[{"width":6,items:[items[3]]},{"width":6,items:[items[4]]}]}]}]});}else{groups[2].rows.push({"columns":[{"width":6,"rows":[{"columns":[{"width":6,items:[items[0]]},{"width":6,items:[items[2]]}]},{"columns":[{"width":6,items:[items[1]]},{"width":6,items:[items[3]]}]}]},{"showSummary":true,"width":6,items:[items[4]]}]});}
break;case'TABLET':if(pageSize!=6){pageSize=6;groups[2].rows.pop();groups[2].rows.pop();}
items=stories.slice(stories.length-pageSize);if(evenLoad){groups[2].rows.push({"columns":[{"showSummary":true,"width":8,items:[items[0]]},{"width":4,"rows":[{"columns":[{"width":12,items:[items[1]]},{"width":12,items:[items[2]]}]}]}]});}else{groups[2].rows.push({"columns":[{"width":4,"rows":[{"columns":[{"width":12,items:[items[0]]},{"width":12,items:[items[1]]}]}]},{"showSummary":true,"width":8,items:[items[2]]}]});}
groups[2].rows.push({"columns":[{"width":4,items:[items[3]]},{"width":4,items:[items[4]]},{"width":4,items:[items[5]]}]});break;case'MOBILE':if(pageSize!=6){pageSize=6;groups[2].rows.pop();groups[2].rows.pop();groups[2].rows.pop();}
items=stories.slice(stories.length-pageSize);groups[2].rows.push({"columns":[{"width":6,items:[items[0]]},{"width":6,items:[items[1]]}]});groups[2].rows.push({"columns":[{"width":6,items:[items[2]]},{"width":6,items:[items[3]]}]});groups[2].rows.push({"columns":[{"width":6,items:[items[4]]},{"width":6,items:[items[5]]}]});break;}
$timeout(function(){$(document).foundation('equalizer','reflow');},500,false);evenLoad=!evenLoad;loadMore=true;offset+=pageSize;if(!data.hasMore){$scope.maxOffset=true;}else if(items&&items.length<pageSize){$scope.maxOffset=true;}},function(){$log.error("Error Fetching videos");});}
function loadInitialData(data,refresh){if(!data||!data.contentItems||data.contentItems.length==0){$scope.groups=[];$scope.maxOffset=true;return;}
evenLoad=true;loadMore=true;groups[0].rows=[];groups[1].rows=[];groups[2].rows=[];offset+=pageSize;switch($rootScope.deviceType){case'DESKTOP':groups[0].rows[0]={"columns":[{"showSummary":true,"width":6,items:[data.contentItems[0]]},{"width":6,"rows":[{"columns":[{"width":6,items:[data.contentItems[1]]},{"width":6,items:[data.contentItems[2]]}]},{"columns":[{"width":6,items:[data.contentItems[3]]},{"width":6,items:[data.contentItems[4]]}]}]}]};groups[1].rows[0]={"columns":[{"width":3,items:[data.contentItems[5]]},{"width":3,items:[data.contentItems[6]]},{"width":3,items:[data.contentItems[7]]},{"width":3,items:[data.contentItems[8]]}]};groups[2].rows[0]={"columns":[{"width":6,"rows":[{"columns":[{"width":6,items:[data.contentItems[9]]},{"width":6,items:[data.contentItems[11]]}]},{"columns":[{"width":6,items:[data.contentItems[10]]},{"width":6,items:[data.contentItems[12]]}]}]},{"showSummary":true,"width":6,items:[data.contentItems[13]]}]};pageSize=5;break;case'TABLET':groups[0].rows[0]={"columns":[{"showSummary":true,"width":8,items:[data.contentItems[0]]},{"width":4,"rows":[{"columns":[{"width":12,items:[data.contentItems[1]]},{"width":12,items:[data.contentItems[2]]}]}]}]};groups[1].rows[0]={"columns":[{"width":4,items:[data.contentItems[3]]},{"width":4,items:[data.contentItems[4]]},{"width":4,items:[data.contentItems[5]]}]};groups[2].rows[0]={"columns":[{"width":4,"rows":[{"columns":[{"width":12,items:[data.contentItems[6]]},{"width":12,items:[data.contentItems[7]]}]}]},{"showSummary":true,"width":8,items:[data.contentItems[8]]}]};groups[2].rows[1]={"columns":[{"width":4,items:[data.contentItems[9]]},{"width":4,items:[data.contentItems[10]]},{"width":4,items:[data.contentItems[11]]}]};pageSize=6;break;case'MOBILE':groups[0].rows[0]={"columns":[{"showSummary":true,"width":12,items:[data.contentItems[0]]}]};groups[0].rows[1]={"columns":[{"width":6,items:[data.contentItems[1]]},{"width":6,items:[data.contentItems[2]]}]};groups[1].rows[0]={"columns":[{"width":6,items:[data.contentItems[3]]},{"width":6,items:[data.contentItems[4]]}]};groups[2].rows[0]={"columns":[{"width":6,items:[data.contentItems[5]]},{"width":6,items:[data.contentItems[6]]}]};groups[2].rows[1]={"columns":[{"width":6,items:[data.contentItems[7]]},{"width":6,items:[data.contentItems[8]]}]};groups[2].rows[2]={"columns":[{"width":6,items:[data.contentItems[9]]},{"width":6,items:[data.contentItems[10]]}]};pageSize=6;break;}
$scope.groups=groups;if(!data.hasMore&&!refresh){$scope.maxOffset=true;}else if(data.contentItems&&data.contentItems.length<pageSize){$scope.maxOffset=true;}
if(!refresh){$scope.$applyAsync(function(){$(document).foundation({equalizer:{use_tallest:true,equalize_on_stack:true,check_window_height_width:true,}});registerMenuCloseEvent();});$timeout(function(){$(document).foundation('equalizer','reflow');},500,false);if($rootScope.device=='DESKTOP'){$interval(function(){$(document).foundation('equalizer','reflow');},2000,false);}}}
$rootScope.$watch('deviceType',function(value,oldValue){if(value==oldValue){return;}
loadInitialData({contentItems:stories},true);var initialPageSize=14;if(value=='TABLET'){initialPageSize=12;pageSize=6;}else if(value=='MOBILE'){initialPageSize=11;pageSize=6;}else{initialPageSize=14;pageSize=5;}
if(stories.length<initialPageSize){pageSize=initialPageSize-stories.length;evenLoad=!evenLoad;}
if(stories.length<=pageSize){return}
for(var i=initialPageSize;i<stories.length;i+=pageSize){var items=stories.slice(i,i+pageSize);switch($rootScope.deviceType){case'DESKTOP':if(evenLoad){groups[2].rows.push({"columns":[{"showSummary":true,"width":6,items:[items[0]]},{"width":6,"rows":[{"columns":[{"width":6,items:[items[1]]},{"width":6,items:[items[2]]}]},{"columns":[{"width":6,items:[items[3]]},{"width":6,items:[items[4]]}]}]}]});}else{groups[2].rows.push({"columns":[{"width":6,"rows":[{"columns":[{"width":6,items:[items[0]]},{"width":6,items:[items[2]]}]},{"columns":[{"width":6,items:[items[1]]},{"width":6,items:[items[3]]}]}]},{"showSummary":true,"width":6,items:[items[4]]}]});}
break;case'TABLET':if(evenLoad){groups[2].rows.push({"columns":[{"showSummary":true,"width":8,items:[items[0]]},{"width":4,"rows":[{"columns":[{"width":12,items:[items[1]]},{"width":12,items:[items[2]]}]}]}]});}else{groups[2].rows.push({"columns":[{"width":4,"rows":[{"columns":[{"width":12,items:[items[0]]},{"width":12,items:[items[1]]}]}]},{"showSummary":true,"width":8,items:[items[2]]}]});}
groups[2].rows.push({"columns":[{"width":4,items:[items[3]]},{"width":4,items:[items[4]]},{"width":4,items:[items[5]]}]});break;case'MOBILE':groups[2].rows.push({"columns":[{"width":6,items:[items[0]]},{"width":6,items:[items[1]]}]});groups[2].rows.push({"columns":[{"width":6,items:[items[2]]},{"width":6,items:[items[3]]}]});groups[2].rows.push({"columns":[{"width":6,items:[items[4]]},{"width":6,items:[items[5]]}]});break;}
if(items.length<pageSize){pageSize-=items.length;break;}
evenLoad=!evenLoad;}
$timeout(function(){$(document).foundation('equalizer','reflow');},500,false);});$scope.selectedSections=["","","","","","","","",""];$scope.initData.sectionTabs=[{displayName:' ',type:'BY_CATEGORY',"sections":$rootScope.initData.defaultSections}];$scope.selectedTab='BY_CATEGORY_TAB';$scope.selectTab=function(selectedTab,event){if(event){if($(event.currentTarget).siblings(".tab-sections").is(":visible")){$(event.currentTarget).siblings(".tab-sections").stop()
$(event.currentTarget).siblings(".tab-sections").fadeOut('fast',function(){$scope.$applyAsync(function(){$scope.dropDown=false;})});return;}else{$(event.currentTarget).siblings(".tab-sections").stop();$(event.currentTarget).siblings(".tab-sections").fadeIn('fast',function(){$scope.$applyAsync(function(){$scope.dropDown=true;})});}}}
$scope.showSectionFilter=function(event,tab){event&&event.preventDefault();var sectionList=$(event.currentTarget).siblings(".tab-sections");$scope.selectTab(tab,event);if(sectionList.length==0){$(event.currentTarget).siblings(".tab-sections").stop();$(".tab-sections").fadeOut('fast',function(){$scope.$applyAsync(function(){$scope.dropDown=false;})});$scope.dropDown=false;return true;}
return true;}
$scope.updateSelection=function(event){if($.grep($scope.selectedSections,function(value){return value!=""}).join(",").length>0){$scope.activeFilter=true;}else{$scope.activeFilter=false;}
event&&event.stopPropagation();}
$scope.expandTabs=function(event){$("#mobileTabDiv").toggle("slow",function(){if($("#mobileTabsList").is(":visible")){$(event.currentTarget).addClass("icon-arrow-up");$(event.currentTarget).removeClass("icon-arrow-down");}else{$(event.currentTarget).removeClass("icon-arrow-up");$(event.currentTarget).addClass("icon-arrow-down");}
$(event.currentTarget).addClass("icon-arrow-down");});}
$scope.selectMobileTab=function(tab){if(tab.sections){$("#mobileSectionList").toggle("slow",function(){if($("#mobileSectionList").is(":visible")){$scope.$applyAsync(function(){$scope.dropDown=true;});}else{$scope.$applyAsync(function(){$scope.dropDown=false;});}});$scope.sectionFilters=tab.sections;}else{$("#mobileTabDiv").toggle("slow");$("#mobileSectionList").hide();}}
$scope.hideSectionFilter=function(event){$(event.currentTarget).children(".tab-sections").fadeOut();}
$scope.filterStoriesByCategory=function(tab){window.scrollTo(0,0);var sectionNames=$.grep($scope.selectedSections,function(value){return value!=""}).join(",");if($rootScope.deviceType=='TABLET'){pageSize=12;}else if($rootScope.deviceType=='MOBILE'){pageSize=11;}else if($rootScope.deviceType=='DESKTOP'){pageSize=14;}
offset=0;stories=[];$scope.maxOffset=false;var url;if($scope.selectedSort=='DATE'){url='/rest/v2/video-list.json';}else{url='/rest/v2/mostpopular.json?contentType=VIDEO';}
$http.get(appConfig.apiBaseURL+url,{cache:false,params:{deviceType:$rootScope.deviceType,sectionNames:sectionNames,offset:offset,pageSize:pageSize}}).then(function(response){var data=response.data;if(data.contentItems){for(var i=0;i<data.contentItems.length;i++){stories.push(data.contentItems[i]);}}
loadInitialData(data);},function(){$log.error("Error Fetching videos");});}
$scope.selectedSort="DATE";$scope.updateSort=function(event,sort){if(sort==$scope.selectedSort){return;}
offset=0;stories=[];pageSize=14;$scope.maxOffset=false;if($rootScope.deviceType=='TABLET'){pageSize=12;}else if($rootScope.deviceType=='MOBILE'){pageSize=11;}
var sectionNames=$.grep($scope.selectedSections,function(value){return value!=""}).join(","),url;event&&event.preventDefault();$scope.selectedSort=sort;if($scope.selectedSort=='DATE'){url='/rest/v2/video-list.json';}else{url='/rest/v2/mostpopular.json?contentType=VIDEO';}
$http.get(appConfig.apiBaseURL+url,{cache:false,params:{pageSize:pageSize,offset:offset,deviceType:$rootScope.deviceType,sectionNames:sectionNames}}).then(function(response){var data=response.data;if(data.contentItems){for(var i=0;i<data.contentItems.length;i++){stories.push(data.contentItems[i]);}}
loadInitialData(data);},function(){$log.error("Error Fetching videos");});}}]);snaApp.controller("commoditiesController",["$scope","$http","appConfig","$log","timeDifference","$rootScope",function($scope,$http,appConfig,$log,timeDifference,$rootScope){var pageSize=0,offset=0;$scope.commodities=$scope.component.businessContent.commodities;$scope.currencies=$scope.component.businessContent.currencies;$scope.addMoreHide=false;$('.update-currency').click(function(event){event.preventDefault();pageSize=$scope.currencies.length;$http.get(appConfig.apiBaseURL+'/rest/v2/currencies.json?deviceType='+$rootScope.deviceType+"&offset="+offset+"&pageSize="+pageSize).then(function(response){var data=response.data;$scope.currencies=data.currencies;if(!data.hasMore){$scope.addMoreHide=true;}else{$scope.addMoreHide=false;}});$http.get(appConfig.apiBaseURL+'/rest/v2/commodities.json?deviceType='+$rootScope.deviceType+"&offset="+offset+"&pageSize="+pageSize).then(function(response){$scope.commodities=response.data.commodities;});});$('.update-commodity').click(function(event){event.preventDefault();pageSize=$scope.commodities.length;$http.get(appConfig.apiBaseURL+'/rest/v2/commodities.json?deviceType='+$rootScope.deviceType+"&offset="+offset+"&pageSize="+pageSize).then(function(response){$scope.commodities=response.data.commodities;});});$scope.loadMoreCurrency=function(event){!!event&&event.preventDefault();offset=0;pageSize=$scope.currencies.length+5;$http.get(appConfig.apiBaseURL+'/rest/v2/currencies.json?deviceType='+$rootScope.deviceType+"&offset="+offset+"&pageSize="+pageSize).then(function(response){var data=response.data;if(!data.hasMore){$scope.addMoreHide=true;}
if($scope.component.businessContent.currencies){$scope.currencies=data.currencies;}},function(){$log.error("Error Fetching topic data");});};}]);snaApp.controller("currencyListController",["$scope","$http","appConfig","$log","timeDifference","$rootScope",function($scope,$http,appConfig,$log,timeDifference,$rootScope){$scope.arabCurrencyList=$scope.component.businessContent.arabCurrencies;$scope.internationalCurrencyList=$scope.component.businessContent.internationalCurrencies;}]);"use strict"
snaApp.controller("marketController",["$scope","$http","appConfig","$log","$interval",function($scope,$http,appConfig,$log,$interval){$scope.markets=$scope.component.businessContent.markets;$scope.marketsfirstItem=$scope.component.businessContent.markets[0].marketDisplayName;$scope.topGainers=$scope.component.businessContent.topGainers;$scope.topLosers=$scope.component.businessContent.topLosers;$scope.mostActive=$scope.component.businessContent.mostActive;$scope.marketName=$scope.component.businessContent.markets[0].marketShortName
$('.tab-title').click(function(event){event.preventDefault();});var i;$scope.showMarketLists=false;function updateEmptyRows(){$scope.emptyTopGainers=[];$scope.emptyTopLosers=[];$scope.emptyMostActive=[];if($scope.topGainers.length<5&&$scope.topGainers.length!=0){$scope.emptyTopGainers=[];for(i=0;i<5-$scope.topGainers.length;i++){$scope.emptyTopGainers[i]=null;}}
if($scope.topLosers.length<5&&$scope.topLosers.length!=0){$scope.emptyTopLosers=[];for(i=0;i<5-$scope.topLosers.length;i++){$scope.emptyTopLosers[i]=null;}}
if($scope.mostActive.length<5&&$scope.mostActive.length!=0){$scope.emptyMostActive=[];for(i=0;i<5-$scope.mostActive.length;i++){$scope.emptyMostActive[i]=null;}}}
updateEmptyRows();$scope.showMarketList=function(){$scope.showMarketLists=true;$('.dropdown-headline i').addClass('icon-arrow-up');if($('.dropdown_container .dropdown-headline').hasClass("open")){$('.dropdown-headline i').removeClass('icon-arrow-up');$('.dropdown-headline i').addClass('icon-arrow-down');}};$scope.changedValue=function(marketShortName){if(marketShortName==$scope.marketName){return;}
$('.dropdown-headline i').removeClass('icon-arrow-up');$('.dropdown-headline i').addClass('icon-arrow-down');$scope.showMarketLists=false;$scope.marketName=marketShortName;$http.get(appConfig.apiBaseURL+'/rest/v2/market-top/'+$scope.marketName+'.json').then(function(response){updateData(response.data);},function(){$log.error("Error Fetching topic data");});};$interval(function(){$http.get(appConfig.apiBaseURL+'/rest/v2/market-top/'+$scope.marketName+'.json').then(function(response){updateData(response.data);},function(){$log.error("Error Fetching topic data");});},60000);function updateData(data){$scope.marketsfirstItem=data.marketName;$scope.topGainers=data.topGainers;$scope.topLosers=data.topLosers;$scope.mostActive=data.mostActive;updateEmptyRows();}}]);snaApp.controller("commodityListController",["$scope","$http","appConfig","$log","timeDifference","$rootScope",function($scope,$http,appConfig,$log,timeDifference,$rootScope){$scope.oilList=$scope.component.businessContent.oil;$scope.metalList=$scope.component.businessContent.metals;$scope.agricultureList=$scope.component.businessContent.agriculture;}]);snaApp.controller("commoditySelectorController",["$scope","$http","appConfig","$log","timeDifference","$rootScope",function($scope,$http,appConfig,$log,timeDifference,$rootScope){var securityIndex=0;function findInList(securitySymbol,securityList){for(var i=0;i<securityList.length;i++){if(securitySymbol===securityList[i].symbol){return i;}}
return-1;}
$scope.oilfilter={};$scope.agriculturefilter={};$scope.metalfilter={};if($scope.component.businessContent&&$scope.component.businessContent.metals.length>0){$scope.metalfilter.securityName=$scope.component.businessContent.metals[0].securityName;}
if($scope.component.businessContent.agriculture&&$scope.component.businessContent.agriculture.length>0){$scope.agriculturefilter.securityName=$scope.component.businessContent.agriculture[0].securityName;}
if($scope.component.businessContent.oil&&$scope.component.businessContent.oil.length>0){$scope.oilfilter.securityName=$scope.component.businessContent.oil[0].securityName;}
$scope.oilList=$scope.component.businessContent.oil;$scope.metalList=$scope.component.businessContent.metals;$scope.agricultureList=$scope.component.businessContent.agriculture;for(var i=0;i<$scope.oilList.length;i++){if($scope.oilList[i].percentChange>0){$scope.oilList[i].percentChange='('+'+'+$scope.oilList[i].percentChange+'%'+')';}else{$scope.oilList[i].percentChange='('+$scope.oilList[i].percentChange+'%'+')';}
if($scope.oilList[i].netChange>0){$scope.oilList[i].netChange='+'+' '+$scope.oilList[i].netChange;}else{$scope.oilList[i].netChange=(""+$scope.oilList[i].netChange).replace(/^(.{1})(.*)$/,"$1 $2");}}
for(var i=0;i<$scope.metalList.length;i++){if($scope.metalList[i].percentChange>0){$scope.metalList[i].percentChange='('+'+'+$scope.metalList[i].percentChange+'%'+')';}else{$scope.metalList[i].percentChange='('+$scope.metalList[i].percentChange+'%'+')';}
if($scope.metalList[i].netChange>0){$scope.metalList[i].netChange='+'+' '+$scope.metalList[i].netChange;}else{$scope.metalList[i].netChange=(""+$scope.metalList[i].netChange).replace(/^(.{1})(.*)$/,"$1 $2");}}
for(var i=0;i<$scope.agricultureList.length;i++){if($scope.agricultureList[i].percentChange>0){$scope.agricultureList[i].percentChange='('+'+'+$scope.agricultureList[i].percentChange+'%'+')';}else{$scope.agricultureList[i].percentChange='('+$scope.agricultureList[i].percentChange+'%'+')';}
if($scope.agricultureList[i].netChange>0){$scope.agricultureList[i].netChange='+'+' '+$scope.agricultureList[i].netChange;}else{$scope.agricultureList[i].netChange=(""+$scope.agricultureList[i].netChange).replace(/^(.{1})(.*)$/,"$1 $2");}}
if($scope.initData.securitySymbol){if((securityIndex=findInList($scope.initData.securitySymbol,$scope.oilList))>-1){$scope.commodityType='oil';$scope.oilfilter.securityName=$scope.component.businessContent.oil[securityIndex].securityName;$scope.selectedSecurity=$scope.component.businessContent.oil[securityIndex];}else if((securityIndex=findInList($scope.initData.securitySymbol,$scope.metalList))>-1){$scope.commodityType='metal';$scope.metalfilter.securityName=$scope.component.businessContent.metals[securityIndex].securityName;$scope.selectedSecurity=$scope.component.businessContent.metals[securityIndex];}else if((securityIndex=findInList($scope.initData.securitySymbol,$scope.agricultureList))>-1){$scope.commodityType='agriculture';$scope.agriculturefilter.securityName=$scope.component.businessContent.agriculture[securityIndex].securityName;$scope.selectedSecurity=$scope.component.businessContent.agriculture[securityIndex];}else{$scope.commodityType='oil';$scope.oilfilter.securityName=$scope.component.businessContent.oil[0].securityName;$scope.selectedSecurity=$scope.component.businessContent.oil[0];}}else{if($scope.component.businessContent.oil&&$scope.component.businessContent.oil.length>0){$scope.commodityType='oil';$scope.selectedSecurity=$scope.component.businessContent.oil[0];}else if($scope.component.businessContent&&$scope.component.businessContent.metals.length>0){$scope.commodityType='metal';$scope.selectedSecurity=$scope.component.businessContent.metals[0];}else if($scope.component.businessContent.agriculture&&$scope.component.businessContent.agriculture.length>0){$scope.commodityType='agriculture';$scope.selectedSecurity=$scope.component.businessContent.agriculturel[0];}}
$scope.selectSecurity=function(security,type){$scope.commodityType=type;if($scope.selectedSecurity&&$scope.selectedSecurity.symbol==security.symbol){return;}
$http.get(appConfig.apiBaseURL+'/rest/v2/security/'+security.symbol+'.json',{cache:false,params:{deviceType:$rootScope.deviceType,fetchContents:true}}).then(function(response){if(response.data.details){$scope.selectedSecurity=response.data.details;}else{$scope.selectedSecurity=security;}},function(){$scope.selectedSecurity=security;});}}]);snaApp.controller("marketListingController",["$scope","$http","appConfig","$log","timeDifference","$rootScope",function($scope,$http,appConfig,$log,timeDifference,$rootScope){$scope.marketList=$scope.component.businessContent.markets;for(var i=0;i<$scope.marketList.length;i++){if($scope.marketList[i].percentChange>0){$scope.marketList[i].percentChange='('+'+'+$scope.marketList[i].percentChange+'%'+')';}else{$scope.marketList[i].percentChange='('+$scope.marketList[i].percentChange+'%'+')';}
if($scope.marketList[i].netChange>0){$scope.marketList[i].netChange='+'+' '+$scope.marketList[i].netChange;}else{$scope.marketList[i].netChange=(""+$scope.marketList[i].netChange).replace(/^(.{1})(.*)$/,"$1 $2");}}}]);snaApp.controller("topicsController",["$scope","$rootScope","appConfig","$log","$http","timeDifference","$timeout",function($scope,$rootScope,appConfig,$log,$http,timeDifference,$timeout){var contents=$scope.component.contents,groupSize=3;var pageSize=5,offset=0
$rootScope.topicId=$scope.component.topicIds;if(!$scope.component.hasMore){$scope.maxOffsetTopic=true;}
if(!contents||contents.length==0){return;}
$scope.storyGroups=[];if($scope.groupSize){groupSize=$scope.groupSize;}else if($scope.perDevice){if($rootScope.deviceType=='DESKTOP'){groupSize=3;}else if($rootScope.deviceType=='TABLET'||$rootScope.deviceType=='MOBILE'){groupSize=2;}else{groupSize=1;}}
for(var i=0;i<contents.length;i+=groupSize){var group=[];for(var j=0;j<groupSize;j++){if(!contents[j+i]){continue;}
group[j]=contents[j+i];}
$scope.storyGroups.push(group);}
$scope.storyGroupsLoad=[];$scope.loadMoreContent=function(){$scope.loadMore=true;$timeout(function(){$(document).foundation('equalizer','reflow');},500,false);if($rootScope.deviceType=='DESKTOP'){var pageSize=3;offset+=3;}else if($rootScope.deviceType=='TABLET'){var pageSize=2;offset+=2;}else{var pageSize=2;offset+=2;}
$http.get(appConfig.apiBaseURL+'/rest/v2/topics.json?deviceType='+$rootScope.deviceType+"&topics="+$rootScope.topicId+"&offset="+offset+"&pageSize="+pageSize).then(function(response){var data=response.data;$timeout(function(){$(document).foundation('equalizer','reflow');},500,false);for(var i=0;i<data.contents.length;i+=groupSize){var group=[];for(var j=0;j<groupSize;j++){if(!data.contents[j+i]){continue;}
group[j]=data.contents[j+i];}
$scope.storyGroups.push(group);}
if(!data.hasMore){$scope.maxOffsetTopic=true;}},function(){$log.error("Error Fetching topic data");});};}]);snaApp.controller("currencyConverterController",["$scope","$http","$log","$timeout","$rootScope",function($scope,$http,$log,$timeout,$rootScope){var currencyCodes=[{"code":'AED',"name":' '},{"code":'SAR',"name":' '},{"code":'QAR',"name":' '},{"code":'OMR',"name":' '},{"code":'KWD',"name":' '},{"code":'BHD',"name":'  '},{"code":'LBP',"name":' '},{"code":'SYP',"name":' '},{"code":'JOD',"name":' '},{"code":'IQD',"name":' '},{"code":'EGP',"name":' '},{"code":'DZD',"name":' '},{"code":'TND',"name":' '},{"code":'MAD',"name":' '},{"code":'MRO',"name":' '},{"code":'LYD',"name":' '},{"code":'YER',"name":' '},{"code":'USD',"name":' '},{"code":'CAD',"name":' '},{"code":'CHF',"name":' '},{"code":'IRR',"name":' '},{"code":'PKR',"name":' '},{"code":'EUR',"name":''},{"code":'AUD',"name":' '},{"code":'GBP',"name":' '},{"code":'NZD',"name":' '},{"code":'JPY',"name":' '},{"code":'CNY',"name":' '},{"code":'INR',"name":' '}],yahooCurrencyConverterUrl='https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20("CURRENCY_PAIR1", "CURRENCY_PAIR2")&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys';$scope.currencies=currencyCodes;$scope.fromCurrency=currencyCodes[0];$scope.toCurrency=currencyCodes[1];$scope.conversionValue=1;$scope.conversionResult=0;$scope.rates=[];$timeout(function(){$(document).foundation('dropdown','reflow');dropdown=Foundation.libs.dropdown;dropdown.open=function(dropdown,target){this.css(dropdown.addClass(this.settings.active_class),target);dropdown.prev('['+this.attr_name()+']').addClass(this.settings.active_class);dropdown.data('target',target.get(0)).trigger('opened').trigger('opened.fndtn.dropdown',[dropdown,target]);dropdown.attr('aria-hidden','false');target.attr('aria-expanded','true');dropdown.addClass('f-open-'+this.attr_name(true));};},500);$scope.selectFromCurrency=function(currency,event){event&&event.preventDefault();$scope.fromCurrency=currency;$scope.convertCurrency();}
$scope.selectToCurrency=function(currency,event){event&&event.preventDefault();$scope.toCurrency=currency;$scope.convertCurrency();}
var currencyConverterContainer=$('#currencyConverterDiv');$scope.convertCurrency=function(event){event&&event.preventDefault();if($scope.rates[$scope.fromCurrency.code+$scope.toCurrency.code]!=null){calculateResultValue($scope.conversionValue);}else if($scope.fromCurrency.code==$scope.toCurrency.code){$scope.rates[$scope.fromCurrency.code+$scope.toCurrency.code]={Rate:1};calculateResultValue($scope.conversionValue);}else{blockUI(currencyConverterContainer);$http.jsonp(yahooCurrencyConverterUrl.replace('CURRENCY_PAIR1',$scope.fromCurrency.code+$scope.toCurrency.code).replace('CURRENCY_PAIR2',$scope.toCurrency.code+$scope.fromCurrency.code),{jsonpCallbackParam:'callback=JSON_CALLBACK&_'+new Date().getTime()+'=',cache:false,}).then(function(response){var data=response.data;if(typeof data.query=="undefined"){unblockUI(currencyConverterContainer);return;}
$log.log("Yahoo currency conversion response",data);$scope.rates[data.query.results.rate[0].id]=data.query.results.rate[0];$scope.rates[data.query.results.rate[1].id]=data.query.results.rate[1];$scope.exchangeDate=new Date(data.query.created);calculateResultValue($scope.conversionValue);unblockUI(currencyConverterContainer);});}}
$scope.$watch('conversionValue',function(conversionValue){calculateResultValue(conversionValue);});function calculateResultValue(conversionValue){var rate;if($scope.rates[$scope.fromCurrency.code+$scope.toCurrency.code]){rate=$scope.rates[$scope.fromCurrency.code+$scope.toCurrency.code].Rate;}else if($scope.fromCurrency.code==$scope.toCurrency.code){rate=1;}
if(!rate){return;}
var conversionResult=(rate*conversionValue)+"";$log.log("original result",conversionResult);if(conversionResult.indexOf(".")>-1){conversionResult=parseFloat(Math.round(conversionResult*10000)/10000).toFixed(4);}
$scope.conversionResult=isNaN(conversionResult)?0:conversionResult;}
$timeout($scope.convertCurrency,500);window.onReady=function(){var userAgent=navigator.userAgent.toLowerCase();$(".currency-input").keydown(function(e){if($.inArray(e.keyCode,[46,8,9,27,13,110,190])!==-1||(e.keyCode==65&&e.ctrlKey===true)||(e.keyCode==67&&e.ctrlKey===true)||(e.keyCode==88&&e.ctrlKey===true)||(e.keyCode>=35&&e.keyCode<=39)){return;}
if((e.shiftKey||(e.keyCode<48||e.keyCode>57))&&(e.keyCode<96||e.keyCode>105)){e.preventDefault();}});$scope.openDropDown=function(event,id){$timeout(function(){if($rootScope.device!='DESKTOP'){$(id).css("overflow-y","auto");$(id).css("overflow-x","hidden");}},500)}
if($rootScope.device!='DESKTOP'){$(window).on("resize",function(){$timeout(function(){if($rootScope.device!='DESKTOP'){$("#from_currency_dropdown.f-open-dropdown").css("overflow-y","auto");$("#from_currency_dropdown.f-open-dropdown").css("overflow-x","hidden");$("#to_currency_dropdown.f-open-dropdown").css("overflow-y","auto");$("#to_currency_dropdown.f-open-dropdown").css("overflow-x","hidden");}},500)});}
if($rootScope.device=='DESKTOP'){$("#from_currency_dropdown").niceScroll({nativeparentscrolling:true,preservenativescrolling:false});$("#to_currency_dropdown").niceScroll({nativeparentscrolling:true,preservenativescrolling:false});}else{}};$(document).ready(window.onReady);}]);snaApp.controller("popularLeagueController",["$rootScope","$scope","appConfig","$log","timeDifference",function($rootScope,$scope,appConfig,$log,timeDifference){$scope.popularLeagueContents=$scope.component.sportsContent.leagues;if($scope.popularLeagueContents==undefined||$scope.popularLeagueContents.length==0){$scope.hidePopularLeagues=true;}}]);snaApp.controller("stocksController",["$scope","$http","appConfig","$log","$interval","$rootScope",function($scope,$http,appConfig,$log,$interval,$rootScope){var pageSize=0,offset=0;$scope.showStockList=false;$scope.stockfirstItem=$scope.component.businessContent.marketStocks[0].marketDisplayName;$scope.marketName=$scope.component.businessContent.marketStocks[0].marketShortName;$scope.marketStockList=$scope.component.businessContent.marketStocks;$scope.marketLists=[];angular.forEach($scope.marketStockList,function(value,key){$scope.marketLists.push(value);});$scope.marketStockLists=$scope.component.businessContent.marketStocks[0].stocks;var arrayStockName=[];$scope.showStockList=function(){$scope.showStockLists=true;};$scope.changedValue=function(marketShortName,marketDisplayName){if(marketShortName==$scope.marketName){return;}
$scope.addMoreHide=false;$scope.showStockLists=false;$scope.marketName=marketShortName;$scope.stockfirstItem=marketDisplayName;var cachedData=checkCache($scope.marketName);$http.get(appConfig.apiBaseURL+'/rest/v2/market/stocks/'+$scope.marketName+'.json').then(function(response){updateData(response.data);},function(){$log.error("Error Fetching topic data");});};$scope.loadMoreStocks=function(){pageSize=$scope.marketStockLists.length+5;var stockName=$scope.marketStockLists[0].marketShortName;$http.get(appConfig.apiBaseURL+'/rest/v2/market/stocks/'+stockName+'.json?deviceType='+$rootScope.deviceType+"&offset="+offset+"&pageSize="+pageSize).then(function(response){var data=response.data;if($scope.marketStockLists){$scope.marketStockLists=data.stocks;}
if(!data.hasMore){$scope.addMoreHide=true;}},function(){$log.error("Error Fetching topic data");});};$interval(function(){$http.get(appConfig.apiBaseURL+'/rest/v2/market/stocks/'+$scope.marketName+'.json?deviceType='+$rootScope.deviceType+"&offset="+offset+"&pageSize="+$scope.marketStockLists.length).then(function(response){updateData(response.data);});},60000);function checkCache(marketShortName){for(i=0;i<arrayStockName.length;i++){if(arrayStockName[i].key===marketShortName){return arrayStockName[i].data;}}}
function updateData(data){$scope.marketStockLists=data.stocks;}}]);snaApp.controller("leagueListingController",["$scope","$http","appConfig","$log","timeDifference","$rootScope",function($scope,$http,appConfig,$log,timeDifference,$rootScope){var pageSize=6,internationaloffset=0,regionaloffset=0,setgroupSize=3;$scope.internationalLeagues=$scope.component.sportsContent.internationalLeagues;$scope.regionalLeagues=$scope.component.sportsContent.regionalLeagues;$scope.internationalClubLeagues=$scope.component.sportsContent.internationalClubLeagues;$scope.addMoreInternationalHide=false;$scope.addMoreRegionalHide=false;$scope.addMoreInternationalClubHide=false;$scope.internationalCompetitions=[];$scope.internationalTeamsList=[];$scope.regionalCompetitions=[];$scope.regionalTeamsList=[];$scope.internationalClubCompetitions=[];$scope.internationalClubTeamsList=[];$scope.$watch('deviceType',function(deviceType){$scope.orientationChange();$('#competition'+$scope.selected).removeClass('activeInternationalTeam');$('#competition'+$scope.selected).removeClass('activeRegionalTeam');$('#competition'+$scope.selected).removeClass('activeInternationalClubTeam');});$scope.internationalLeagueGroups=[];$scope.regionalLeagueGroups=[];$scope.internationalClubLeagueGroups=[];if($scope.groupSize){groupSize=$scope.groupSize;}
if(!$scope.component.sportsContent.hasMoreInternational){$scope.addMoreInternationalHide=true;}
if(!$scope.component.sportsContent.hasMoreRegional){$scope.addMoreRegionalHide=true;}
if(!$scope.component.sportsContent.hasMoreInternationalClub){$scope.addMoreInternationalClubHide=true;}
function addGroups(dataItems,groupList,groupSize){for(var i=0;i<dataItems.length;i+=groupSize){var group={leagues:[],teams:[],isExpanded:false,currentIndex:-1};for(var j=0;j<groupSize;j++){if(!dataItems[j+i]){continue;}
group.leagues[j]=dataItems[j+i];if(group.leagues[j].competitionid===$scope.selected){group.isExpanded=true;group.currentIndex=j;group.teams=group.leagues[j].teams;}}
groupList.push(group);}}
$scope.orientationChange=function(){$scope.internationalLeagueGroups=[];$scope.regionalLeagueGroups=[];$scope.internationalClubLeagueGroups=[];if($rootScope.deviceType=='DESKTOP'){groupSize=3;}else if($rootScope.deviceType=='TABLET'){groupSize=2;}else{groupSize=1;}
if($scope.internationalLeagues!=undefined){addGroups($scope.internationalLeagues,$scope.internationalLeagueGroups,groupSize);}
if($scope.regionalLeagues!=undefined){addGroups($scope.regionalLeagues,$scope.regionalLeagueGroups,groupSize);}
if($scope.internationalClubLeagues!=undefined){addGroups($scope.internationalClubLeagues,$scope.internationalClubLeagueGroups,groupSize);}};$scope.openInternationalLeague=function(outerIndex,index,competitionid,group){$scope.selected=competitionid;if(group.selected==competitionid){group.selected=null;}else{group.selected=competitionid;}
if(group.currentIndex==index){group.isExpanded=!group.isExpanded;}else{group.isExpanded=true;}
group.currentIndex=index;group.teams=group.leagues[index].teams;};function collapseInternationalLeague(){for(var i=0;i<$scope.internationalLeagueGroups.length;i++){var group=$scope.internationalLeagueGroups[i];group.isExpanded=false;group.currentIndex=-1;}}
$scope.openRegionalLeague=function(outerIndex,index,competitionid,group){$scope.selected=competitionid;if(group.selected==competitionid){group.selected=null;}else{group.selected=competitionid;}
if(group.currentIndex==index){group.isExpanded=!group.isExpanded;}else{group.isExpanded=true;}
group.currentIndex=index;group.teams=group.leagues[index].teams;};function collapseRegionalLeague(){for(var i=0;i<$scope.regionalLeagueGroups.length;i++){var group=$scope.regionalLeagueGroups[i];group.isExpanded=false;group.currentIndex=-1;}}
$scope.openInternationalClubLeague=function(outerIndex,index,competitionid,group){$scope.selected=competitionid;if(group.selected==competitionid){group.selected=null;}else{group.selected=competitionid;}
if(group.currentIndex==index){group.isExpanded=!group.isExpanded;}else{group.isExpanded=true;}
group.currentIndex=index;group.teams=group.leagues[index].teams;};function collapseInternationalClubLeague(){for(var i=0;i<$scope.internationalClubLeagueGroups.length;i++){var group=$scope.internationalClubLeagueGroups[i];group.isExpanded=false;group.currentIndex=-1;}}
$scope.loadMoreInternationalLeagues=function(){internationaloffset=$scope.internationalLeagues.length;$http.get(appConfig.apiBaseURL+'/rest/v2/leagues/international.json?deviceType='+$rootScope.deviceType+"&offset="+internationaloffset+"&pageSize="+pageSize).then(function(response){var data=response.data;if(data.leagues){$scope.internationalLeagues=$scope.internationalLeagues.concat(data.leagues);addGroups(data.leagues,$scope.internationalLeagueGroups,groupSize);}
if(!data.hasMore){$scope.addMoreInternationalHide=true;}},function(data,status,headers,config){$log.error("Error Fetching league data");});};$scope.loadMoreRegionalLeagues=function(){regionaloffset=$scope.regionalLeagues.length;$http.get(appConfig.apiBaseURL+'/rest/v2/leagues/regional.json?deviceType='+$rootScope.deviceType+"&offset="+regionaloffset+"&pageSize="+pageSize).then(function(response){var data=response.data;if(data.leagues){$scope.regionalLeagues=$scope.regionalLeagues.concat(data.leagues);addGroups(data.leagues,$scope.regionalLeagueGroups,groupSize);}
if(!data.hasMore){$scope.addMoreRegionalHide=true;}},function(){$log.error("Error Fetching league data");});};$scope.loadMoreInternationalClubLeagues=function(){internationalCluboffset=$scope.internationalClubLeagues.length;$http.get(appConfig.apiBaseURL+'/rest/v2/leagues/internationalclub.json?deviceType='+$rootScope.deviceType+"&offset="+internationalCluboffset+"&pageSize="+pageSize).then(function(response){var data=response.data;if(data.leagues){$scope.internationalClubLeagues=$scope.internationalClubLeagues.concat(data.leagues);addGroups(data.leagues,$scope.internationalClubLeagueGroups,groupSize);}
if(!data.hasMore){$scope.addMoreInternationalClubHide=true;}},function(){$log.error("Error Fetching league data");});};$scope.removeEvent=function(event){event.preventDefault();};}]);snaApp.controller("leagueStandingsController",["$scope","$http","appConfig","$log","timeDifference","$rootScope",function($scope,$http,appConfig,$log,timeDifference,$rootScope){$scope.internationalLeagues=$scope.component.sportsContent.internationalLeagues;$scope.regionalLeagues=$scope.component.sportsContent.regionalLeagues;$scope.clearfilter=false;$scope.teamsFilter=$scope.component.sportsContent.regionalLeagues;$(".accordion").on("click","li",function(event){event.preventDefault();});$scope.toggleStandingFilter=function(event){event&&event.preventDefault();$("#standingFilter").toggle();$("#standingFilter").toggleClass('expanded');$("#standingFilterButton").toggleClass('expanded');$('#leagueStandingModal').foundation('reveal','close');}
$scope.selectTeam=function(event,team){event&&event.preventDefault();$scope.selectedTeam=team;$scope.toggleStandingFilter();}
$scope.teamFilter=function(value,index){if(!$scope.selectedTeam){return true;}
if(value.competitionid==$scope.selectedTeam.competitionid){return true;}
return false;}}]);snaApp.controller("latestNewsController",["$scope","$http","appConfig","$log","timeDifference","$rootScope","$timeout",function($scope,$http,appConfig,$log,timeDifference,$rootScope,$timeout){var pageSize=5,offset=0;$scope.hideLatestnewsComponent=false;$scope.latestNews=$scope.component.sportsContent.leagues;$scope.addMoreHide=false;$scope.latestnewsfirstItem=[];$scope.latestNewsLists=[];$rootScope.latestNewsItem=[];var latestIndex=0;if($scope.latestNews&&$scope.latestNews.length>0){for(var i=0;i<$scope.latestNews.length;i++){if($scope.latestNews[i].contents!=undefined){if(!$scope.latestNews[i].hasMore){$scope.addMoreHide=true;}
$scope.latestnewsfirstItem[latestIndex]=$scope.latestNews[i].name;$scope.latestNewsLists[latestIndex]=$scope.latestNews[i].contents;$rootScope.latestNewsItem[latestIndex]=$scope.latestNews[i].competitionid;latestIndex++;$scope.hideLatestnewsComponent=false;}else{if($scope.latestNewsLists.length>0){$scope.hideLatestnewsComponent=false;}else{$scope.hideLatestnewsComponent=true;}}}
$scope.latestnewsfirstItem=$scope.latestnewsfirstItem[0];$scope.latestNewsLists=$scope.latestNewsLists[0];$rootScope.latestNewsItem=$rootScope.latestNewsItem[0];}else{$scope.hideLatestnewsComponent=true;}
$scope.showNewsListItems=function(){$scope.showNewsListing=true;};$scope.newsListsItems=[];var arrayNewsName=[];angular.forEach($scope.latestNews,function(value,key){if(value.contents){$scope.newsListsItems.push(value);}});$scope.changedValue=function(name,competitionid){$rootScope.latestNewsItem=competitionid;$scope.addMoreHide=false;$scope.showNewsListing=false;$scope.newsCompetitionId=competitionid;$scope.latestnewsfirstItem=name;$scope.latestActiveItem=name;var cachedData=checkCache($scope.newsCompetitionId);$timeout(function(){$(document).foundation('equalizer','reflow');},50,false);if(cachedData){if(!cachedData.hasMore){$scope.addMoreHide=true;}
updateData(cachedData);return;}
$http.get(appConfig.apiBaseURL+'/rest/v2/latestnews/'+$scope.newsCompetitionId+'.json').then(function(response){var data=response.data;if(!data.hasMore){$scope.addMoreHide=true;}
arrayNewsName.push({'key':$scope.newsCompetitionId,'data':data});updateData(data);},function(){$log.error("Error Fetching topic data");});};$scope.loadMoreNews=function(){offset=$scope.latestNewsLists.length;$http.get(appConfig.apiBaseURL+'/rest/v2/latestnews/'+$rootScope.latestNewsItem+'.json?deviceType='+$rootScope.deviceType+"&offset="+offset+"&pageSize="+pageSize).then(function(response){var data=response.data;$timeout(function(){$(document).foundation('equalizer','reflow');},50,false);if(data.contentItems){$scope.latestNewsLists=$scope.latestNewsLists.concat(data.contentItems);}
if(data.hasMore==false){$scope.addMoreHide=true;}else{$scope.addMoreHide=false;}},function(){$log.error("Error Fetching topic data");});};function checkCache(newsCompetitionId){for(i=0;i<arrayNewsName.length;i++){if(arrayNewsName[i].key===newsCompetitionId){return arrayNewsName[i].data;}}}
function updateData(data){$scope.latestNewsLists=data.contentItems;}}]);snaApp.controller("matchListingController",["$scope","$http","appConfig","$window","$log","$location","$rootScope","$timeout","$sce",function($scope,$http,appConfig,$window,$log,$location,$rootScope,$timeout,$sce){$scope.clearfilter=false;$('.tab-title').click(function(event){event.preventDefault();});$scope.$watch('deviceType',function(deviceType){$scope.orientationLeagueChange();});$scope.orientationLeagueChange=function(){if(deviceType=='TABLET'||deviceType=='DESKTOP'){$('.internationalClubLeague').css('display','block');$('.internationalLeague').css('display','block');}
if(deviceType=='MOBILE'){$('.internationalClubLeague').css('display','none');$('.internationalLeague').css('display','none');$('.regionalLeague').css('display','block');}}
$scope.toggleTeamFilter=function(event){event&&event.preventDefault();$("#teamFilter").toggle();$("#teamFilter").toggleClass('expanded');$("#teamFilterButton").toggleClass('expanded');}
$scope.openLeague=function(event){event&&event.preventDefault();$(".regionalLeague").toggle();$(".regionalLeague").toggleClass('expanded');$('.internationalClubLeague').css('display','none');$('.internationalLeague').css('display','none');}
$scope.openIntClubLeague=function(event){event&&event.preventDefault();$(".internationalClubLeague").toggle();$(".internationalClubLeague").toggleClass('expanded');$('.internationalLeague').css('display','none');$('.regionalLeague').css('display','none');}
$scope.openIntLeague=function(event){event&&event.preventDefault();$(".internationalLeague").toggle();$(".internationalLeague").toggleClass('expanded');$('.regionalLeague').css('display','none');$('.internationalClubLeague').css('display','none');}
$http.get(appConfig.apiBaseURL+'/rest/v2/competition/all.json',{cache:true,params:{deviceType:$rootScope.deviceType,fetchContents:true}}).then(function(response){var data=response.data;$scope.internationalLeagues=data.international;$scope.regionalLeagues=data.regional;$scope.internationalClubLeagues=data.internationalClub;$('.tabs-content').show();});$scope.loadMatches=function(day,date,event){event&&event.preventDefault();$scope.containerText=false;if(!date){date=new Date();}
if(day=='TODAY'){}else if(day=='YESTERDAY'){date.setDate(date.getDate()-1);}else if(day=='TOMORROW'){date.setDate(date.getDate()+1);}
$http.get(appConfig.apiBaseURL+'/rest/v2/matches.json',{cache:true,params:{deviceType:$rootScope.deviceType,timeZoneOffset:date.getTimezoneOffset(),date:date.getDate()+"-"+(date.getMonth()+1)+"-"+date.getFullYear()}}).then(function(response){var data=response.data;if(day=='TODAY'){$scope.todayMatches=data.leagues;}else if(day=='YESTERDAY'){$scope.yesterdayMatches=data.leagues;}else if(day=='TOMORROW'){$scope.tomorrowMatches=data.leagues;}else{$scope.calendarMatches=data.leagues;}
unblockUI($(".match-schedule"));});}
$scope.loadMatches('YESTERDAY');$scope.loadMatches('TODAY');$scope.loadMatches('TOMORROW');$scope.loadMatches('CALENDAR');$rootScope.$on('resumeApp',function(){$scope.loadMatches('YESTERDAY');$scope.loadMatches('TODAY');$scope.loadMatches('TOMORROW');$scope.loadMatches('CALENDAR');});var datePicker=$('#datePicker').MomentPicker({date:moment(),level:0});datePicker.MomentPicker().renderDays();datePicker.on('pick',function(event){$log.log("picked date is ",event.api.val().toDate());blockUI($(".match-schedule"));$scope.loadMatches('CALENDAR',event.api.val().toDate());});$scope.toggleTeamFilter=function(event){event&&event.preventDefault();$("#teamFilter").toggle();$("#teamFilter").toggleClass('expanded');$("#teamFilterButton").toggleClass('expanded');$('#firstModal').foundation('reveal','close');$('#secondModal').foundation('reveal','close');$('#thirdModal').foundation('reveal','close');$scope.teamSelected=false;}
$scope.selectTeam=function(event,team){event&&event.preventDefault();$scope.selectedTeam=team;$scope.toggleTeamFilter();$scope.teamSelected=true;}
$scope.teamFilter=function(value,index){if(!$scope.selectedTeam){return true;}
if(value.competitionid==$scope.selectedTeam.competitionid){return true;}
return false;}}]);snaApp.controller("topScorerController",["$rootScope","$scope","appConfig","$log","timeDifference",function($rootScope,$scope,appConfig,$log,timeDifference){$scope.topScorerContents=$scope.component.sportsContent.leagues;$scope.showTopLists=false;$scope.firstTopScorer=[];$scope.topScorersDetail=[];var topScorerIndex=0;if($scope.topScorerContents.length>0){for(var i=0;i<$scope.topScorerContents.length;i++){if($scope.topScorerContents[i].topScorers.length>0){$scope.firstTopScorer[topScorerIndex]=$scope.topScorerContents[i].displayName;$scope.topScorersDetail[topScorerIndex]=$scope.topScorerContents[i].topScorers;topScorerIndex++;$scope.hideTopScorerComponent=false;}else{if($scope.topScorersDetail.length>0){$scope.hideTopScorerComponent=false;}else{$scope.hideTopScorerComponent=true;}}}
$scope.firstTopScorer=$scope.firstTopScorer[0];$scope.topScorersDetail=$scope.topScorersDetail[0];}
$scope.showTopList=function(){$scope.showTopLists=true;};$scope.topScorerLists=[];angular.forEach($scope.topScorerContents,function(value,key){if(value.topScorers.length>0){$scope.topScorerLists.push(value);}});$scope.changedValue=function(competitionid,displayName){$scope.topScorersDetail=[];$scope.firstTopScorer=displayName;$scope.topScorerActiveItem=displayName;$scope.showTopLists=false;for(var i=0;i<$scope.component.sportsContent.leagues.length;i++){if(competitionid==$scope.component.sportsContent.leagues[i].competitionid){for(var j=0;j<$scope.component.sportsContent.leagues[i].topScorers.length;j++){$scope.topScorersDetail[j]=$scope.component.sportsContent.leagues[i].topScorers[j];}}}};}]);snaApp.controller("matchResultsController",["$scope","$http","appConfig","$log","$rootScope","$interval",function($scope,$http,appConfig,$log,$rootScope,$interval){$scope.matchResults=$scope.component.sportsContent.results;$scope.liveMatches=$scope.component.sportsContent.liveMatches;$('.tab-title').click(function(event){event.preventDefault();});$scope.openliveMatchList=function(matchId){$('#'+matchId).toggle();if($('#liveMatch'+matchId).text()==' '){$('#liveMatch'+matchId).text(' ');}else if($('#liveMatch'+matchId).text()==' '){$('#liveMatch'+matchId).text(' ');}};$scope.openPlayedMatchList=function(matchId){$('#'+matchId).toggle();if($('#matchesPlayed'+matchId).text()==' '){$('#matchesPlayed'+matchId).text(' ');}else if($('#matchesPlayed'+matchId).text()==' '){$('#matchesPlayed'+matchId).text(' ');}};$interval(function(){updateResults();},30000);function updateResults(){$http.get(appConfig.apiBaseURL+'/rest/v2/matchcenter/matches.json',{cache:false,params:{timeZoneOffset:new Date().getTimezoneOffset()}}).then(function(response){var matches=response.data.matches;if(!matches||matches.length==0){return;}
$log.log("live",matches);$scope.liveMatches=matches;});}
$rootScope.$on('resumeApp',function(){updateResults();});}]);snaApp.controller("tennisController",["$rootScope","$scope","appConfig","$log","timeDifference",function($rootScope,$scope,appConfig,$log,timeDifference){$scope.tournamentRankings=$scope.component.sportsContent.atpRankings;$scope.rankingsList=[{"name":"  "},{"name":"   "}];$scope.firstTournament=[];var tournamentIndex=0;$scope.femaleRankings=false;for(var i=0;i<$scope.rankingsList.length;i++){$scope.firstTournament[tournamentIndex]=$scope.rankingsList[i].name;tournamentIndex++;}
$scope.firstTournament=$scope.firstTournament[0];$scope.changedValue=function(name,index){if(index==0){$scope.tournamentRankings=$scope.component.sportsContent.atpRankings;$scope.firstTournament=name;$scope.selectedItem=name;$scope.femaleRankings=false;}else if(index==1){$scope.tournamentRankings=$scope.component.sportsContent.wtaRankings;$scope.firstTournament=name;$scope.selectedItem=name;$scope.femaleRankings=true;}};}]);snaApp.controller("motorsportsController",["$rootScope","$scope","appConfig","$log","timeDifference",function($rootScope,$scope,appConfig,$log,timeDifference){$scope.motorSportDetails=$scope.component.sportsContent.driverRankings;$scope.motorSportList=[{"name":""},{"name":""}];$scope.motorSportValue=[];var motorSportIndex=0;$scope.showDriverList=true;for(var i=0;i<$scope.motorSportList.length;i++){$scope.motorSportValue[motorSportIndex]=$scope.motorSportList[i].name;motorSportIndex++;}
$scope.motorSportValue=$scope.motorSportValue[0];$scope.changedValue=function(name,index){if(index==0){$scope.motorSportDetails=$scope.component.sportsContent.driverRankings;$scope.motorSportValue=name;$scope.selectedMotorItem=name;$scope.showDriverList=true;$scope.showConstructorList=false;}else if(index==1){$scope.motorSportDetails=$scope.component.sportsContent.constructorRankings;$scope.motorSportValue=name;$scope.selectedMotorItem=name;$scope.showDriverList=false;$scope.showConstructorList=true;}};}]);"use strict"
snaApp.controller("basketballController",["$rootScope","$scope",function($rootScope,$scope){$scope.basketBallGroups=[{"name":"  "},{"name":"  "}];$(".accordion").on("click","li",function(event){event.preventDefault();});$scope.firstBasketBallItem=[];var basketBallIndex=0;for(var i=0;i<$scope.basketBallGroups.length;i++){$scope.firstBasketBallItem[basketBallIndex]=$scope.basketBallGroups[i].name;basketBallIndex++;}
$scope.firstBasketBallItem=$scope.firstBasketBallItem[0];$scope.basketBallLists=$scope.component.sportsContent.westernConference;$scope.changeBasketItem=function(name,index){if(index==0){$scope.basketBallLists=$scope.component.sportsContent.westernConference;$scope.firstBasketBallItem=name;$scope.activeItem=name;}else if(index==1){$scope.basketBallLists=$scope.component.sportsContent.easternConference;$scope.firstBasketBallItem=name;$scope.activeItem=name;}};}]);'user strict'
snaApp.controller("mostPopularStoriesController",["$scope",function($scope){$scope.mostPopularStoriesContent=$scope.component.contents;$scope.popularStoriesList=[];$scope.popularStoriesListImages=[];var mostPopular=0;for(var i=1;i<$scope.component.contents.length;i++){$scope.popularStoriesList[mostPopular]=$scope.component.contents[i];mostPopular++;}}]);'use strict';snaApp.controller("usElectionBannerController",["$scope","appConfig","$log",'$http','getDeviceOSService','$timeout','$interval',function($scope,appConfig,$log,$http,deviceOSService,$timeout,$interval){var stopPollResult;var winnerStatusDecideFn=function(header){var democratCand,republicanCand;for(var i=0;i<header.candidates.length;i++){if(header.candidates[i].id==9){democratCand=header.candidates[i];$scope.democratCand=header.candidates[i];}else if(header.candidates[i].id==10){republicanCand=header.candidates[i];$scope.republicanCand=header.candidates[i];}}
if(republicanCand.electoralCount>=270){$scope.winnerStatus='republic';}else if(democratCand.electoralCount>=270){$scope.winnerStatus='democratic';}else{$scope.winnerStatus='inProgress';}};var startPollResult=function(intervalTimer){stopPollResult=$interval(function(){$http.get(appConfig.apiBaseURL+'/rest/v2/timeline-header/us_election.json',{params:{}}).success(function(data,status,headers,config){$scope.header=data;if(data&&typeof data.candidates!='undefined'&&data.candidates.length>0){winnerStatusDecideFn(data);}
$interval.cancel(stopPollResult);startPollResult(data.headerViewRefreshTimeInSec*1000);}).error(function(data,status,headers,config){});},intervalTimer);}
$http.get(appConfig.apiBaseURL+'/rest/v2/timeline-header/us_election.json',{params:{}}).success(function(data,status,headers,config){if(data&&typeof data!='undefined'){var timelineData=data;var electionDate=new Date(timelineData.electionDate);if(timelineData.serverTime){var timeOffset=new Date()-new Date(timelineData.serverTime);timelineData.electionDate=new Date(electionDate.getTime()+timeOffset).toUTCString();}
$scope.header=timelineData;if($scope.header.type=='NATIONAL_RESULTS'){winnerStatusDecideFn(timelineData);$interval.cancel(stopPollResult);startPollResult($scope.header.headerViewRefreshTimeInSec*1000);}}}).error(function(data,status,headers,config){});}]);snaApp.config(function($locationProvider){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("msie 9.0")==-1){$locationProvider.html5Mode({enabled:true,requireBase:false,rewriteLinks:false});}});if(!!Modernizr.history&&'scrollRestoration'in history){history.scrollRestoration='manual';}
snaApp.controller("videoWidgetModalController",["$scope","$http","appConfig","$window","$log","$location",'timeDifference','$sce','getDeviceOSService','$timeout','$compile','$q','$filter',function($scope,$http,appConfig,$window,$log,$location,timeDifference,$sce,deviceOSService,$timeout,$compile,$q,$filter){window.scrollPosBeforeVdoWidgetModalOpen=0;window.videowidgetJWPlayer;var videoWidgetModal=$("#videoWidgetModal"),listenToBrowserHistory=true,videoWidgetOpenDirectFromUrl,height_of_video_wgt_list=0,timeoutForVideoListHeightCalc,videoWidgetPlayList=[],nextVideoToBePlayed,nextIndextoBePlayed,DELAY_TO_PLAY_NEXT_VIDEO=5000,timeoutFnForNextVideoInPlaylist,jwPlayerReadyDeferred=$q.defer(),jwPlayerReady=false,listenForBrowserUrlHistoryChange;$scope.browserNavButtonAction=false;$scope.videoWidgetModal={};$scope.isIOSDevice=!!(deviceOSService.getDeviceOS=='iOS');$rootScope.openVideoModalFromDOM=function(event,video,index,playCurrentVideo){!!event&&event.preventDefault();!!event&&event.stopPropagation();playCurrentVideo=!!playCurrentVideo;updateScrollPosBeforeModalOpen();openVideoWidgetModal(video,index,playCurrentVideo);pushHistoryInBrowser();};function changeCurrentVideoInView(){$scope.videoWidgetModalCurrentVideo=$rootScope.videoWidgetModalCurrentVideo;var currVideo=$scope.videoWidgetModalCurrentVideo
$rootScope.Sheadline=currVideo.headline;$rootScope.Ssummary=currVideo.summary;$rootScope.shareMainMediaUrl=currVideo.mediaAsset.imageUrl;$rootScope.Surl='http://'+appConfig.sharingHost+'/'+currVideo.type.toLowerCase()+'/'+currVideo.id;$rootScope.shareEmailUrl='http://'+appConfig.sharingHost+'/'+currVideo.type.toLowerCase()+'/'+currVideo.id+'/';sendGoogleAnalytics(currVideo);}
function sendGoogleAnalytics(currVideo){sendGAPageView(appConfig.webContext,currVideo.type.toLowerCase(),currVideo.id,currVideo.urlFriendlySuffix,currVideo.headline);}
function playVideoInJwPlayer(currVideo){var imageUrl=constructAbsImageUrl(currVideo);var tracks=[];if(!!currVideo.thumbnailUrl){var tracks=[{file:currVideo.thumbnailUrl,kind:"thumbnails"}];if(document.location.protocol=='https:'&&typeof tracks[0].file!="undefined"){tracks[0].file=tracks[0].file.replace("http://","https://");}}
jwplayer('videoPlayerContainer0').load([{file:currVideo.videoUrl[0].url,image:imageUrl,autostart:true,tracks:tracks,mediaid:currVideo.jwPlayerMediaId,title:currVideo.headline}]).play(true);}
function setCurrentVideoInRoot(videoObj){$rootScope.videoWidgetModalCurrentVideo=videoObj;}
function getCurrentVideoInRoot(){return $rootScope.videoWidgetModalCurrentVideo;}
function setNextVideoInScope(videoObj){$scope.$applyAsync(function(){$scope.videoWidgetModal.nextVideo=videoObj;});}
function getNextVideoInScope(){return $scope.videoWidgetModal.nextVideo;}
function updatePlayList(playList){videoWidgetPlayList=playList;}
function setNextVideoToBePlayed(index){nextVideoToBePlayed=videoWidgetPlayList.pop();}
$scope.clickVideoWidgetListItemFromDOM=function(video,index){setCurrentVideoInRoot(video);changeCurrentVideoInView();changeScrollPosOfVideoListDesktop(getCurrentVideoInRoot().posInVideoWidgetListDom);updatePlayList($scope.videoWidgetVideos.slice(index));$timeout.cancel(timeoutFnForNextVideoInPlaylist);hideNextVideoBreakInterstitial();scrollTopAfterClickOnVideoItem();playVideoInJwPlayer(video);}
$scope.playNextVideoInPlayListImmediate=function($event){$timeout.cancel(timeoutFnForNextVideoInPlaylist);playNextVideoInPlayList();}
$scope.videoCompleted=function(){videoWidgetPlayList.splice(0,1);updatePlayList(videoWidgetPlayList);exitFullscreen();if(isEndOfPlaylist()){resetPlaylist();}
if(!!videoWidgetPlayList&&videoWidgetPlayList.length>0){showNextVideoBreakInterstitial();setNextVideoInScope(videoWidgetPlayList[0]);timeoutFnForNextVideoInPlaylist=$timeout(function(){playNextVideoInPlayList();},DELAY_TO_PLAY_NEXT_VIDEO);}}
function isEndOfPlaylist(){return(!!videoWidgetPlayList&&videoWidgetPlayList.length==0);}
function resetPlaylist(){updatePlayList($scope.videoWidgetVideos.slice());}
function playNextVideoInPlayList(){setCurrentVideoInRoot(videoWidgetPlayList[0]);changeScrollPosOfVideoListDesktop(videoWidgetPlayList[0].posInVideoWidgetListDom);changeCurrentVideoInView();playVideoInJwPlayer(getCurrentVideoInRoot());hideNextVideoBreakInterstitial();}
function changeScrollPosOfVideoListDesktop(posInVideoWidgetListDom){if($rootScope.deviceType!='DESKTOP'){return;}
var bufferScrollFromTopforCurentVideo=20;var videoListElem=videoWidgetModal.find('.vdo-wgt-list');var currentVideoElem=videoListElem.find('.vdo-wgt-list-item').eq(posInVideoWidgetListDom)[0];var posOfCurrentVideoFromParent=currentVideoElem.offsetTop;videoListElem[0].scrollTop=posOfCurrentVideoFromParent-bufferScrollFromTopforCurentVideo;}
function showNextVideoBreakInterstitial(){$(".vdo-wgt-current-vdo-break-to-next-video").show();setTimeout(function(){$(".vdo-wgt-current-vdo-break-to-next-video .progress-fill").addClass('start-progress-to-next-vdo');},100)}
function hideNextVideoBreakInterstitial(){$(".vdo-wgt-current-vdo-break-to-next-video").hide();$(".vdo-wgt-current-vdo-break-to-next-video .progress-fill").removeClass('start-progress-to-next-vdo');}
function scrollTopAfterClickOnVideoItem(){if($rootScope.deviceType=='DESKTOP'){return;}
var elemToScroll=document.querySelectorAll("body > #videoWidgetModal .feed-wrap.full-screen-modal")[0];setTimeout(function(){elemToScroll.scrollTop=0;},500)}
$rootScope.closeVideoModalFromDOM=function(event){!!event&&event.preventDefault();!!event&&event.stopPropagation();goBackBrowserHistory();closeVideoWidgetModal();};$rootScope.videoWidgetVideosDeferredObj.promise.then(function(data){initLoadvideoWidget(data);eventHandlerForModal();});function initLoadvideoWidget(videos){videoWidgetModal=$("#videoWidgetModal")
$rootScope.videoWidgetVideos=addPosOfVideoObjInVideoWidgetListDom(videos);if(window.location.hash.indexOf('#videoplaylist')>-1){var hash_index=window.location.hash.split("-")[1];videoWidgetOpenDirectFromUrl=true;pushHistoryInBrowser();openVideoWidgetModal($rootScope.videoWidgetVideos[hash_index]);}else{$location.state({"videoWidgetOpen":false});$location.replace();}
bindRouteChangeSuccess();$(document).foundation('reveal',{animation:'none'});}
function addPosOfVideoObjInVideoWidgetListDom(videos){for(var i=0;i<videos.length;i++){videos[i].posInVideoWidgetListDom=i;}
return videos;}
function eventHandlerForModal(argument){videoWidgetModal.on('close.fndtn.reveal',function(e){if(e.namespace!='fndtn.reveal'){return;}
iosCloseModalTreatment();});videoWidgetModal.on('opened.fndtn.reveal',function(e){if(e.namespace!='fndtn.reveal'){return;}
iosOpenModalTreatment();resetScrollPosOfPlaylistInDesktop();resetScrollPosOfVideoWidgetInMobile();if(getIEVersion()!=9){changeCurrentVideoInView();}});}
function openVideoWidgetModal(video,index,playCurrentVideo){$('body').css('overflow','hidden');$('body').css('overflow-y','hidden');$('body').addClass('modal-opened video-widget-modal-opened');initVideoWidgetPlayer(video,playCurrentVideo);updatePlayList($scope.videoWidgetVideos.slice(index));$timeout(function(){videoWidgetModal.foundation('reveal','open',{'close_on_esc':false});bindEscapeKeyHandler();ie9ChangeCurrentVideoInView();},100,false);}
function resetScrollPosOfPlaylistInDesktop(argument){if($rootScope.deviceType!='DESKTOP'){return;}
videoWidgetModal.find(".vdo-wgt-list")[0].scrollTop=0;}
function resetScrollPosOfVideoWidgetInMobile(argument){if($rootScope.deviceType=='DESKTOP'){return;}
videoWidgetModal.find(".feed-wrap.full-screen-modal")[0].scrollTop=0;}
function ie9ChangeCurrentVideoInView(){if(getIEVersion()==9){changeCurrentVideoInView();}}
function initVideoWidgetPlayer(video,playCurrentVideo){var imageUrl;if(!$rootScope.videoWidgetVideos||$rootScope.videoWidgetVideos.length==0){return;}
video=video||$rootScope.videoWidgetVideos[0];$scope.videoWidgetVideos=$rootScope.videoWidgetVideos;setCurrentVideoInRoot(video);if(!!jwPlayerReady){imageUrl=constructAbsImageUrl(video);var tracks=[];if(!!video.thumbnailUrl){var tracks=[{file:video.thumbnailUrl,kind:"thumbnails"}];if(document.location.protocol=='https:'&&typeof tracks[0].file!="undefined"){tracks[0].file=tracks[0].file.replace("http://","https://");}}
jwplayer('videoPlayerContainer0').load([{file:video.videoUrl[0].url,image:imageUrl,autostart:false,tracks:tracks,mediaid:video.videoUrl[0].jwPlayerMediaId,title:video.headline}]);}else{$scope.currentVideoContent={details:video,id:new Date().getTime(),mediaAsset:{imageUrl:video.mediaAsset.imageUrl},videoUrl:[{url:video.videoUrl[0].url}],thumbnailUrl:video.thumbnailUrl,headline:video.headline}}
if(!!playCurrentVideo){autoPlayForDesktop();}
hideNextVideoBreakInterstitial();}
function constructAbsImageUrl(videoObj){return"/"+$rootScope.webContext+"/images"+$filter('imageAdvFilter')(videoObj.mediaAsset.imageUrl,[[.94,.77],[1,1],[1,1]],0.563,true,[1600,768]);}
$scope.jwPlayerReady=function(){jwPlayerReadyDeferred.resolve("jwPlayerReady");jwPlayerReady=true;turnOffIPhoneInlinePlay();}
function turnOffIPhoneInlinePlay(argument){videoWidgetModal.find('sna-video video').removeAttr('playsinline').removeAttr('webkit-playsinline')}
function autoPlayForDesktop(){if($rootScope.deviceType!='DESKTOP'){return;}
if(!!jwPlayerReady){jwplayer('videoPlayerContainer0').play(true);}else{jwPlayerReadyDeferred.promise.then(function(data){jwplayer('videoPlayerContainer0').play(true);},function(){});}}
function closeVideoWidgetModal(){$('body').css('overflow','');$('body').css('overflow-y','scroll');$('body').removeClass('modal-opened video-widget-modal-opened');cleanUpVideoWidgetModalBeforeClose();videoWidgetModal.foundation('reveal','close');};function cleanUpVideoWidgetModalBeforeClose(){if(!!jwplayer('videoPlayerContainer0')){jwplayer('videoPlayerContainer0').pause(true);try{jwplayer('videoPlayerContainer0').stop();}catch(e){try{jwplayer('videoPlayerContainer0').stop();}catch(error){}}}
$timeout.cancel(timeoutFnForNextVideoInPlaylist);unBindEscapeKeyHandler();hideNextVideoBreakInterstitial();exitFullScreenOnCloseVideoWidgetModal();}
function exitFullScreenOnCloseVideoWidgetModal(argument){videoWidgetModal.find('#videoPlayerContainer0').removeClass('jw-flag-fullscreen');setTimeout(function(){$("body").removeClass('fullscreen-video');if($rootScope.device=='DESKTOP'&&!(isVideoWidgetModalOpened())){$('body').css('overflow','');$('body').css('overflow-y','scroll');}},1000);exitFullscreen();}
function isVideoWidgetModalOpened(){return $('body').hasClass('modal-opened video-widget-modal-opened');}
function bindEscapeKeyHandler(){$('body').off('keyup.cardmodal').on('keyup.cardmodal',function(event){if(event.which===27){if($("body").hasClass('fullscreen-video')){return;}
$rootScope.closeVideoModalFromDOM();}});}
function unBindEscapeKeyHandler(){$('body').off('keyup.cardmodal');}
function pushHistoryInBrowser(){if(!!Modernizr.history){if(!!videoWidgetOpenDirectFromUrl){$location.path("/"+appConfig.webContext+$rootScope.initData.url);$location.state({"videoWidgetOpen":false});$location.hash("");$location.replace();stoplistenForBrowserUrlHistoryChange();}
setTimeout(function(){$scope.$applyAsync(function(){$location.path("/"+appConfig.webContext+$rootScope.initData.url);$location.hash("videoplaylist");$location.state({"videoWidgetOpen":true});stoplistenForBrowserUrlHistoryChange();});},50);}}
function stoplistenForBrowserUrlHistoryChange(){listenForBrowserUrlHistoryChange=false;}
function startlistenForBrowserUrlHistoryChange(){listenForBrowserUrlHistoryChange=true;}
function goBackBrowserHistory(){if(!!Modernizr.history){window.history.go(-1);}}
function historyPopState(state){if(!state){return;}
if(!!state&&!!state.videoWidgetOpen){openVideoWidgetModal();return;}
var updateScrollafterPopstate=function(e){window.scrollTo(0,window.scrollPosBeforeVdoWidgetModalOpen);window.removeEventListener('scroll',updateScrollafterPopstate);};if((getIEVersion()==11||isIEEdge())){window.addEventListener('scroll',updateScrollafterPopstate,'',true);}else{window.addEventListener('scroll',updateScrollafterPopstate);}
closeVideoWidgetModal();}
function iosOpenModalTreatment(){if(deviceOSService.getDeviceOS=='iOS'){scrollTop=(document.documentElement&&document.documentElement.scrollTop)||document.body.scrollTop;$('.reveal-modal-bg').css({'background':'#000000'});}}
function iosCloseModalTreatment(){if(deviceOSService.getDeviceOS=='iOS'){$('html').css('overflow','');$('.reveal-modal-bg').css({'background':''});$timeout(function(){if(document.documentElement){document.documentElement.scrollTop=scrollTop;}
document.body.scrollTop=scrollTop;},100,false);}}
function updateScrollPosBeforeModalOpen(){window.scrollPosBeforeVdoWidgetModalOpen=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset;}
function exitFullscreen(){if(document.exitFullscreen){document.exitFullscreen();}else if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else if(document.webkitExitFullscreen){document.webkitExitFullscreen();}}
function bindRouteChangeSuccess(){var ua=navigator.userAgent.toLowerCase();$rootScope.$on('$locationChangeSuccess',function(event,newUrl,oldUrl,newState,oldState){if(ua.indexOf("msie 9.0")==-1){if(!!listenForBrowserUrlHistoryChange){historyPopState(newState);}
else{startlistenForBrowserUrlHistoryChange();}}});}}]);function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)func.apply(context,args);};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)func.apply(context,args);};};;"use strict"
snaApp.factory('videoPlayer',['$rootScope','appConfig','$http','$log','$sce','$filter','getDeviceOSService',function($rootScope,appConfig,$http,$log,$sce,$filter,getDeviceOSService){var make360VideoSameDomain=function(_360Videourl){_360Videourl=_360Videourl.replace(/^(https?)(\:\/\/.+\.com)/ig,function(){if(!window.location.origin){window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?':'+window.location.port:'');}
var changedDomain=window.location.origin;return changedDomain;});return _360Videourl;};var videoPlayer=new function(){this.jwplayer=function(elementId,urls,isAndroid,autoStart,image,adTag,isYotube,tracksThumbnails,relatedVideos,jwPlayerMediaId,videoTitle,muted,videoId,currentVideoObj,isVrSupportedPlayer,viewportWidthObj){if(isVrSupportedPlayer&&currentVideoObj.is360Video){var isVrVideoSupported=true;}
var srcUrls=[];for(var i=0;i<urls.length;i++){if(isVrVideoSupported&&currentVideoObj.is360Video){urls[i].url=make360VideoSameDomain(urls[i].url);}
srcUrls.push({file:urls[i].url});}
var tracks=[];if(tracksThumbnails&&tracksThumbnails.length>0){tracks=tracksThumbnails;if(document.location.protocol=='https:'&&typeof tracks[0].file!="undefined"){tracks[0].file=tracks[0].file.replace("http://","https://");}}
var _muted=muted||false;var repeat=false;var playlist=[{id:videoId,title:videoTitle,sources:srcUrls,image:image,tracks:tracks,mediaid:jwPlayerMediaId}];if(isVrVideoSupported&&window.jwplayerVersion==8){playlist[0].stereomode='monoscopic';}
if(isVrVideoSupported){relatedVideos=relatedVideos.filter(function(video){if(!video.is360Video){return false;}
return true;});}else if(isVrSupportedPlayer&&!currentVideoObj.is360Video){relatedVideos=relatedVideos.filter(function(video){if(video.is360Video){return false;}
return true;});}
if(typeof relatedVideos!=='undefined'&&relatedVideos.length>0&&(getIEVersion()==0||getIEVersion()>9)){var relatedVideosList;repeat=true;relatedVideosList=relatedVideos.map(function(video){var srcUrlsRelated=[];for(var i=0;i<video.videoUrl.length;i++){if(isVrVideoSupported&&video.is360Video){video.videoUrl[i].url=make360VideoSameDomain(video.videoUrl[i].url);}
srcUrlsRelated.push({file:video.videoUrl[i].url})}
var imageSrc='';if(lodash.get(viewportWidthObj,"viewportWidth",false)){imageSrc="/"+$rootScope.webContext+"/images"+$filter('imageAdvFilter')(video.mediaAsset.imageUrl,viewportWidthObj.viewportWidth,0.563,lodash.get(viewportWidthObj,"noSidebar",false),lodash.get(viewportWidthObj,"maxWidthOfRoot",null),lodash.get(viewportWidthObj,"maxWidthLevel1",null));}else{imageSrc="/"+$rootScope.webContext+"/images"+$filter('imagefilter')(video.mediaAsset.imageUrl,[1000,$rootScope.deviceWidth,$rootScope.deviceWidth],0.563);}
var videoItem={id:video.id,title:video.headline,sources:srcUrlsRelated,image:imageSrc,mediaid:video.jwPlayerMediaId,tracks:[{file:(document.location.protocol=='https:'&&typeof video.thumbnailUrl!="undefined"?video.thumbnailUrl.replace("http://","https://"):video.thumbnailUrl),kind:"thumbnails"}],videoObj:video};if(isVrVideoSupported&&video.is360Video&&window.jwplayerVersion==8){videoItem.stereomode='monoscopic';}
return videoItem;});if(typeof relatedVideosList!=='undefined'&&relatedVideosList.length>0){playlist[0].videoObj=currentVideoObj;playlist=playlist.concat(relatedVideosList);}}
var setup={primary:getIEVersion()==9?"flash":"html5",autostart:autoStart,repeat:repeat,mute:_muted,width:'100%',height:'100%',stretching:'uniform',androidhls:!!isAndroid,localization:{nextUp:' ',},"hlshtml":true,"skin":{"url":$rootScope.appAssetsUrl+"/styles/jw-skin-sna.css","name":"seven sna"},ga:{label:"title"},}
if(isYotube){setup.playlist=[{id:videoId,title:videoTitle,image:image,file:srcUrls[0].file,tracks:tracks,mediaid:jwPlayerMediaId}];}else{setup.playlist=playlist;}
if(isVrSupportedPlayer&&currentVideoObj.is360Video&&window.jwplayerVersion==7){setup.plugins={};setup.plugins[$rootScope.appAssetsUrl+'/js/lib/jwplayer-7.8.7/plugins/vr/vr.js']={}}
if(isVrVideoSupported&&((getDeviceOSService.isWindows&&isFirefox())||(isAndroidOS()&&isFirefox()))){setup.autostart=false;$(".win-and-ff-360-banner").show();}else{$(".win-and-ff-360-banner").hide();}
var player=jwplayer(elementId).setup(setup);player.on('pause',function(){this.pause(true);});player.on('play',function(event){if(event&&event.playReason=='interaction'){this.autoplay=false;}
if(this&&this.autoplay){return;}
if(this.snaPaused){this.pause(true);return;}else if(window.activeJWPlayer&&this&&window.activeJWPlayer.id!=this.id){if(window.activeJWPlayer.getState().toLowerCase()=='buffering'){window.activeJWPlayer.snaPaused=true;}
window.activeJWPlayer.pause(true);}
if(window.activeYtPlayer&&typeof window.activeYtPlayer.pauseVideo!='undefined'){window.activeYtPlayer.pauseVideo();typeof window.activeYtPlayer.closeFlyout!='undefined'&&window.activeYtPlayer.closeFlyout();}
window.activeJWPlayer=this;typeof(playRadio)!='undefined'&&window.playRadio(true);if(isVrVideoSupported&&$rootScope.device=='DESKTOP'){if(isChrome()||isSafari()){$("#"+elementId+" .jw-media canvas").css("cursor","-webkit-grab")}else{$("#"+elementId+" .jw-media canvas").css("cursor","grab")}}});player.on('error',function(event){$log.error("Error playing video",event.message);});player.on('setupError',function(event){$log.error("Error setup player",event.message);});player.on('adPlay',function(){if(window.activeJWPlayer&&this&&window.activeJWPlayer.id!=this.id){window.activeJWPlayer.pause(true);}
window.activeJWPlayer=this;typeof(playRadio)!='undefined'&&window.playRadio(true);});player.on('adError',function(error){$log.error("Error loading ad",error.message);});if(typeof(screen)!='undefined'&&screen.unlockOrientation){player.on('fullscreen',function(event){if(event.fullscreen){screen.unlockOrientation();}else{screen.lockOrientation('portrait');}});}
return player;};}()
return videoPlayer;}]);'use strict';snaApp.directive("snaVideo",['$rootScope','$interval','$timeout','$http','appConfig','$log','$window','videoPlayer','$filter','$sce',function($rootScope,$interval,$timeout,$http,appConfig,$log,$window,videoPlayer,$filter,$sce){var controller=new ScrollMagic.Controller(),scrollUpScene,scrollDownScene,latestFlyingVideo,scrollUpSceneAutoplay,scrollDownSceneAutoplay,isIE=getIEVersion()>0,index=0,jwIconVolumeOverlay='#jw-icon-volume-overlay';function link(scope,element,attrs){var flyingout=false,player,scrollTop;scope.playerLoaded=false;scope.videoLoaded=false;scope.id=index++;var isNotSNAVideo=false;var nonSNAVideoPlainAbsUrl=false;if(scope.$eval(attrs.showcaption)){scope.showCaption=true;}
if(scope.$eval(attrs.isyoutube)){scope.isYoutube=true;}
if(scope.$eval(attrs.autoplay)&&(getIEVersion()==0||getIEVersion()>8)){$(element).addClass('autoplay');scope._autoplay=true;}
scope.$watch('content',function(newValue){if(!newValue||newValue.noWatch){return;}
if(isIE&&scope.content.videoUrl&&scope.content.videoUrl[0].url.indexOf('https://www.youtube.com/watch?v')==0){scope.flyout=false;}
try{jwplayer('videoPlayerContainer'+scope.id).remove();}catch(error){$log.debug("Error removing jwplayer",error);}
scope.playerLoaded=false;scope.videoLoaded=false;$(element).find('#videoImg').on('load',function(){$(element).find('#defaultImg').css('visibility','hidden');});setVideoThumbnail();if(!scope.postLoad||$rootScope.deviceType!='DESKTOP'||(typeof $rootScope.device!='undefined'&&$rootScope.device!='DESKTOP')){scope.postLoad=false;$timeout(scope.playVideo,1000);}else{scope.videoLoaded=true;}});scope.playVideo=function(event){event&&event.preventDefault();event&&event.stopPropagation();$rootScope.trackGAEvent('SNA_VIDEO',scope.content.headline);$(element).find(jwIconVolumeOverlay).hide();if(event&&!scope.videoLoaded){return;}
if(event){if(scope.videoLoaded){scope.playerLoaded=true;}}
if(scope.playerLoaded&&scope.videoLoaded&&!scope.postLoad){if(scope._autoplay){player.playOriginIsUser=true;player.autoplay=false;}
player.play(true);player.setMute(false);return;}
var urls=scope.content.videoUrl;var ua=navigator.userAgent.toLowerCase();var isAndroid=ua.indexOf("android")>-1&&ua.indexOf("iemobile")==-1;var isIe9=ua.indexOf("msie 9.0")>-1;var useJwPlayer=true;if(isAndroid){var match=ua.match(/android\s([0-9\.]*)/i);if(match){if(parseFloat(match[1])<4.1){useJwPlayer=false;}}else{useJwPlayer=true;}}
if(window.jwplayerVersion==8){window.jwplayer.key=appConfig.jwplayerKey8;scope.jwplayer8=true;}else{window.jwplayer.key=appConfig.jwplayerKey7;scope.jwplayer7=true;}
if(useJwPlayer){scope.tracksThumbnails=[];scope.playlistOffMuteControl=false;if(typeof scope.content.thumbnailUrl!=='undefined'){scope.tracksThumbnails=[{file:scope.content.thumbnailUrl,kind:"thumbnails"}];}else if(typeof scope.content.mediaAsset!=='undefined'&&typeof scope.content.mediaAsset.thumbnailUrl!=='undefined'){scope.tracksThumbnails=[{file:scope.content.mediaAsset.thumbnailUrl,kind:"thumbnails"}];}
var viewPortWidthObj;viewPortWidthObj={viewportWidth:null,noSidebar:false,maxWidthOfRoot:null,maxWidthLevel1:null}
viewPortWidthObj.viewportWidth=scope.viewportWidth;viewPortWidthObj.noSidebar=scope.noSidebar;viewPortWidthObj.maxWidthOfRoot=scope.maxWidthOfRoot;viewPortWidthObj.maxWidthLevel1=scope.maxWidthLevel1;player=videoPlayer.jwplayer('videoPlayerContainer'+scope.id,urls,isAndroid,attrs.autoPlay=="true"||scope.postLoad,isNotSNAVideo?nonSNAVideoPlainAbsUrl:scope.imageSrc,attrs.prerollTag,scope.isYoutube,scope.tracksThumbnails,scope.content.relatedVideos,scope.jwPlayerMediaId,scope.content.headline,scope.muted,scope.content.id,scope.content,scope.isVrSupportedPlayer,viewPortWidthObj);player.on('ready',function(){!!scope.playerReady&&scope.playerReady();scope.$applyAsync(function(){scope.videoLoaded=true;});if(scope._autoplay){player.playOriginIsUser=false;player.autoplay=true;createScenesAutoplay(element);}
var ctrlBarMOtarget,ctrlbarMutationobserver;if(scope.showNavArrowOnControlIsOn&&window.isMutationObserverSupported){ctrlBarMOtarget=element[0].querySelector("[id^='videoPlayerContainer']");ctrlbarMutationobserver=new MutationObserver(function(mutations){mutations.forEach(function(mutation){if(mutation.attributeName=='class'&&mutation.type=='attributes'&&(jQuery(mutation.target).is('.jw-flag-ads-vpaid:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) ')||jQuery(mutation.target).is('.jw-flag-user-inactive.jw-state-playing:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) ')||jQuery(mutation.target).is('.jw-flag-user-inactive.jw-state-buffering:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) ')||jQuery(mutation.target).is('.jwplayer.jw-flag-overlay-open-related'))){scope.showNavArrowOnControlIsOn({isVisible:false});}else{scope.showNavArrowOnControlIsOn({isVisible:true});}});});var config={attributes:true,childList:false,characterData:false}
ctrlbarMutationobserver.observe(ctrlBarMOtarget,config);}});player.on('mute',function(state){if(typeof state=='undefined'||typeof state.mute=='undefined'||player.getState().toLowerCase()=='paused'){return;}
if(scope._autoplay){if(state.mute&&!player.playOriginIsUser){$(element).find(jwIconVolumeOverlay).show();}else{$(element).find(jwIconVolumeOverlay).hide();}}});player.on('complete',function(){scope.videoComplete();$(element).find(jwIconVolumeOverlay).hide();if(!flyingout){destroyScenes();latestFlyingVideo=null;}});player.on('playlist',function(playList){if(typeof playList.playlist[0].image!='undefined'){scope.$applyAsync(function(){scope.imageSrc=playList.playlist[0].image;});}
$('.jw-nextup-close').on('click',function(){$(this).closest('.jw-nextup-container').addClass('jw-nextup-container-hidden');});});player.on('pause',function(state){if(scope._autoplay){if(typeof state!=='undefined'&&typeof state.pauseReason!=='undefined'&&state.pauseReason=='interaction'&&typeof state.newstate!=='undefined'&&state.newstate=='paused'){player.autoplay=false;$(element).find(jwIconVolumeOverlay).hide();}
if(typeof state!=='undefined'&&typeof state.pauseReason!=='undefined'&&state.pauseReason!='interaction'&&typeof state.newstate!=='undefined'&&state.newstate=='paused'){$(element).find(jwIconVolumeOverlay).hide();}}
scope.videoPause(state);if(!flyingout&&scope.flyout){if(player.autoplay&&!player.playOriginIsUser){return;}
destroyScenes();latestFlyingVideo=null;}});player.on('fullscreen',function(event){if(event.fullscreen){$("body").addClass('fullscreen-video');if($rootScope.device=='DESKTOP'){scrollTop=(document.documentElement&&document.documentElement.scrollTop)||document.body.scrollTop;}}else{setTimeout(function(){$("body").removeClass('fullscreen-video');},1000);if(isChrome()){setTimeout(function(){if($rootScope.device=='DESKTOP'&&$rootScope.flyoutVideoPresent){document.body.scrollTop=scrollTop;}},1);}}});player.on('play',function(event){if(scope._autoplay){if(typeof event!=='undefined'&&typeof event.playReason!=='undefined'&&typeof player.playOriginIsUser!=='undefined'){if(player.playOriginIsUser||(event.playReason=='interaction')){$(element).find(jwIconVolumeOverlay).hide();player.setMute(false);player.autoplay=false;}else{$(element).find(jwIconVolumeOverlay).show();player.setMute(true);}}}else{if(player.getConfig().playReason=='autostart'&&!scope.playlistOffMuteControl){player.setMute(false);if(typeof player.getConfig()!=='undefined'&&'playlist'in player.getConfig()){scope.playlistOffMuteControl=true;}}}
if(this.snaPaused){this.snaPaused=false;return;}
scope.$applyAsync(function(){scope.playerLoaded=true;});scope.videoPlay();player.closeFlyout=scope.closeFlyout;if($rootScope.device!='DESKTOP'){scrollTop=parseInt(element.offset().top)-element[0].getBoundingClientRect().height/2;}
if(scope.flyout){if(player.autoplay&&!player.playOriginIsUser){return;}
if(latestFlyingVideo&&latestFlyingVideo!=element){scrollDownLeave(latestFlyingVideo);createScenes(element);}else if(!latestFlyingVideo){createScenes(element);}else if(!scrollDownScene){createScenes(element);}
latestFlyingVideo=element;}else if(latestFlyingVideo&&latestFlyingVideo!=element){if(player.autoplay&&!player.playOriginIsUser){return;}
scrollDownLeave(latestFlyingVideo);destroyScenes();}});player.on('playlistItem',function(data){scope.playlistItemChange({data:data});});if(isIe9){scope.videoLoaded=true;scope.playerLoaded=true;}
if(attrs.autoPlay=="true"){if($rootScope.device=='DESKTOP'){scope.playerLoaded=true;}}}else{$.each(urls,function(index,obj){if(obj.platform=="MobileH264"){scope.androidVideoUrl=obj.url;}});scope.nativeAndroid=true;}
return false;};scope.closeFlyout=function(){if(!flyingout){return;}
flyingout=false;destroyScenes();var video=$(element).find('.inline-video');video.css({left:'',top:'',bottom:'',right:'',height:'',position:'',width:''});video.removeClass('flyout-prepare');element.find('#flyoutButtonsDiv').hide();player.pause(true);if(player.getState().toLowerCase()=='buffering'){player.snaPaused=true;}};function setVideoThumbnail(){scope.imageSrc="";if(scope.content.mediaAsset.imageUrl.indexOf('http://')==0||scope.content.mediaAsset.imageUrl.indexOf('https://')==0){scope.imageSrc=$sce.trustAsResourceUrl(scope.content.mediaAsset.imageUrl);if(typeof $sce.valueOf(scope.imageSrc)=="string"){isNotSNAVideo=true;nonSNAVideoPlainAbsUrl=$sce.valueOf(scope.imageSrc)}}else if(scope.content.mediaAsset.imageUrl.indexOf("/"+$rootScope.webContext+"/images")==0){if(typeof scope.viewportWidth!="undefined"){scope.imageSrc=$filter('imageAdvFilter')(scope.content.mediaAsset.imageUrl,scope.viewportWidth,0.563,scope.noSidebar,scope.maxWidthOfRoot,scope.maxWidthLevel1,true);}else{scope.imageSrc=$filter('imagefilter')(scope.content.mediaAsset.imageUrl,[1000,$rootScope.deviceWidth,$rootScope.deviceWidth],0.563);}}else{if(typeof scope.viewportWidth!="undefined"){scope.imageSrc="/"+$rootScope.webContext+"/images"
+$filter('imageAdvFilter')(scope.content.mediaAsset.imageUrl,scope.viewportWidth,0.563,scope.noSidebar,scope.maxWidthOfRoot,scope.maxWidthLevel1,true);}else{scope.imageSrc="/"+$rootScope.webContext+"/images"+$filter('imagefilter')(scope.content.mediaAsset.imageUrl,[1000,$rootScope.deviceWidth,$rootScope.deviceWidth],0.563);}}}
function destroyScenes(){if(scrollDownScene&&scrollUpScene){scrollDownScene.remove();scrollDownScene=scrollDownScene.destroy();scrollUpScene.remove();scrollUpScene=scrollUpScene.destroy(true);}}
function createScenesAutoplay(element){if($rootScope.deviceType!='DESKTOP'||(typeof $rootScope.device!=undefined&&$rootScope.device!='DESKTOP')){return;}
var autoplayDisabled=function(){return(typeof player!=='undefined'&&!player.autoplay)||player.playOriginIsUser;};$('<div id="jw-icon-volume-overlay">').html('<div class="jw-icon-volume-overlay-content"><svg xmlns="http://www.w3.org/2000/svg" class="jw-svg-icon jw-svg-icon-volume-0" '
+'viewBox="0 0 240 240"><path d="M116.4,42.8v154.5c0,2.8-1.7,3.6-3.8,1.7l-54.1-48.1H28.9c-2.8,0-5.2-2.3-5.2-5.2V94.2c0-2.8,2.3-5'
+'.2,5.2-5.2h29.6l54.1-48.1C114.6,39.1,116.4,39.9,116.4,42.8z M212.3,96.4l-14.6-14.6l-23.6,23.6l-23.6-23.6l-14.6,14.6l23.6,23.6l-'
+'23.6,23.6l14.6,14.6l23.6-23.6l23.6,23.6l14.6-14.6L188.7,120L212.3,96.4z"></path></svg></div>').on('click',function(event){event&&event.stopPropagation();if(window.activeYtPlayer&&typeof window.activeYtPlayer.pauseVideo!='undefined'){window.activeYtPlayer.pauseVideo();}
if(window.activeJWPlayer&&window.activeJWPlayer.getState().toLowerCase()=='buffering'){window.activeJWPlayer.snaPaused=true;}
if(window.activeJWPlayer&&window.activeJWPlayer.id!=player.id){window.activeJWPlayer.pause(true);}
player.playOriginIsUser=true;player.autoplay=false;player.setMute(false);if(scope.flyout){if(latestFlyingVideo&&latestFlyingVideo!=element){scrollDownLeave(latestFlyingVideo);createScenes(element);}else if(!latestFlyingVideo){createScenes(element);}else if(!scrollDownScene){createScenes(element);}
latestFlyingVideo=element;}else if(latestFlyingVideo&&latestFlyingVideo!=element){scrollDownLeave(latestFlyingVideo);destroyScenes();}
window.activeJWPlayer=player;}).prependTo($(element).find('#videoWrapper'));scrollDownSceneAutoplay=new ScrollMagic.Scene({triggerElement:element[0],offset:element[0].offsetHeight*0.50,triggerHook:1,}).on('enter',function(){if(autoplayDisabled()){return;}
$timeout(function(){player.setMute(true);player.play(true);scope.$applyAsync(function(){scope.playerLoaded=true;});},100);}).on('leave',function(){if(autoplayDisabled()){return;}
player.play(false);});scrollUpSceneAutoplay=new ScrollMagic.Scene({triggerElement:element[0],offset:element[0].offsetHeight*0.50,triggerHook:0,}).on('enter',function(){if(autoplayDisabled()){return;}
$timeout(function(){player.setMute(true);player.play(false);},100);}).on('leave',function(){if(autoplayDisabled()){return;}
player.play(true);scope.$applyAsync(function(){scope.playerLoaded=true;});});controller.addScene(scrollUpSceneAutoplay);controller.addScene(scrollDownSceneAutoplay);}
function createScenes(element){if($rootScope.deviceType!='DESKTOP'||(typeof $rootScope.device!=undefined&&$rootScope.device!='DESKTOP')){return;}
if(scrollDownScene&&scrollUpScene){scrollDownScene.remove();scrollDownScene=scrollDownScene.destroy();scrollUpScene.remove();scrollUpScene=scrollUpScene.destroy(true);}
scrollDownScene=new ScrollMagic.Scene({triggerElement:element[0],offset:element[0].offsetHeight*0.50,triggerHook:0,}).on('enter',function(){if(player.getFullscreen()){return;}else if(player.getState().toLowerCase()=='idle'||player.getState().toLowerCase()=='paused'){return;}
scrollDownEnter(element);flyingout=true;}).on('leave',function(){if(player.getFullscreen()){return;}
scrollDownLeave(element);flyingout=false;});scrollUpScene=new ScrollMagic.Scene({triggerElement:element[0],offset:element[0].offsetHeight*0.50,duration:0,triggerHook:1,}).on('enter',function(){if(player.getFullscreen()||!flyingout){return;}
scrollUpEnter(element);flyingout=false;}).on('leave',function(){if(player.getFullscreen()){return;}else if(player.getState().toLowerCase()=='idle'||player.getState().toLowerCase()=='paused'){return;}
scrollUpLeave(element);flyingout=true;});controller.addScene(scrollUpScene);controller.addScene(scrollDownScene);}
function scrollDownEnter(element){element.find('#flyoutButtonsDiv').show();var video=$(element).find('.inline-video');video.css({left:'',top:'100px',bottom:'',right:'',height:'',position:''});video.css({bottom:-190,left:$(window).width()-340,width:340,height:190,top:''});video.addClass('flyout-prepare');TweenLite.to(video,0.2,{bottom:0,"onComplete":function(){video.css({top:''});}});}
function scrollDownLeave(element){element.find('#flyoutButtonsDiv').hide();var video=$(element).find('.inline-video'),offset=element[0].getBoundingClientRect();if(offset.bottom<0){offset={bottom:$(window).height(),left:offset.left,right:offset.right,top:offset.top};}
video.css({position:'absolute',left:0});video.removeClass('flyout-prepare');video.css({left:'',top:'',bottom:'',position:'',width:'',height:''});}
function scrollUpLeave(element){element.find('#flyoutButtonsDiv').show();var video=$(element).find('.inline-video');video.css({left:'',top:'',bottom:'',right:'',height:'',position:''});video.css({bottom:-190,left:$(window).width()-340,width:340,height:190,top:''});video.addClass('flyout-prepare');TweenLite.to(video,0.2,{bottom:0});}
function scrollUpEnter(element){element.find('#flyoutButtonsDiv').hide();var video=$(element).find('.inline-video');video.css({position:'absolute',left:0});video.removeClass('flyout-prepare');video.css({left:'',top:'',bottom:'',position:'',width:'',height:''});}}
return{restrict:'E',scope:{content:'=content',videoComplete:'&videoComplete',videoPause:'&videoPause',videoPlay:'&videoPlay',flyout:'=flyout',autoplay:'=autoplay',postLoad:'=postload',contentUrl:'=contentUrl',playerReady:"&playerReady",jwPlayerMediaId:"=",playlistItemChange:"&",muted:"=",isVrSupportedPlayer:'@',viewportWidth:'@',noSidebar:'@',maxWidthOfRoot:'@',maxWidthLevel1:'@',showNavArrowOnControlIsOn:'&'},link:link,templateUrl:$rootScope.templateBaseUrl+"/html/template/snaVideo.html"}}]);loadJWPlayer();'use strict';snaApp.directive("snaVideoTeaser",['$rootScope','$interval','$timeout','$http','appConfig','$log','$sce',function($rootScope,$interval,$timeout,$http,appConfig,$log,$sce){function link(scope,element){var vt=$(element).find('video');var videoTeaserFirstLoad=true;var videoTeaserUrl;var videoTeaserTimeout;if((typeof $rootScope.device!='undefined'&&$rootScope.device!='DESKTOP')||$rootScope.deviceType!='DESKTOP'){return;}else if(!vt||typeof scope.content.type=='undefined'){return;}else if(scope.content.type=='VIDEO'&&typeof scope.content.teaserUrl=='undefined'){return;}else if(scope.content.type!='VIDEO'&&typeof scope.content.mediaAsset=='undefined'){return;}else if(scope.content.type!='VIDEO'&&typeof scope.content.mediaAsset!='undefined'&&!('teaserUrl'in scope.content.mediaAsset)){return;}
try{if(scope.content.type=='VIDEO'){videoTeaserUrl=$sce.trustAsResourceUrl(scope.content.teaserUrl);}else{videoTeaserUrl=$sce.trustAsResourceUrl(scope.content.mediaAsset.teaserUrl);}}catch(error){$log.log(error.message);return;}
scope.videoTeaserUrl=videoTeaserUrl;if($(element).parents('.video-holder').length){$(element).parents('.video-holder').addClass('teaser-on');}
var playVideoTeaser=function(video){if(video&&video.paused){video.muted=true;video.play();}
$(element).find('.videoTeaserSlide').addClass('in');};scope.videoTeaserOnHover=function(event){event&&event.stopPropagation();$(element).parents('a').removeAttr('title');if(videoTeaserFirstLoad){videoTeaserTimeout=$timeout(function(){var source=document.createElement('source');$(source).attr('type','video/mp4');$(source).attr('src',videoTeaserUrl);vt[0].appendChild(source);if(typeof vt[0].load==="function"){vt[0].load();}
vt[0].addEventListener('canplay',function(){playVideoTeaser(vt[0]);videoTeaserFirstLoad=false;},true);},100);}else{playVideoTeaser(vt[0]);}};scope.videoTeaserOnLeave=function(event){event&&event.stopPropagation();$(element).find('.videoTeaserSlide').removeClass('in');vt[0].pause();$timeout.cancel(videoTeaserTimeout);};scope.videoTeaserOnClick=function(event){event&&vt[0].pause();}}
return{restrict:'E',scope:{content:'=content'},link:link,templateUrl:$rootScope.templateBaseUrl+"/html/template/snaVideoTeaser.html"}}]);